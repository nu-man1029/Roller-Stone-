<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>KIMARU ç®¡ç†ç”»é¢</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500&family=Cormorant+Garamond:wght@300;400&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0;}
:root{
  --gold:#c9a84c;--bg:#0e0e0e;--bg2:#161616;--bg3:#1e1e1e;
  --border:rgba(201,168,76,0.18);--text:#eeebe4;--text2:#888;
  --radius:10px;--green:#4caf7d;--red:#e05555;
}
body{background:var(--bg);color:var(--text);font-family:'Noto Sans JP',sans-serif;font-weight:300;min-height:100vh;}
.header{background:var(--bg2);border-bottom:1px solid var(--border);padding:18px 28px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;}
.header-logo{font-family:'Cormorant Garamond',serif;font-size:1.4rem;color:var(--gold);letter-spacing:4px;}
.header-logo span{color:var(--text2);font-size:.72rem;letter-spacing:2px;margin-left:10px;font-family:'Noto Sans JP',sans-serif;}
.hbtns{display:flex;gap:10px;}
.btn{font-family:'Noto Sans JP',sans-serif;font-size:.78rem;font-weight:400;letter-spacing:1px;padding:10px 22px;border-radius:6px;cursor:pointer;border:none;transition:all .2s;display:flex;align-items:center;gap:7px;}
.btn-primary{background:var(--gold);color:#111;}
.btn-primary:hover{opacity:.85;transform:translateY(-1px);}
.btn-secondary{background:transparent;color:var(--text2);border:1px solid var(--border);}
.btn-secondary:hover{border-color:var(--gold);color:var(--gold);}
.btn-danger{background:transparent;color:var(--red);border:1px solid rgba(224,85,85,.3);font-size:.72rem;padding:7px 14px;}
.btn-danger:hover{background:rgba(224,85,85,.1);}
.btn-add{background:rgba(201,168,76,.08);color:var(--gold);border:1px dashed rgba(201,168,76,.4);width:100%;padding:14px;border-radius:8px;font-size:.82rem;letter-spacing:1px;margin-top:16px;}
.btn-add:hover{background:rgba(201,168,76,.14);}

/* LAYOUT */
.layout{display:grid;grid-template-columns:210px 1fr;min-height:calc(100vh - 61px);}
.sidebar{background:var(--bg2);border-right:1px solid var(--border);padding:20px 0;}
.sidebar-label{font-size:.6rem;letter-spacing:3px;color:var(--text2);padding:14px 14px 6px;text-transform:uppercase;}
.nav-item{display:flex;align-items:center;gap:9px;padding:9px 14px;border-radius:6px;cursor:pointer;font-size:.8rem;color:var(--text2);transition:all .2s;border:none;background:none;width:100%;text-align:left;}
.nav-item:hover{background:var(--bg3);color:var(--text);}
.nav-item.active{background:rgba(201,168,76,.1);color:var(--gold);border-left:2px solid var(--gold);}
.main{padding:36px 40px 120px;}
.page{display:none;}.page.active{display:block;}
.page-title{font-family:'Cormorant Garamond',serif;font-size:1.7rem;font-weight:300;color:var(--text);margin-bottom:4px;letter-spacing:2px;}
.page-sub{font-size:.78rem;color:var(--text2);margin-bottom:32px;}

/* CARDS */
.card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius);margin-bottom:20px;overflow:hidden;}
.card-head{padding:16px 22px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px;}
.card-icon{font-size:1rem;}
.card-name{font-size:.88rem;font-weight:500;letter-spacing:.5px;}
.card-desc{font-size:.72rem;color:var(--text2);margin-left:auto;}
.card-body{padding:22px;}

/* BA SLIDER CARD */
.ba-card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius);margin-bottom:16px;overflow:hidden;}
.ba-card-head{padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px;}
.ba-card-num{font-family:'Cormorant Garamond',serif;font-size:1.4rem;color:var(--gold);opacity:.5;line-height:1;}
.ba-card-title-input{flex:1;background:transparent;border:none;color:var(--text);font-family:'Noto Sans JP',sans-serif;font-size:.88rem;outline:none;border-bottom:1px solid transparent;transition:border-color .2s;padding:2px 4px;}
.ba-card-title-input:focus{border-bottom-color:var(--gold);}
.ba-card-body{padding:18px;}
.ba-img-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:16px;}
.img-drop-label{font-size:.65rem;letter-spacing:2px;color:var(--text2);margin-bottom:7px;text-transform:uppercase;}
.img-drop{border:2px dashed var(--border);border-radius:8px;overflow:hidden;aspect-ratio:16/9;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;position:relative;background:var(--bg3);}
.img-drop:hover,.img-drop.drag-over{border-color:var(--gold);background:rgba(201,168,76,.08);}
.img-drop.has-img{border-style:solid;border-color:rgba(201,168,76,.4);}
.img-drop img.preview{width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0;}
.img-drop-overlay{position:absolute;inset:0;background:rgba(0,0,0,.55);display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;transition:opacity .2s;z-index:1;}
.img-drop:hover .img-drop-overlay,.img-drop:not(.has-img) .img-drop-overlay{opacity:1;}
.img-drop-icon{font-size:1.6rem;margin-bottom:5px;color:var(--gold);}
.img-drop-text{font-size:.68rem;color:var(--text2);text-align:center;}
.img-drop input[type=file]{display:none;}
.img-fname{font-size:.68rem;color:var(--text2);margin-top:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}

/* INFO FIELDS */
.info-fields{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:14px;}
.sample-row{display:flex;align-items:center;gap:14px;}
/* Drive URL options */
.drive-opt{display:flex;align-items:center;gap:10px;background:var(--bg3);border:1px solid var(--border);border-radius:8px;padding:10px 14px;cursor:pointer;transition:all .2s;}
.drive-opt:hover{border-color:var(--gold);}
.drive-opt.selected{border-color:var(--gold);background:rgba(201,168,76,.08);}
.drive-opt-num{font-family:"Cormorant Garamond",serif;font-size:1.3rem;color:var(--gold);opacity:.6;line-height:1;flex-shrink:0;}
.drive-opt-info{flex:1;min-width:0;}
.drive-opt-label{font-size:.78rem;font-weight:500;color:var(--text);margin-bottom:3px;}
.drive-opt-url{font-size:.65rem;color:var(--text2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
/* Theme picker */
.theme-picker{display:flex;gap:10px;}
.theme-btn{flex:1;background:var(--bg3);border:2px solid var(--border);border-radius:10px;padding:14px 10px;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:7px;transition:all .2s;}
.theme-btn:hover{border-color:rgba(201,168,76,.5);}
.theme-btn.active{border-color:var(--gold);background:rgba(201,168,76,.08);}
.theme-swatch{width:36px;height:36px;border-radius:50%;border:2px solid rgba(255,255,255,.15);}
.dark-swatch{background:#111;box-shadow:inset 0 0 0 8px #c9a84c;}
.light-swatch{background:#f5f3ef;box-shadow:inset 0 0 0 8px #c9a84c;}
.ink-swatch{background:#f8f7f4;box-shadow:inset 0 0 0 8px #1a1a1a;}
.theme-label{font-size:.82rem;font-weight:500;color:var(--text);}
.theme-desc{font-size:.65rem;color:var(--text2);text-align:center;}
/* Project save/load */
.proj-modal{position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:500;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .25s;}
.proj-modal.open{opacity:1;pointer-events:all;}
.proj-box{background:var(--bg2);border:1px solid var(--border);border-radius:12px;padding:28px;width:420px;max-width:90vw;max-height:80vh;overflow-y:auto;}
.proj-box h3{font-family:'Cormorant Garamond',serif;font-size:1.2rem;font-weight:300;color:var(--gold);letter-spacing:2px;margin-bottom:20px;}
.proj-item{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;background:var(--bg3);border-radius:6px;margin-bottom:8px;cursor:pointer;transition:background .2s;border:1px solid transparent;}
.proj-item:hover{background:rgba(201,168,76,.1);border-color:var(--border);}
.proj-item-name{font-size:.85rem;}
.proj-item-date{font-size:.68rem;color:var(--text2);}
.proj-item-btns{display:flex;gap:6px;flex-shrink:0;}
.proj-empty{font-size:.8rem;color:var(--text2);text-align:center;padding:24px;}

.sample-preview-wrap{position:relative;width:64px;height:64px;flex-shrink:0;}
.sample-preview{width:64px;height:64px;border-radius:7px;object-fit:cover;border:1px solid var(--border);display:none;}
.sample-preview.visible{display:block;}

/* FORM */
label.field-label{display:block;font-size:.65rem;letter-spacing:2px;color:var(--text2);margin-bottom:7px;text-transform:uppercase;}
input[type=text],input[type=url],textarea{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:6px;padding:11px 13px;color:var(--text);font-family:'Noto Sans JP',sans-serif;font-size:.85rem;font-weight:300;outline:none;transition:border-color .2s;}
input[type=text]:focus,input[type=url]:focus,textarea:focus{border-color:var(--gold);}
textarea{resize:vertical;line-height:1.9;}
.hint{font-size:.68rem;color:var(--text2);margin-top:5px;line-height:1.7;}
.hint a{color:var(--gold);text-decoration:none;}
.form-row{margin-bottom:18px;}.form-row:last-child{margin-bottom:0;}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
.form-grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px;}

/* TOGGLE */
.toggle-row{display:flex;align-items:center;justify-content:space-between;padding:12px 0;border-bottom:1px solid rgba(255,255,255,.04);}
.toggle-row:last-child{border-bottom:none;}
.toggle-info .t-label{font-size:.83rem;font-weight:400;}
.toggle-info .t-desc{font-size:.7rem;color:var(--text2);margin-top:2px;}
.toggle{position:relative;width:42px;height:22px;flex-shrink:0;margin-left:14px;}
.toggle input{display:none;}
.toggle-track{display:block;width:100%;height:100%;background:var(--bg3);border:1px solid var(--border);border-radius:11px;transition:all .2s;cursor:pointer;}
.toggle input:checked+.toggle-track{background:rgba(201,168,76,.3);border-color:var(--gold);}
.toggle-thumb{position:absolute;top:3px;left:3px;width:14px;height:14px;background:var(--text2);border-radius:50%;transition:all .2s;pointer-events:none;}
.toggle input:checked~.toggle-thumb{left:23px;background:var(--gold);}

/* LOGO GRID */
.logo-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;}
.logo-drop{border:2px dashed var(--border);border-radius:8px;aspect-ratio:1;overflow:hidden;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;position:relative;background:var(--bg3);}
.logo-drop:hover,.logo-drop.drag-over{border-color:var(--gold);background:rgba(201,168,76,.08);}
.logo-drop.has-img{border-style:solid;border-color:rgba(201,168,76,.4);}
.logo-drop img.preview{width:100%;height:100%;object-fit:cover;position:absolute;}
.logo-drop input[type=file]{display:none;}

/* SAVE BAR */
.save-bar{position:fixed;bottom:0;left:0;right:0;background:var(--bg2);border-top:1px solid var(--border);padding:14px 28px;display:flex;align-items:center;justify-content:space-between;transform:translateY(100%);transition:transform .3s;z-index:200;}
.save-bar.show{transform:translateY(0);}
.save-msg{font-size:.78rem;color:var(--text2);}
.save-msg strong{color:var(--gold);}
.save-btns{display:flex;gap:10px;}

/* TOAST */
.toast{position:fixed;top:72px;right:20px;background:var(--bg2);border:1px solid var(--green);border-radius:8px;padding:12px 18px;font-size:.8rem;color:var(--text);display:flex;align-items:center;gap:9px;transform:translateX(120%);transition:transform .3s;z-index:300;}
.toast.show{transform:translateX(0);}

/* BA PREVIEW */
.ba-preview-panel{background:var(--bg3);border-radius:8px;overflow:hidden;margin-bottom:8px;}
.ba-preview-slider{position:relative;width:100%;aspect-ratio:16/9;cursor:ew-resize;user-select:none;}
.ba-preview-img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;}
.ba-preview-after{clip-path:inset(0 0 0 50%);z-index:2;}
.ba-preview-handle{position:absolute;top:0;bottom:0;left:50%;transform:translateX(-50%);width:30px;z-index:10;display:flex;flex-direction:column;align-items:center;pointer-events:none;}
.ba-preview-line{width:2px;flex:1;background:var(--gold);}
.ba-preview-pill{background:var(--gold);color:#111;font-size:.5rem;font-weight:700;letter-spacing:2px;padding:4px 6px;}
.ba-preview-empty{display:flex;align-items:center;justify-content:center;height:120px;color:var(--text2);font-size:.78rem;}

@media(max-width:768px){
  .layout{grid-template-columns:1fr;}
  .sidebar{display:none;}
  .main{padding:20px 14px 120px;}
  .form-grid,.form-grid3,.info-fields,.ba-img-grid,.logo-grid{grid-template-columns:1fr;}
}
</style>
</head>
<body>

<header class="header">
  <div class="header-logo">KIMARU <span>ç®¡ç†ç”»é¢</span></div>
  <div class="hbtns">
    <button class="btn btn-secondary" onclick="previewLP()">ğŸ‘ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
    <button class="btn btn-primary" onclick="generateAndDownload()">â¬‡ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
  </div>
</header>

<div class="layout">
  <nav class="sidebar">
    <div class="sidebar-label">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</div>
    <button class="nav-item active" onclick="showPage('ba',this)"><span>â†”ï¸</span>BAã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼</button>
    <button class="nav-item" onclick="showPage('urls',this)"><span>ğŸ”—</span>URLè¨­å®š</button>
    <button class="nav-item" onclick="showPage('text',this)"><span>âœï¸</span>ãƒ†ã‚­ã‚¹ãƒˆ</button>
    <button class="nav-item" onclick="showPage('logos',this)"><span>ğŸ·</span>ãƒ­ã‚´</button>
    <button class="nav-item" onclick="showPage('profile',this)"><span>ğŸ‘¤</span>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</button>
    <button class="nav-item" onclick="showPage('sections',this)"><span>âš™ï¸</span>ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š</button>
    <div class="sidebar-label" style="margin-top:16px;">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</div>
    <button class="nav-item" onclick="openSaveModal()"><span>ğŸ’¾</span>ä¿å­˜ã™ã‚‹</button>
    <button class="nav-item" onclick="openLoadModal()"><span>ğŸ“‚</span>å‘¼ã³å‡ºã™</button>
  </nav>

  <main class="main">

    <!-- ===== BA SLIDER ===== -->
    <div class="page active" id="page-ba">
      <div class="page-title">BAã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼</div>
      <div class="page-sub">æ–½å·¥äº‹ä¾‹ã®Before/Afterã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’ç®¡ç†ã—ã¾ã™ã€‚è¿½åŠ ãƒ»å‰Šé™¤ãƒ»ä¸¦ã³æ›¿ãˆãŒå¯èƒ½ã§ã™ã€‚</div>
      <div id="ba-cards"></div>
      <button class="btn btn-add" onclick="addBaCard()">ï¼‹ ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’è¿½åŠ ã™ã‚‹</button>
    </div>

    <!-- ===== URL ===== -->
    <div class="page" id="page-urls">
      <div class="page-title">URL è¨­å®š</div>
      <div class="page-sub">LINEãƒ»Instagramãƒ»å‹•ç”»ã®URLã‚’è¨­å®šã—ã¾ã™ã€‚</div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ¨</span><span class="card-name">ãƒ†ãƒ¼ãƒ</span><span class="card-desc">æ›¸ãå‡ºã™LPã®é…è‰²</span></div>
        <div class="card-body">
          <div class="form-row">
            <label class="field-label">ãƒ†ãƒ¼ãƒã‚’é¸æŠ</label>
            <div class="theme-picker" id="theme-picker">
              <button class="theme-btn active" data-theme="dark"  onclick="selectTheme('dark',this)">
                <span class="theme-swatch dark-swatch"></span>
                <span class="theme-label">Dark</span>
                <span class="theme-desc">é»’èƒŒæ™¯ãƒ»é‡‘ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ</span>
              </button>
              <button class="theme-btn" data-theme="light" onclick="selectTheme('light',this)">
                <span class="theme-swatch light-swatch"></span>
                <span class="theme-label">Light</span>
                <span class="theme-desc">ãƒ™ãƒ¼ã‚¸ãƒ¥ãƒ»æ¸©ã‹ã¿</span>
              </button>
              <button class="theme-btn" data-theme="ink"   onclick="selectTheme('ink',this)">
                <span class="theme-swatch ink-swatch"></span>
                <span class="theme-label">Ink</span>
                <span class="theme-desc">ç™½é»’ãƒ»ã‚·ãƒ£ãƒ¼ãƒ—</span>
              </button>
            </div>
            <div class="hint" style="margin-top:10px;">æ›¸ãå‡ºã—ãŸHTMLã¯ã“ã®ãƒ†ãƒ¼ãƒã§å®Œå…¨å›ºå®šã•ã‚Œã¾ã™ï¼ˆåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ãªã—ï¼‰ã€‚</div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ“Š</span><span class="card-name">GA4 è¨­å®š</span><span class="card-desc">Google Analytics</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">æ¸¬å®šIDï¼ˆGA4ï¼‰</label><input type="text" id="ga4-id" placeholder="G-XXXXXXXXXX" oninput="markDirty()"><div class="hint">ç¾åœ¨ã®è¨­å®š: G-0VF277F6RXã€€å¤‰æ›´ã™ã‚‹å ´åˆã®ã¿å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</div></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ’¬</span><span class="card-name">LINE</span><span class="card-desc">ãƒ¡ã‚¤ãƒ³CTA ã‚¤ãƒ™ãƒ³ãƒˆ: click / cta / line_pr</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">LINE URL</label><input type="url" id="line-url" placeholder="https://lin.ee/xxxxxxx" oninput="markDirty()"><div class="hint"><a href="https://manager.line.biz/" target="_blank">LINE Official Account Manager</a> â†’ å‹ã ã¡è¿½åŠ ã‚¬ã‚¤ãƒ‰</div></div>
          <div class="form-row"><label class="field-label">CTAãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆ</label><input type="text" id="line-btn-text" placeholder="LINE ã§ãŠå•ã„åˆã‚ã›" oninput="markDirty()"></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ“·</span><span class="card-name">Instagram</span><span class="card-desc">ã‚¤ãƒ™ãƒ³ãƒˆ: click / social / instagram_numan</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">Instagram URL</label><input type="url" id="ig-url" placeholder="https://www.instagram.com/cementart_numan/" oninput="markDirty()"></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ¬</span><span class="card-name">å‹•ç”»</span><span class="card-desc">Cinematic View</span></div>
        <div class="card-body">
          <div class="form-row">
            <label class="field-label">Googleãƒ‰ãƒ©ã‚¤ãƒ–URL â†’ è‡ªå‹•å¤‰æ›</label>
            <div style="display:flex;gap:8px;">
              <input type="url" id="drive-raw-url" placeholder="https://drive.google.com/file/d/XXXXX/view" style="flex:1;" oninput="autoConvertDriveUrl(this.value)">
              <button class="btn btn-primary" style="white-space:nowrap;flex-shrink:0;" onclick="convertDriveUrl()">å¤‰æ›ã™ã‚‹</button>
            </div>
            <div class="hint">ãƒ‰ãƒ©ã‚¤ãƒ–ã®URLã‚’ãã®ã¾ã¾è²¼ã£ã¦ã€Œå¤‰æ›ã™ã‚‹ã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚<br>å…±æœ‰è¨­å®šã¯ <strong style="color:var(--gold)">ã€Œãƒªãƒ³ã‚¯ã‚’çŸ¥ã£ã¦ã„ã‚‹å…¨å“¡ãŒé–²è¦§å¯ã€</strong> ã«ã—ã¦ãã ã•ã„ã€‚</div>
          </div>
          <div id="drive-results" style="display:none;">
            <div class="form-row">
              <label class="field-label">å¤‰æ›çµæœ â€” ä½¿ã†URLã‚’é¸ã‚“ã§ãã ã•ã„</label>
              <div id="drive-url-options" style="display:flex;flex-direction:column;gap:8px;"></div>
              <div class="hint" style="margin-top:8px;">
                <strong style="color:var(--gold)">â‘  ç›´æ¥DL</strong> ãŒä¸€ç•ªã‚·ãƒ³ãƒ—ãƒ«ã€‚å¤§ãã„ãƒ•ã‚¡ã‚¤ãƒ«(100MBè¶…)ã¯â‘¡ã‚’è©¦ã—ã¦ãã ã•ã„ã€‚<br>
                ã†ã¾ãå†ç”Ÿã§ããªã„å ´åˆã¯â‘¢ã®åŸ‹ã‚è¾¼ã¿iframeã‚’ãŠè©¦ã—ãã ã•ã„ï¼ˆè¦‹ãŸç›®ãŒå¤‰ã‚ã‚Šã¾ã™ï¼‰ã€‚
              </div>
            </div>
          </div>
          <div class="form-row">
            <label class="field-label">å‹•ç”»URLï¼ˆç›´æ¥å…¥åŠ›ãƒ»ã¾ãŸã¯ä¸Šã‹ã‚‰è‡ªå‹•å…¥åŠ›ï¼‰</label>
            <input type="url" id="video-url" placeholder="https://drive.google.com/uc?export=download&id=..." oninput="markDirty()">
          </div>
          <div class="form-row"><label class="field-label">ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒURLï¼ˆä»»æ„ï¼‰</label><input type="url" id="video-poster" placeholder="https://..." oninput="markDirty()"></div>
          <div class="form-row"><label class="field-label">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«</label><input type="text" id="video-title" placeholder="ç´ æã®ä¸–ç•Œã‚’ã€æ˜ åƒã§ã€‚" oninput="markDirty()"></div>
          <div class="form-row"><label class="field-label">èª¬æ˜æ–‡</label><textarea id="video-body" rows="2" oninput="markDirty()" placeholder="æ–½å·¥ã®è³ªæ„Ÿã¨ä»•ä¸ŠãŒã‚Šã‚’æ˜ åƒã§ãŠå±Šã‘ã—ã¾ã™ã€‚"></textarea></div>
          <div class="toggle-row">
            <div class="toggle-info"><div class="t-label">å‹•ç”»ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹</div><div class="t-desc">OFFã«ã™ã‚‹ã¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã”ã¨éè¡¨ç¤º</div></div>
            <label class="toggle"><input type="checkbox" id="video-visible" onchange="markDirty()"><span class="toggle-track"></span><span class="toggle-thumb"></span></label>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== TEXT ===== -->
    <div class="page" id="page-text">
      <div class="page-title">ãƒ†ã‚­ã‚¹ãƒˆ ç·¨é›†</div>
      <div class="page-sub">ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»CTAã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ç·¨é›†ã—ã¾ã™ã€‚</div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ†</span><span class="card-name">Heroï¼ˆãƒˆãƒƒãƒ—ï¼‰</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">ãƒ¡ã‚¤ãƒ³ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼</label><textarea id="hero-catch" rows="3" oninput="markDirty()"></textarea><div class="hint">æ”¹è¡Œã¯ &lt;br&gt; ã‚’ä½¿ã„ã¾ã™ã€‚ä¾‹ï¼šæ–½å·¥ã®ç¾å ´ãŒã€&lt;br&gt;æœ€é«˜ã®ææ¡ˆæ›¸ã«ãªã‚‹ã€‚</div></div>
          <div class="form-row">
            <label class="field-label">ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ï¼ˆ5æšï¼‰</label>
            <div class="hint" style="margin-bottom:8px;">1è¡Œãšã¤å…¥åŠ›ã€‚å¼·èª¿ã—ãŸã„èªã‚’ <strong>&lt;span&gt;èª&lt;/span&gt;</strong> ã§å›²ã‚€ã¨é‡‘è‰²ã«ãªã‚Šã¾ã™ã€‚æ”¹è¡Œä½ç½®ã¯ &lt;br&gt; ã§æŒ‡å®šã§ãã¾ã™ã€‚</div>
            <textarea id="catch-1" rows="2" oninput="markDirty()" placeholder="ä¾‹ï¼šã‚ãªãŸã®æŠ€è¡“ã¯ã€ã‚‚ã£ã¨&lt;span&gt;ä¼ã‚ã‚‹&lt;/span&gt;ã€‚"></textarea>
            <textarea id="catch-2" rows="2" oninput="markDirty()" placeholder="ä¾‹ï¼šè·äººã®ä»•äº‹ãŒã€ç”»é¢ã®ä¸­ã§&lt;span&gt;å‹•ãå‡ºã™&lt;/span&gt;ã€‚" style="margin-top:6px;"></textarea>
            <textarea id="catch-3" rows="2" oninput="markDirty()" placeholder="ä¾‹ï¼šææ¡ˆãŒå¤‰ã‚ã‚Œã°ã€&lt;span&gt;å¥‘ç´„&lt;/span&gt;ãŒå¤‰ã‚ã‚‹ã€‚" style="margin-top:6px;"></textarea>
            <textarea id="catch-4" rows="2" oninput="markDirty()" placeholder="ä¾‹ï¼šã‚¹ãƒãƒ›ä¸€ã¤ã§ã€&lt;span&gt;ãƒ—ãƒ­&lt;/span&gt;ã®ææ¡ˆæ›¸ã€‚" style="margin-top:6px;"></textarea>
            <textarea id="catch-5" rows="2" oninput="markDirty()" placeholder="ä¾‹ï¼šè¦‹ã›æ–¹ã‚’å¤‰ãˆã‚‹ã ã‘ã§ã€&lt;span&gt;çµæœ&lt;/span&gt;ãŒå¤‰ã‚ã‚‹ã€‚" style="margin-top:6px;"></textarea>
          </div>
          <div class="form-row"><label class="field-label">ã‚µãƒ–ã‚³ãƒ”ãƒ¼</label><textarea id="hero-sub" rows="2" oninput="markDirty()"></textarea></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ’Œ</span><span class="card-name">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœãƒƒã‚¯ã‚¹</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</label><textarea id="msg-main" rows="3" oninput="markDirty()"></textarea><div class="hint">é‡‘è‰²ã«ã—ãŸã„éƒ¨åˆ†ã‚’ &lt;span&gt;ã€œ&lt;/span&gt; ã§å›²ã‚“ã§ãã ã•ã„ã€‚</div></div>
          <div class="form-row"><label class="field-label">ã‚µãƒ–ãƒ†ã‚­ã‚¹ãƒˆ</label><textarea id="msg-body" rows="3" oninput="markDirty()"></textarea></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ“£</span><span class="card-name">CTA</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">CTAã‚¿ã‚¤ãƒˆãƒ«</label><textarea id="cta-title" rows="2" oninput="markDirty()"></textarea></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ—‚</span><span class="card-name">ãã®ä»–ã®æ–½å·¥äº‹ä¾‹ï¼ˆã‚®ãƒ£ãƒ©ãƒªãƒ¼ï¼‰</span><span class="card-desc">æº–å‚™ä¸­ãƒãƒŠãƒ¼</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«</label><input type="text" id="gallery-title" placeholder="ãã®ä»–ã®æ–½å·¥äº‹ä¾‹ã¯ã“ã¡ã‚‰" oninput="markDirty()"></div>
          <div class="form-row"><label class="field-label">èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆ</label><textarea id="gallery-body" rows="2" placeholder="ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ãƒ»ç´ æåˆ¥ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’æº–å‚™ã—ã¦ã„ã¾ã™ã€‚" oninput="markDirty()"></textarea></div>
          <div class="form-row"><label class="field-label">ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ</label><input type="text" id="gallery-btn-text" placeholder="æ–½å·¥äº‹ä¾‹ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’è¦‹ã‚‹" oninput="markDirty()"></div>
          <div class="form-row"><label class="field-label">ã‚®ãƒ£ãƒ©ãƒªãƒ¼URLï¼ˆå®Œæˆå¾Œã«å…¥åŠ›ï¼‰</label><input type="url" id="gallery-url" placeholder="https://... ï¼ˆç©ºæ¬„ã®ã¾ã¾ã ã¨ã€Œæº–å‚™ä¸­ã€è¡¨ç¤ºï¼‰" oninput="markDirty()"><div class="hint">URLã‚’å…¥åŠ›ã™ã‚‹ã¨ãƒœã‚¿ãƒ³ãŒãƒªãƒ³ã‚¯ã«ãªã‚Šã€ã€Œæº–å‚™ä¸­ã€ãƒãƒƒã‚¸ãŒæ¶ˆãˆã¾ã™ã€‚</div></div>
        </div>
      </div>
    </div>

    <!-- ===== LOGOS ===== -->
    <div class="page" id="page-logos">
      <div class="page-title">ãƒ­ã‚´</div>
      <div class="page-sub">ãƒ•ãƒƒã‚¿ãƒ¼ãƒ»é€ã‹ã—ã«ä½¿ç”¨ã™ã‚‹ãƒ­ã‚´ç”»åƒã‚’è¨­å®šã—ã¾ã™ã€‚</div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ·</span><span class="card-name">ãƒ­ã‚´ç”»åƒ</span></div>
        <div class="card-body">
          <div class="logo-grid">
            <div>
              <div class="img-drop-label">ãƒ€ãƒ¼ã‚¯ç”¨ãƒ­ã‚´</div>
              <div class="logo-drop" id="drop-fdark" onclick="triggerUpload('file-fdark')">
                <img class="preview" id="prev-fdark" src="images/footer_logo_dark.jpg" alt="">
                <div class="img-drop-overlay"><span class="img-drop-icon">ğŸ“·</span><span class="img-drop-text">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å¤‰æ›´</span></div>
                <input type="file" id="file-fdark" accept="image/*" onchange="handleLogo(this,'footer-logo-dark','prev-fdark','drop-fdark')">
              </div>
            </div>
            <div>
              <div class="img-drop-label">ãƒ©ã‚¤ãƒˆç”¨ãƒ­ã‚´</div>
              <div class="logo-drop" id="drop-flight" onclick="triggerUpload('file-flight')">
                <img class="preview" id="prev-flight" src="images/footer_logo_light.jpg" alt="">
                <div class="img-drop-overlay"><span class="img-drop-icon">ğŸ“·</span><span class="img-drop-text">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å¤‰æ›´</span></div>
                <input type="file" id="file-flight" accept="image/*" onchange="handleLogo(this,'footer-logo-light','prev-flight','drop-flight')">
              </div>
            </div>
            <div>
              <div class="img-drop-label">é€ã‹ã—ç”¨ï¼ˆPNGæ¨å¥¨ï¼‰</div>
              <div class="logo-drop" id="drop-logo" onclick="triggerUpload('file-logo')">
                <img class="preview" id="prev-logo" src="images/logo.png" alt="">
                <div class="img-drop-overlay"><span class="img-drop-icon">ğŸ“·</span><span class="img-drop-text">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å¤‰æ›´</span></div>
                <input type="file" id="file-logo" accept="image/*" onchange="handleLogo(this,'logo','prev-logo','drop-logo')">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== PROFILE ===== -->
    <div class="page" id="page-profile">
      <div class="page-title">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</div>
      <div class="page-sub">ã¬ãƒ¼ã¾ã‚“ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†ã—ã¾ã™ã€‚</div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ‘¤</span><span class="card-name">åŸºæœ¬æƒ…å ±</span></div>
        <div class="card-body">
          <div class="form-grid form-row">
            <div><label class="field-label">åå‰ï¼ˆæ—¥æœ¬èªï¼‰</label><input type="text" id="numan-name-ja" placeholder="ã‚»ãƒ¡ãƒ³ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ ã¬ãƒ¼ã¾ã‚“" oninput="markDirty()"></div>
            <div><label class="field-label">åå‰ï¼ˆè‹±èªï¼‰</label><input type="text" id="numan-name-en" placeholder="Cement Artist Nuâ˜†Man" oninput="markDirty()"></div>
          </div>
          <div class="form-grid form-row">
            <div><label class="field-label">ğŸ“ å ´æ‰€</label><input type="text" id="numan-location" placeholder="ä¸‰é‡çœŒ æ¾é˜ªå¸‚" oninput="markDirty()"></div>
            <div><label class="field-label">ğŸ—“ çµŒæ­´</label><input type="text" id="numan-career" placeholder="ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³æ­´ 2019å¹´ã€œ" oninput="markDirty()"></div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ“–</span><span class="card-name">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ–‡</span></div>
        <div class="card-body">
          <div class="form-row"><textarea id="numan-body" rows="10" oninput="markDirty()"></textarea></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ–¼</span><span class="card-name">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸ</span></div>
        <div class="card-body">
          <div style="display:grid;grid-template-columns:200px 160px;gap:16px;">
            <div>
              <div class="img-drop-label">ãƒ¡ã‚¤ãƒ³å†™çœŸï¼ˆã‚«ãƒ©ãƒ¼ï¼‰</div>
              <div class="logo-drop" style="aspect-ratio:1;" id="drop-nm" onclick="triggerUpload('file-nm')">
                <img class="preview" id="prev-nm" src="images/numan_color.jpg" alt="">
                <div class="img-drop-overlay"><span class="img-drop-icon">ğŸ“·</span><span class="img-drop-text">å¤‰æ›´</span></div>
                <input type="file" id="file-nm" accept="image/*" onchange="handleLogo(this,'numan-color','prev-nm','drop-nm')">
              </div>
            </div>
            <div>
              <div class="img-drop-label">ã‚µãƒ–å†™çœŸ</div>
              <div class="logo-drop" style="aspect-ratio:1;" id="drop-ns" onclick="triggerUpload('file-ns')">
                <img class="preview" id="prev-ns" src="images/numan_portrait.jpg" alt="">
                <div class="img-drop-overlay"><span class="img-drop-icon">ğŸ“·</span><span class="img-drop-text">å¤‰æ›´</span></div>
                <input type="file" id="file-ns" accept="image/*" onchange="handleLogo(this,'numan-portrait','prev-ns','drop-ns')">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== SECTIONS ===== -->
    <div class="page" id="page-sections">
      <div class="page-title">ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š</div>
      <div class="page-sub">å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®è¡¨ç¤ºãƒ»éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™ã€‚</div>
      <div class="card">
        <div class="card-body">
          <div class="toggle-row"><div class="toggle-info"><div class="t-label">BAã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³</div></div><label class="toggle"><input type="checkbox" id="sec-ba" checked onchange="markDirty()"><span class="toggle-track"></span><span class="toggle-thumb"></span></label></div>
          <div class="toggle-row"><div class="toggle-info"><div class="t-label">å‹•ç”»ã‚»ã‚¯ã‚·ãƒ§ãƒ³</div></div><label class="toggle"><input type="checkbox" id="sec-video" onchange="markDirty()"><span class="toggle-track"></span><span class="toggle-thumb"></span></label></div>
          <div class="toggle-row"><div class="toggle-info"><div class="t-label">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³</div></div><label class="toggle"><input type="checkbox" id="sec-profile" checked onchange="markDirty()"><span class="toggle-track"></span><span class="toggle-thumb"></span></label></div>
          <div class="toggle-row"><div class="toggle-info"><div class="t-label">Why KIMARUã‚»ã‚¯ã‚·ãƒ§ãƒ³</div></div><label class="toggle"><input type="checkbox" id="sec-why" checked onchange="markDirty()"><span class="toggle-track"></span><span class="toggle-thumb"></span></label></div>
        </div>
      </div>
    </div>

  </main>
</div>

<!-- SAVE BAR -->
<div class="save-bar" id="save-bar">
  <div class="save-msg">âš  <strong>æœªä¿å­˜ã®å¤‰æ›´ãŒã‚ã‚Šã¾ã™ã€‚</strong></div>
  <div class="save-btns">
    <button class="btn btn-secondary" onclick="resetAll()">ãƒªã‚»ãƒƒãƒˆ</button>
    <button class="btn btn-primary" onclick="generateAndDownload()">â¬‡ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
  </div>
</div>
<div class="toast" id="toast"><span style="color:var(--green)">âœ…</span><span id="toast-msg"></span></div>

<script>
// ===== STATE =====
var dirty=false;
var imageData={};// keyâ†’{base64,filename}
var baCards=[];// array of {id,title,before,after,finish,color,grout,sample}

// ===== NAV =====
function showPage(id,el){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  el.classList.add('active');
}

// ===== DIRTY =====
// ===== Google Drive URL å¤‰æ› =====
function extractDriveId(url){
  var m=url.match(/\/file\/d\/([a-zA-Z0-9_-]+)/);
  if(m)return m[1];
  m=url.match(/[?&]id=([a-zA-Z0-9_-]+)/);
  if(m)return m[1];
  return null;
}

function autoConvertDriveUrl(val){
  if(!val) return;
  var id = extractDriveId(val);
  if(!id) return;
  // ãƒ‰ãƒ©ã‚¤ãƒ–URLã£ã½ã‘ã‚Œã°è‡ªå‹•ã§â‘ ã«å¤‰æ›ã—ã¦ã‚»ãƒƒãƒˆ
  var converted = 'https://drive.google.com/uc?export=download&id='+id;
  document.getElementById('video-url').value = converted;
  markDirty();
}

function convertDriveUrl(){
  var raw=document.getElementById('drive-raw-url').value.trim();
  if(!raw){showToast('âš  Googleãƒ‰ãƒ©ã‚¤ãƒ–URLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');return;}
  var id=extractDriveId(raw);
  if(!id){showToast('âš  ãƒ•ã‚¡ã‚¤ãƒ«IDãŒå–å¾—ã§ãã¾ã›ã‚“ã€‚URLã‚’ç¢ºèªã—ã¦ãã ã•ã„');return;}

  // 3ãƒ‘ã‚¿ãƒ¼ãƒ³ç”Ÿæˆ
  var opts=[
    {
      num:'â‘ ',
      label:'ç›´æ¥ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆæ¨å¥¨ãƒ»100MBä»¥ä¸‹ï¼‰',
      url:'https://drive.google.com/uc?export=download&id='+id
    },
    {
      num:'â‘¡',
      label:'å¼·åˆ¶ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆå¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«å‘ã‘ï¼‰',
      url:'https://drive.usercontent.google.com/download?id='+id+'&export=download&authuser=0&confirm=t'
    },
    {
      num:'â‘¢',
      label:'ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼åŸ‹ã‚è¾¼ã¿ï¼ˆå†ç”Ÿã§ããªã„æ™‚ã®ä»£æ›¿ï¼‰',
      url:'https://drive.google.com/file/d/'+id+'/preview'
    }
  ];

  var container=document.getElementById('drive-url-options');
  // store urls globally for index access
  window._driveOpts=opts;
  container.innerHTML=opts.map(function(opt,i){
    return '<div class="drive-opt" onclick="selectDriveUrlByIndex('+i+',this)">'
      +'<span class="drive-opt-num">'+opt.num+'</span>'
      +'<div class="drive-opt-info">'
      +'<div class="drive-opt-label">'+opt.label+'</div>'
      +'<div class="drive-opt-url">'+opt.url+'</div>'
      +'</div>'
      +'</div>';
  }).join('');

  document.getElementById('drive-results').style.display='block';
  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆâ‘ ã‚’è‡ªå‹•ã‚»ãƒƒãƒˆ
  selectDriveUrlByIndex(0, container.firstChild);
  showToast('âœ… å¤‰æ›ã—ã¾ã—ãŸã€‚URLã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
}

function selectDriveUrlByIndex(i, el){
  var opts=window._driveOpts||[];
  if(!opts[i])return;
  selectDriveUrl(el, opts[i].url);
}

function selectDriveUrl(el, url){
  document.querySelectorAll('.drive-opt').forEach(function(o){o.classList.remove('selected');});
  el.classList.add('selected');
  document.getElementById('video-url').value=url;
  markDirty();
}

function selectTheme(theme, el){
  document.querySelectorAll('.theme-btn').forEach(function(btn){ btn.classList.remove('active'); });
  el.classList.add('active');
  markDirty();
}

function markDirty(){dirty=true;document.getElementById('save-bar').classList.add('show');}
function resetAll(){if(!confirm('å¤‰æ›´ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ'))return;dirty=false;document.getElementById('save-bar').classList.remove('show');loadDefaults();}

// ===== BA CARDS =====
var baIdCounter=0;

function addBaCard(data){
  if(!data)data={id:'ba_'+(baIdCounter++),title:'',before:'',after:'',finish:'',color:'',grout:'',sample:''};
  else if(!data.id)data.id='ba_'+(baIdCounter++);
  baCards.push(data);
  renderBaCards();
  markDirty();
}

function removeBaCard(id){
  baCards=baCards.filter(c=>c.id!==id);
  renderBaCards();
  markDirty();
}

function renderBaCards(){
  var container=document.getElementById('ba-cards');
  container.innerHTML='';
  baCards.forEach(function(item,i){
    var div=document.createElement('div');
    div.className='ba-card';
    div.id='card-'+item.id;
    div.innerHTML=buildBaCardHTML(item,i);
    container.appendChild(div);
    initBaPreview(item.id);
  });
}

function buildBaCardHTML(item,i){
  var num=(i+1<10?'0'+(i+1):String(i+1));
  var angles=item.angles||[];
  var anglesUI=angles.map(function(ang,ai){
    return '<div style="display:flex;gap:10px;align-items:flex-start;margin-bottom:10px;">'
      +'<div style="margin-bottom:4px;"><label class="field-label">ç”»åƒURL</label>'
      +'<input type="url" placeholder="https://..." value="'+escHtml(ang.src||'')+'" oninput="updateAngleSrc(\''+item.id+'\','+ai+',this.value)">'
      +'</div>'
      +'<div style="flex:1;">'
      +'<label class="field-label">ãƒ©ãƒ™ãƒ«</label>'
      +'<input type="text" style="margin-bottom:8px;" placeholder="ä¾‹ï¼šé³¥è¦³å›³ã€å¤œæ™¯ã€ãƒ©ã‚¤ãƒˆã‚¢ãƒƒãƒ—" value="'+escHtml(ang.label||'')+'" oninput="updateAngleLabel(\''+item.id+'\','+ai+',this.value)">'
      +'<button class="btn btn-danger" style="padding:5px 12px;font-size:.7rem;" onclick="removeAngle(\''+item.id+'\','+ai+')">&#10005; å‰Šé™¤</button>'
      +'</div></div>';
  }).join('');

  var beforeHasImg=item.before?'has-img':'';
  var afterHasImg=item.after?'has-img':'';
  var sampleHasImg=item.sample?'has-img':'';

  return '<div class="ba-card-head">'
    +'<span class="ba-card-num">'+num+'</span>'
    +'<input class="ba-card-title-input" type="text" placeholder="ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆä¾‹ï¼šRSã‚¿ã‚¤ãƒ«èª¿ ç„é–¢ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰" value="'+escHtml(item.title)+'" oninput="updateBaField(\''+item.id+'\',\'title\',this.value)">'
    +'<button class="btn btn-danger" onclick="removeBaCard(\''+item.id+'\')">å‰Šé™¤</button>'
    +'</div>'
    +'<div class="ba-card-body">'
    +'<div class="ba-preview-panel">'
    +'<div class="ba-preview-slider" id="preview-slider-'+item.id+'">'
    +(item.before?'<img class="ba-preview-img" src="'+item.before+'" alt="">':'')
    +(item.after?'<img class="ba-preview-img ba-preview-after" src="'+item.after+'" alt="">':'')
    +(item.before||item.after?'<div class="ba-preview-handle"><div class="ba-preview-line"></div><div class="ba-preview-pill">SLIDE</div></div>':'<div class="ba-preview-empty">ç”»åƒã‚’ã‚¢ãƒƒãƒ—ã™ã‚‹ã¨ã“ã“ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>')
    +'</div></div>'
    +'<div class="ba-img-grid">'
    +'<div><div class="img-drop-label">Beforeï¼ˆæ–½å·¥å‰ï¼‰</div>'
    +'<input type="url" placeholder="https://... ç”»åƒURL" value="'+escHtml(item.before||'')+'" oninput="updateBaField(\''+item.id+'\',\'before\',this.value);updateBaPreviewFromUrl(\''+item.id+'\')">'
    +'</div>'
    +'<div><div class="img-drop-label">Afterï¼ˆæ–½å·¥å¾Œï¼‰</div>'
    +'<input type="url" placeholder="https://... ç”»åƒURL" value="'+escHtml(item.after||'')+'" oninput="updateBaField(\''+item.id+'\',\'after\',this.value);updateBaPreviewFromUrl(\''+item.id+'\')">'
    +'</div>'
    +'</div>'
    +'<div class="info-fields">'
    +'<div><label class="field-label">ä»•ä¸Šã’å</label><input type="text" placeholder="RSã‚¿ã‚¤ãƒ«èª¿" value="'+escHtml(item.finish)+'" oninput="updateBaField(\''+item.id+'\',\'finish\',this.value)"></div>'
    +'<div><label class="field-label">ã‚«ãƒ©ãƒ¼</label><input type="text" placeholder="ã‚°ãƒ¬ãƒ¼" value="'+escHtml(item.color)+'" oninput="updateBaField(\''+item.id+'\',\'color\',this.value)"></div>'
    +'<div><label class="field-label">ç›®åœ°</label><input type="text" placeholder="ãƒ–ãƒ©ãƒƒã‚¯" value="'+escHtml(item.grout)+'" oninput="updateBaField(\''+item.id+'\',\'grout\',this.value)"></div>'
    +'</div>'
    +'<div class="sample-row" style="margin-bottom:16px;">'
    +'<div><div class="img-drop-label" style="margin-bottom:6px;">ç´ æã‚µãƒ³ãƒ—ãƒ«ç”»åƒURLï¼ˆä»»æ„ï¼‰</div>'
    +'<input type="url" placeholder="https://... ç”»åƒURL" value="'+escHtml(item.sample||'')+'" oninput="updateBaField(\''+item.id+'\',\'sample\',this.value)">'
    +'</div>'
    +'<div style="font-size:.72rem;color:var(--text2);line-height:2;">ã‚¯ãƒªãƒƒã‚¯ã§æ‹¡å¤§ã§ãã‚‹å°ã•ãªã‚µãƒ ãƒã‚¤ãƒ«<br>ã¨ã—ã¦ä»•ä¸Šã’èª¬æ˜ã®æ¨ªã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>'
    +'</div>'
    +'<div><div class="img-drop-label" style="margin-bottom:8px;">è¿½åŠ ã‚¢ãƒ³ã‚°ãƒ«å†™çœŸï¼ˆé³¥è¦³å›³ãƒ»å¤œæ™¯ãƒ»ãƒ©ã‚¤ãƒˆã‚¢ãƒƒãƒ—ãªã©ï¼‰</div>'
    +'<div class="angles-list" id="angles-'+item.id+'">'
    +anglesUI
    +'</div>'
    +'<button class="btn btn-add" style="margin-top:10px;padding:10px;" onclick="addAngle(\''+item.id+'\')">ï¼‹ ã‚¢ãƒ³ã‚°ãƒ«å†™çœŸã‚’è¿½åŠ </button>'
    +'</div>'
    +'</div>';
}

function buildAnglesHTML(item){
  var angles=item.angles||[];
  return angles.map(function(ang,ai){
    return '<div style="display:flex;gap:10px;align-items:flex-start;margin-bottom:10px;">'
      +'<div style="margin-bottom:4px;"><label class="field-label">ç”»åƒURL</label>'
      +'<input type="url" placeholder="https://..." value="'+escHtml(ang.src||'')+'" oninput="updateAngleSrc(\''+item.id+'\','+ai+',this.value)">'
      +'</div>'
      +'<div style="flex:1;">'
      +'<label class="field-label">ãƒ©ãƒ™ãƒ«</label>'
      +'<input type="text" style="margin-bottom:8px;" placeholder="ä¾‹ï¼šé³¥è¦³å›³ã€å¤œæ™¯ã€ãƒ©ã‚¤ãƒˆã‚¢ãƒƒãƒ—" value="'+escHtml(ang.label||'')+'" oninput="updateAngleLabel(\''+item.id+'\','+ai+',this.value)">'
      +'<button class="btn btn-danger" style="padding:5px 12px;font-size:.7rem;" onclick="removeAngle(\''+item.id+'\','+ai+')">&#10005; å‰Šé™¤</button>'
      +'</div></div>';
  }).join('');
}

function addAngle(cardId){
  var item=baCards.find(function(c){return c.id===cardId;});
  if(!item)return;
  if(!item.angles)item.angles=[];
  item.angles.push({src:'',label:''});
  var container=document.getElementById('angles-'+cardId);
  if(container)container.innerHTML=buildAnglesHTML(item);
  markDirty();
}

function removeAngle(cardId,ai){
  var item=baCards.find(function(c){return c.id===cardId;});
  if(!item||!item.angles)return;
  item.angles.splice(ai,1);
  var container=document.getElementById('angles-'+cardId);
  if(container)container.innerHTML=buildAnglesHTML(item);
  markDirty();
}

function updateAngleSrc(cardId,ai,val){
  var item=baCards.find(function(c){return c.id===cardId;});
  if(!item||!item.angles||!item.angles[ai])return;
  item.angles[ai].src=val;
  markDirty();
}

function updateAngleLabel(cardId,ai,val){
  var item=baCards.find(function(c){return c.id===cardId;});
  if(!item||!item.angles||!item.angles[ai])return;
  item.angles[ai].label=val;
  markDirty();
}

function handleAngleImage(input,cardId,ai){
  var file=input.files[0];if(!file)return;
  var reader=new FileReader();
  reader.onload=function(e){
    var item=baCards.find(function(c){return c.id===cardId;});
    if(!item)return;
    if(!item.angles)item.angles=[];
    if(!item.angles[ai])item.angles[ai]={src:'',label:''};
    item.angles[ai].src=e.target.result;
    var drop=document.getElementById('drop-ang-'+cardId+'-'+ai);
    if(drop){
      drop.classList.add('has-img');
      var prev=drop.querySelector('img.preview');
      if(prev)prev.src=e.target.result;
      else{var img=document.createElement('img');img.className='preview';img.src=e.target.result;drop.insertBefore(img,drop.firstChild);}
    }
    markDirty();
  };
  reader.readAsDataURL(file);
}

function escHtml(s){return (s||'').replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}

function updateBaPreviewFromUrl(id){
  var item=baCards.find(function(c){return c.id===id;});
  if(!item)return;
  var slider=document.getElementById('preview-slider-'+id);
  if(!slider)return;
  var bSrc=item.before||'', aSrc=item.after||'';
  slider.innerHTML=(bSrc?'<img class="ba-preview-img" src="'+bSrc+'" alt="">':'')+
    (aSrc?'<img class="ba-preview-img ba-preview-after" id="prev-after-'+id+'" src="'+aSrc+'" alt="">':'')+
    ((bSrc||aSrc)?'<div class="ba-preview-handle"><div class="ba-preview-line"></div><div class="ba-preview-pill">SLIDE</div></div>':
    '<div class="ba-preview-empty">ç”»åƒã‚’ã‚¢ãƒƒãƒ—ã™ã‚‹ã¨ã“ã“ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>');
  if(typeof initBaPreview==='function') initBaPreview(id);
}

function updateBaField(id,field,val){
  var item=baCards.find(c=>c.id===id);
  if(item){item[field]=val;markDirty();}
}

function handleBaImage(input,id,field){
  var file=input.files[0];if(!file)return;
  var reader=new FileReader();
  reader.onload=function(e){
    var b64=e.target.result;
    var item=baCards.find(c=>c.id===id);
    if(!item)return;
    item[field]=b64;
    markDirty();
    // Update preview in card
    var drop=document.getElementById('drop-'+field[0]+'-'+id);
    if(drop){
      drop.classList.add('has-img');
      var prev=drop.querySelector('img.preview');
      if(prev)prev.src=b64;
      else{var img=document.createElement('img');img.className='preview';img.src=b64;drop.insertBefore(img,drop.firstChild);}
    }
    var fn=document.getElementById('fn-'+field[0]+'-'+id);
    if(fn)fn.textContent='ç”»åƒè¨­å®šæ¸ˆã¿ï¼ˆ'+file.name+')';
    // Update slider preview
    if(field==='before'||field==='after'){
      var slider=document.getElementById('preview-slider-'+id);
      if(slider){
        // Rebuild preview
        var beforeSrc=item.before||'';
        var afterSrc=item.after||'';
        slider.innerHTML=(beforeSrc?'<img class="ba-preview-img" src="'+beforeSrc+'" alt="">':'')
          +(afterSrc?'<img class="ba-preview-img ba-preview-after" id="prev-after-'+id+'" src="'+afterSrc+'" alt="">':'')
          +((beforeSrc||afterSrc)?'<div class="ba-preview-handle"><div class="ba-preview-line"></div><div class="ba-preview-pill">SLIDE</div></div>':'<div class="ba-preview-empty">ç”»åƒã‚’ã‚¢ãƒƒãƒ—ã™ã‚‹ã¨ã“ã“ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>');
        initBaPreview(id);
      }
    }
    if(field==='sample'){
      var sdrop=document.getElementById('drop-s-'+id);
      if(sdrop){
        var simg=sdrop.querySelector('img.preview');
        if(simg)simg.src=b64;
        else{var si=document.createElement('img');si.className='preview';si.src=b64;sdrop.insertBefore(si,sdrop.firstChild);}
      }
    }
  };
  reader.readAsDataURL(file);
}

function initBaPreview(id){
  var slider=document.getElementById('preview-slider-'+id);
  if(!slider)return;
  var afterImg=slider.querySelector('.ba-preview-after');
  if(!afterImg)return;
  var handle=slider.querySelector('.ba-preview-handle');
  var dragging=false;
  function update(clientX){
    var rect=slider.getBoundingClientRect();
    var pos=Math.max(0,Math.min(100,((clientX-rect.left)/rect.width)*100));
    afterImg.style.clipPath='inset(0 0 0 '+pos+'%)';
    if(handle){handle.style.left=pos+'%';handle.style.transform='translateX(-50%)';}
  }
  slider.addEventListener('mousedown',function(e){dragging=true;update(e.clientX);});
  window.addEventListener('mousemove',function(e){if(dragging)update(e.clientX);});
  window.addEventListener('mouseup',function(){dragging=false;});
  slider.addEventListener('touchstart',function(e){update(e.touches[0].clientX);},{passive:true});
  slider.addEventListener('touchmove',function(e){update(e.touches[0].clientX);},{passive:true});
}

// ===== LOGO UPLOAD =====
function triggerUpload(id){document.getElementById(id).click();}


document.addEventListener('dragleave', function(e){
  var drop = e.target.closest('.img-drop, .logo-drop');
  if(drop) drop.style.borderColor='';
});






function handleLogo(input,key,previewId,dropId){
  var file=input.files[0];if(!file)return;
  var reader=new FileReader();
  reader.onload=function(e){
    imageData[key]={base64:e.target.result,filename:file.name};
    var prev=document.getElementById(previewId);
    if(prev){prev.src=e.target.result;prev.style.display='block';}
    var drop=document.getElementById(dropId);
    if(drop)drop.classList.add('has-img');
    markDirty();
  };
  reader.readAsDataURL(file);
}

// ===== DEFAULTS =====
function loadDefaults(){
  var s={};
  try{s=JSON.parse(localStorage.getItem('kimaru-settings')||'{}');}catch(e){}
  setVal('ga4-id',s['ga4-id']||'');
  setVal('line-url',s['line-url']||'https://lin.ee/xxxxxxx');
  setVal('line-btn-text',s['line-btn-text']||'LINE ã§ãŠå•ã„åˆã‚ã›');
  setVal('ig-url',s['ig-url']||'https://www.instagram.com/cementart_numan/');
  setVal('video-url',s['video-url']||'');
  setVal('video-title',s['video-title']||'');
  setVal('video-body',s['video-body']||'');
  setVal('video-poster',s['video-poster']||'');
  setCheck('video-visible',s['video-visible']||false);
  setVal('hero-catch',s['hero-catch']||'æ–½å·¥ã®ç¾å ´ãŒã€ãã®ã¾ã¾<br>æœ€é«˜ã®ææ¡ˆæ›¸ã«ãªã‚‹ã€‚');
  setVal('catch-1',s['catch-1']||'ã‚ãªãŸã®æŠ€è¡“ã¯ã€ã‚‚ã£ã¨<span>ä¼ã‚ã‚‹</span>ã€‚');
  setVal('catch-2',s['catch-2']||'è·äººã®ä»•äº‹ãŒã€<br>ç”»é¢ã®ä¸­ã§<span>å‹•ãå‡ºã™</span>ã€‚');
  setVal('catch-3',s['catch-3']||'ææ¡ˆãŒå¤‰ã‚ã‚Œã°ã€<span>å¥‘ç´„</span>ãŒå¤‰ã‚ã‚‹ã€‚');
  setVal('catch-4',s['catch-4']||'ã‚¹ãƒãƒ›ä¸€ã¤ã§ã€<br><span>ãƒ—ãƒ­</span>ã®ææ¡ˆæ›¸ã€‚');
  setVal('catch-5',s['catch-5']||'è¦‹ã›æ–¹ã‚’å¤‰ãˆã‚‹ã ã‘ã§ã€<br><span>çµæœ</span>ãŒå¤‰ã‚ã‚‹ã€‚');
  setVal('hero-sub',s['hero-sub']||'æ–½å·¥ã®ç¾å ´ãŒã€ãã®ã¾ã¾æœ€é«˜ã®ææ¡ˆæ›¸ã«ãªã‚‹ã€‚\nKIMARUãŒã€ã‚ãªãŸã®å–¶æ¥­ã‚’å¤‰ãˆã¾ã™ã€‚');
  setVal('msg-main',s['msg-main']||'ã‚µãƒ³ãƒ—ãƒ«ã‚’æŒã£ã¦è¡Œã£ã¦ã‚‚å¥‘ç´„ãŒå–ã‚Œãªã„ã€\nãã‚“ãªæ™‚ä»£ã¯<span>ã‚‚ã†çµ‚ã‚ã‚Š</span>ã«ã—ã¾ã›ã‚“ã‹ã€‚');
  setVal('msg-body',s['msg-body']||'æŠ€è¡“ã¯æœ¬ç‰©ãªã®ã«ã€ä¼ãˆæ–¹ãŒè¿½ã„ã¤ã„ã¦ã„ãªã„ã ã‘ã€‚\nKIMARUã‚’ä½¿ãˆã°ã€ãŠå®¢æ§˜ãŒè‡ªåˆ†ã§ã€Œæ±ºã‚ã‚‹ã€ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚');
  setVal('cta-title',s['cta-title']||'æ°—ã«ãªã£ãŸæ–¹ã¯ã€\nã¾ãšLINEã§è©±ã—ã¾ã—ã‚‡ã†ã€‚');
  // ãƒ†ãƒ¼ãƒå¾©å…ƒ
  var savedTheme = s['theme'] || 'dark';
  document.querySelectorAll('.theme-btn').forEach(function(btn){
    btn.classList.toggle('active', btn.dataset.theme === savedTheme);
  });
  setVal('gallery-title',s['gallery-title']||'ãã®ä»–ã®æ–½å·¥äº‹ä¾‹ã¯ã“ã¡ã‚‰');
  setVal('gallery-body',s['gallery-body']||'ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ãƒ»ç´ æåˆ¥ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’æº–å‚™ã—ã¦ã„ã¾ã™ã€‚');
  setVal('gallery-btn-text',s['gallery-btn-text']||'æ–½å·¥äº‹ä¾‹ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’è¦‹ã‚‹');
  setVal('gallery-url',s['gallery-url']||'');
  setVal('numan-name-ja',s['numan-name-ja']||'ã‚»ãƒ¡ãƒ³ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ\nã¬ãƒ¼ã¾ã‚“');
  setVal('numan-name-en',s['numan-name-en']||'Cement Artist Nuâ˜†Man');
  setVal('numan-location',s['numan-location']||'ä¸‰é‡çœŒ æ¾é˜ªå¸‚');
  setVal('numan-career',s['numan-career']||'ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³æ­´ 2019å¹´ã€œ');
  setVal('numan-body',s['numan-body']||'16æ­³ã‹ã‚‰å»ºè¨­æ¥­ç•Œã«é£›ã³è¾¼ã¿ã€é•·å¹´ã«ã‚ãŸã£ã¦ä»®è¨­äº‹æ¥­ãƒ»ä¸‹è«‹ã‘ã®ä¸–ç•Œã§åƒã„ã¦ããŸã€‚\n\nã„ã¤ã—ã‹ã€ã€Œã‚«ã‚¿ãƒã«æ®‹ã‚‹ä»•äº‹ãŒã—ãŸã„ã€ã¨æ€ã†ã‚ˆã†ã«ãªã£ãŸã€‚\nãã‚“ãªã¨ãå‡ºä¼šã£ãŸã®ãŒã€ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³ã€‚\n\nãŠå®¢ã•ã‚“ã®å–œã¶å£°ã€ç¬‘é¡”ã«ç›´æ¥ãµã‚Œã‚‰ã‚Œã‚‹ä»•äº‹ã€‚\nãã—ã¦ã€ã“ã®ä»•äº‹ã«çœŸå‰£ã«å‘ãåˆã†ç†±ã„æ€ã„ã‚’æŒã£ãŸä»²é–“ãŸã¡ã¨å®šæœŸçš„ã«ä¼šãˆã‚‹ç’°å¢ƒã€‚\nå‡ºä¼šã†ãŸã³ã«æ°—ã¥ããŒã‚ã‚Šã€å­¦ã³ãŒã‚ã‚‹ã€‚\n\nã“ã®ç´ æ™´ã‚‰ã—ã„ä»•äº‹ã‚’ã€ã‚‚ã£ã¨å¤šãã®äººã«çŸ¥ã£ã¦ã‚‚ã‚‰ã„ãŸã„ã€‚\né«˜ã„æŠ€è¡“ã‚’æŒã¤ä»²é–“ãŸã¡ã«ã€ã‚‚ã£ã¨è‡ªä¿¡ã‚’æŒã£ã¦è¼ã‘ã‚‹æ©Ÿä¼šã‚’å±Šã‘ãŸã„ã€‚\nãã—ã¦ã€ç§è‡ªèº«ã‚’è‚²ã¦ã¦ãã‚ŒãŸROLLER STONEã¨ã„ã†æ¥­ç•Œã«ã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ©è¿”ã—ãŒã—ãŸã„ã€‚\n\nãã‚ŒãŒã€KIMARUã®åŸç‚¹ã§ã™ã€‚');
  setCheck('sec-ba',s['sec-ba']!==false);
  setCheck('sec-video',s['sec-video']||false);
  setCheck('sec-profile',s['sec-profile']!==false);
  setCheck('sec-why',s['sec-why']!==false);
  // BA cards
  baCards=[];
  baIdCounter=0;
  var savedCards=s['ba-cards']||[];
  if(savedCards.length){savedCards.forEach(function(c){c.id='ba_'+(baIdCounter++);baCards.push(c);});renderBaCards();}
  else{renderBaCards();}// empty state
}

function setVal(id,val){var el=document.getElementById(id);if(el)el.value=val;}
function setCheck(id,val){var el=document.getElementById(id);if(el)el.checked=val;}
function getVal(id){var el=document.getElementById(id);return el?el.value:'';}
function getCheck(id){var el=document.getElementById(id);return el?el.checked:false;}

// ===== SAVE SETTINGS =====
function saveSettings(){
  var s={
    'theme': document.querySelector('.theme-btn.active')?.dataset.theme || 'dark',
    'ga4-id':getVal('ga4-id'),
    'line-url':getVal('line-url'),
    'line-btn-text':getVal('line-btn-text'),
    'ig-url':getVal('ig-url'),
    'video-url':getVal('video-url'),
    'video-title':getVal('video-title'),
    'video-body':getVal('video-body'),
    'video-poster':getVal('video-poster'),
    'video-visible':getCheck('video-visible'),
    'hero-catch':getVal('hero-catch'),
    'catch-1':getVal('catch-1'),
    'catch-2':getVal('catch-2'),
    'catch-3':getVal('catch-3'),
    'catch-4':getVal('catch-4'),
    'catch-5':getVal('catch-5'),
    'hero-sub':getVal('hero-sub'),
    'msg-main':getVal('msg-main'),
    'msg-body':getVal('msg-body'),
    'cta-title':getVal('cta-title'),
    'gallery-title':getVal('gallery-title'),
    'gallery-body':getVal('gallery-body'),
    'gallery-btn-text':getVal('gallery-btn-text'),
    'gallery-url':getVal('gallery-url'),
    'numan-name-ja':getVal('numan-name-ja'),
    'numan-name-en':getVal('numan-name-en'),
    'numan-location':getVal('numan-location'),
    'numan-career':getVal('numan-career'),
    'numan-body':getVal('numan-body'),
    'sec-ba':getCheck('sec-ba'),
    'sec-video':getCheck('sec-video'),
    'sec-profile':getCheck('sec-profile'),
    'sec-why':getCheck('sec-why'),
    'ba-cards':baCards,
  };
  try{localStorage.setItem('kimaru-settings',JSON.stringify(s));}catch(e){}
  return s;
}

// ===== GENERATE HTML =====
// LPãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†…è”µï¼ˆfetchãªã—ãƒ»GitHub Pagesã§å‹•ä½œï¼‰
var _LP_B64='PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImphIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPgo8dGl0bGU+S0lNQVJVIHwg5o+Q5qGI44GM5aSJ44KP44KL44Go44CB5aWR57SE44GM5aSJ44KP44KLPC90aXRsZT4KPCEtLSBHb29nbGUgdGFnIChndGFnLmpzKSAtLT4KPHNjcmlwdCBhc3luYyBzcmM9Imh0dHBzOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0YWcvanM/aWQ9Ry0wVkYyNzdGNlJYIj48L3NjcmlwdD4KPHNjcmlwdD4KICB3aW5kb3cuZGF0YUxheWVyID0gd2luZG93LmRhdGFMYXllciB8fCBbXTsKICBmdW5jdGlvbiBndGFnKCl7ZGF0YUxheWVyLnB1c2goYXJndW1lbnRzKTt9CiAgZ3RhZygnanMnLCBuZXcgRGF0ZSgpKTsKICBndGFnKCdjb25maWcnLCAnRy0wVkYyNzdGNlJYJyk7Cjwvc2NyaXB0Pgo8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20iPgo8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PU5vdG8rU2FucytKUDp3Z2h0QDMwMDs0MDA7NTAwOzcwMCZmYW1pbHk9Tm90bytTZXJpZitKUDp3Z2h0QDMwMDs0MDA7NjAwJmZhbWlseT1Db3Jtb3JhbnQrR2FyYW1vbmQ6d2dodEAzMDA7NDAwOzYwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+CjxzdHlsZT4KOnJvb3QgeyAtLWdvbGQ6I0M5QTg0QzstLWdvbGQtZGltOnJnYmEoMjAxLDE2OCw3NiwwLjE1KTstLWdvbGQtbGluZTpyZ2JhKDIwMSwxNjgsNzYsMC4zKTstLXJhZGl1czo4cHg7IH0KW2RhdGEtdGhlbWU9ImRhcmsiXSAgeyAtLWJnOiMxMTE7LS1iZzI6IzE4MTgxODstLWJnMzojMjAyMDIwOy0tdGV4dDojZWVlYmU0Oy0tdGV4dDI6I2FhYTQ5YTstLWJvcmRlcjpyZ2JhKDIwMSwxNjgsNzYsMC4xOCk7LS13bS1vcGFjaXR5OjAuMDY7LS13bS1maWx0ZXI6bm9uZTstLWJhZGdlLWJnOnJnYmEoMjAxLDE2OCw3NiwwLjEyKTstLWNhcmQtYmc6IzE4MTgxODstLW1zZy1iZzojMTgxODE4OyB9CltkYXRhLXRoZW1lPSJsaWdodCJdIHsgLS1iZzojZjVmM2VmOy0tYmcyOiNlY2VhZTQ7LS1iZzM6I2UyZGZkODstLXRleHQ6IzFhMTgxNDstLXRleHQyOiM2YjY1NjA7LS1ib3JkZXI6cmdiYSgxMDAsODAsNDAsMC4xOCk7LS13bS1vcGFjaXR5OjAuMDc7LS13bS1maWx0ZXI6bm9uZTstLWJhZGdlLWJnOnJnYmEoMjAxLDE2OCw3NiwwLjE1KTstLWNhcmQtYmc6I2VjZWFlNDstLW1zZy1iZzojZWNlYWU0OyB9CltkYXRhLXRoZW1lPSJpbmsiXSAgIHsgLS1iZzojZjhmN2Y0Oy0tYmcyOiNmZmY7LS1iZzM6I2VlZWNlODstLXRleHQ6IzExMTstLXRleHQyOiM1NTU7LS1ib3JkZXI6cmdiYSgwLDAsMCwwLjEyKTstLWdvbGQ6IzFhMWExYTstLWdvbGQtZGltOnJnYmEoMCwwLDAsMC4wOCk7LS1nb2xkLWxpbmU6cmdiYSgwLDAsMCwwLjIpOy0td20tb3BhY2l0eTowLjA5Oy0td20tZmlsdGVyOm5vbmU7LS1iYWRnZS1iZzpyZ2JhKDAsMCwwLDAuMDYpOy0tY2FyZC1iZzojZmZmOy0tbXNnLWJnOiNmZmY7IH0KCiosKjo6YmVmb3JlLCo6OmFmdGVye2JveC1zaXppbmc6Ym9yZGVyLWJveDttYXJnaW46MDtwYWRkaW5nOjA7fQpodG1se3Njcm9sbC1iZWhhdmlvcjpzbW9vdGg7fQpib2R5e2JhY2tncm91bmQ6dmFyKC0tYmcpO2NvbG9yOnZhcigtLXRleHQpO2ZvbnQtZmFtaWx5OidOb3RvIFNhbnMgSlAnLHNhbnMtc2VyaWY7b3ZlcmZsb3cteDpoaWRkZW47bGluZS1oZWlnaHQ6MS43O3RyYW5zaXRpb246YmFja2dyb3VuZCAuNHMsY29sb3IgLjRzO30KCi8qIFdBVEVSTUFSSyAtIDPnrofmiYDjga7jgb8gKi8KLndte3Bvc2l0aW9uOmFic29sdXRlO2luc2V0OjA7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BvaW50ZXItZXZlbnRzOm5vbmU7ei1pbmRleDowO292ZXJmbG93OmhpZGRlbjt9Ci53bSBpbWd7d2lkdGg6bWluKDY1JSw0ODBweCk7b3BhY2l0eTp2YXIoLS13bS1vcGFjaXR5KTtmaWx0ZXI6dmFyKC0td20tZmlsdGVyKTtvYmplY3QtZml0OmNvbnRhaW47dXNlci1zZWxlY3Q6bm9uZTt0cmFuc2l0aW9uOm9wYWNpdHkgLjRzO30KCi8qIE1PREUgQkFSICovCgovKiBBTklNUyAqLwpAa2V5ZnJhbWVzIGZhZGVVcHtmcm9te29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgyMHB4KTt9dG97b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApO319CkBrZXlmcmFtZXMgZmFkZUlue2Zyb217b3BhY2l0eTowO310b3tvcGFjaXR5OjE7fX0KQGtleWZyYW1lcyBwdWxzZXswJSwxMDAle29wYWNpdHk6MC40O301MCV7b3BhY2l0eToxO319CgovKiBDQVRDSCAqLwouY2F0Y2gtaXRlbXtkaXNwbGF5Om5vbmU7Zm9udC1mYW1pbHk6J05vdG8gU2VyaWYgSlAnLHNlcmlmO2ZvbnQtc2l6ZTpjbGFtcCgxLjNyZW0sNS41dncsMi42cmVtKTtmb250LXdlaWdodDo0MDA7bGluZS1oZWlnaHQ6MS41O2xldHRlci1zcGFjaW5nOi41cHg7Y29sb3I6dmFyKC0tdGV4dCk7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzowIDIwcHg7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQouY2F0Y2gtaXRlbS5hY3RpdmV7ZGlzcGxheTpibG9jazthbmltYXRpb246ZmFkZVVwIC42cyBjdWJpYy1iZXppZXIoLjIyLDEsLjM2LDEpIGJvdGg7fQouY2F0Y2gtaXRlbSBzcGFue2NvbG9yOnZhcigtLWdvbGQpO3RyYW5zaXRpb246Y29sb3IgLjRzO30KCi8qIEhFUk8gKi8KLmhlcm97bWluLWhlaWdodDoxMDB2aDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3RleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6ODBweCAyNHB4IDEyMHB4O3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OmhpZGRlbjt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjRzO30KW2RhdGEtdGhlbWU9ImRhcmsiXSAuaGVyb3tiYWNrZ3JvdW5kOnJhZGlhbC1ncmFkaWVudChlbGxpcHNlIDgwJSA2MCUgYXQgNTAlIDQwJSxyZ2JhKDIwMSwxNjgsNzYsLjA2KSAwJSx0cmFuc3BhcmVudCA2NSUpLHZhcigtLWJnKTt9CltkYXRhLXRoZW1lPSJsaWdodCJdIC5oZXJve2JhY2tncm91bmQ6cmFkaWFsLWdyYWRpZW50KGVsbGlwc2UgODAlIDYwJSBhdCA1MCUgNDAlLHJnYmEoMjAxLDE2OCw3NiwuMDgpIDAlLHRyYW5zcGFyZW50IDY1JSksdmFyKC0tYmcpO30KW2RhdGEtdGhlbWU9ImluayJdIC5oZXJve2JhY2tncm91bmQ6dmFyKC0tYmcpO30KLmhlcm8+Kjpub3QoLndtKXtwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjE7fQouaGVyby1iYWRnZXtkaXNwbGF5OmlubGluZS1ibG9jaztiYWNrZ3JvdW5kOnZhcigtLWJhZGdlLWJnKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWdvbGQtbGluZSk7Y29sb3I6dmFyKC0tZ29sZCk7Zm9udC1zaXplOi43cmVtO2ZvbnQtd2VpZ2h0OjUwMDtsZXR0ZXItc3BhY2luZzo0cHg7cGFkZGluZzo3cHggMjBweDtib3JkZXItcmFkaXVzOjEwMHB4O21hcmdpbi1ib3R0b206NDBweDthbmltYXRpb246ZmFkZUluIC42cyAuMnMgYm90aDt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjRzLGNvbG9yIC40cyxib3JkZXItY29sb3IgLjRzO30KLmhlcm8tY2F0Y2gtd3JhcHt3aWR0aDoxMDAlO21heC13aWR0aDo3NjBweDttaW4taGVpZ2h0OjEwMHB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjttYXJnaW4tYm90dG9tOjI0cHg7fQouaGVyby1kb3Rze2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2p1c3RpZnktY29udGVudDpjZW50ZXI7bWFyZ2luLWJvdHRvbTozMnB4O2FuaW1hdGlvbjpmYWRlSW4gLjZzIC44cyBib3RoO30KLmhlcm8tZG90e3dpZHRoOjZweDtoZWlnaHQ6NnB4O2JvcmRlci1yYWRpdXM6NTAlO2JhY2tncm91bmQ6dmFyKC0tZ29sZC1kaW0pO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YmFja2dyb3VuZCAuM3M7fQouaGVyby1kb3QuYWN0aXZle2JhY2tncm91bmQ6dmFyKC0tZ29sZCk7fQouaGVyby1zdWJ7Zm9udC1zaXplOmNsYW1wKC44NXJlbSwzLjV2dywxLjA1cmVtKTtjb2xvcjp2YXIoLS10ZXh0Mik7Zm9udC13ZWlnaHQ6MzAwO2xpbmUtaGVpZ2h0OjEuOTthbmltYXRpb246ZmFkZVVwIC42cyAuNXMgYm90aDt0cmFuc2l0aW9uOmNvbG9yIC40czt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjAgNDhweCAwIDE2cHg7fQouaGVyby1zY3JvbGx7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjMycHg7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDthbmltYXRpb246ZmFkZUluIC42cyAxLjJzIGJvdGg7fQouaGVyby1zY3JvbGwgc3Bhbntmb250LXNpemU6LjU1cmVtO2xldHRlci1zcGFjaW5nOjNweDtjb2xvcjp2YXIoLS10ZXh0Mik7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO30KLnNjcm9sbC1iYXJ7d2lkdGg6MXB4O2hlaWdodDoyOHB4O2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSx2YXIoLS1nb2xkKSx0cmFuc3BhcmVudCk7YW5pbWF0aW9uOnB1bHNlIDJzIGluZmluaXRlO30KCi8qIFNFQ1RJT05TICovCi5zZWN0aW9ue3BhZGRpbmc6ODBweCAyNHB4O3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OmhpZGRlbjt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjRzO30KLnNlY3Rpb24taW5uZXJ7bWF4LXdpZHRoOjkwMHB4O21hcmdpbjowIGF1dG87cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxO30KLnNlY3Rpb24tdGFne2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMHB4O2ZvbnQtc2l6ZTouNjhyZW07Zm9udC13ZWlnaHQ6NTAwO2xldHRlci1zcGFjaW5nOjRweDtjb2xvcjp2YXIoLS1nb2xkKTt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bWFyZ2luLWJvdHRvbToxNnB4O3RyYW5zaXRpb246Y29sb3IgLjRzO30KLnNlY3Rpb24tdGFnOjpiZWZvcmV7Y29udGVudDonJztkaXNwbGF5OmJsb2NrO3dpZHRoOjIwcHg7aGVpZ2h0OjFweDtiYWNrZ3JvdW5kOnZhcigtLWdvbGQpO3RyYW5zaXRpb246YmFja2dyb3VuZCAuNHM7fQouc2VjdGlvbi10aXRsZXtmb250LWZhbWlseTonTm90byBTZXJpZiBKUCcsc2VyaWY7Zm9udC1zaXplOmNsYW1wKDEuM3JlbSwzdncsMnJlbSk7Zm9udC13ZWlnaHQ6NDAwO2xpbmUtaGVpZ2h0OjEuNzttYXJnaW4tYm90dG9tOjE2cHg7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQouc2VjdGlvbi1ib2R5e2ZvbnQtc2l6ZToxcmVtO2NvbG9yOnZhcigtLXRleHQyKTtmb250LXdlaWdodDozMDA7bGluZS1oZWlnaHQ6Mi40O3RyYW5zaXRpb246Y29sb3IgLjRzO30KCi8qIElOVFJPICovCi5pbnRyb3tiYWNrZ3JvdW5kOnZhcigtLWJnMik7Ym9yZGVyLXRvcDoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO3RyYW5zaXRpb246YmFja2dyb3VuZCAuNHMsYm9yZGVyLWNvbG9yIC40czt9Ci5pbnRyby1jYXJkc3tkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCgzLDFmcik7Z2FwOjFweDtiYWNrZ3JvdW5kOnZhcigtLWJvcmRlcik7bWFyZ2luLXRvcDo0MHB4O2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7b3ZlcmZsb3c6aGlkZGVuO3RyYW5zaXRpb246YmFja2dyb3VuZCAuNHMsYm9yZGVyLWNvbG9yIC40czt9Ci5pbnRyby1jYXJke2JhY2tncm91bmQ6dmFyKC0tY2FyZC1iZyk7cGFkZGluZzoyOHB4IDIwcHg7dGV4dC1hbGlnbjpjZW50ZXI7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC40czt9Ci5pbnRyby1jYXJkLW51bXtmb250LWZhbWlseTonQ29ybW9yYW50IEdhcmFtb25kJyxzZXJpZjtmb250LXNpemU6Mi40cmVtO2ZvbnQtd2VpZ2h0OjMwMDtjb2xvcjp2YXIoLS1nb2xkKTtvcGFjaXR5Oi40NTtsaW5lLWhlaWdodDoxO21hcmdpbi1ib3R0b206MTBweDt0cmFuc2l0aW9uOmNvbG9yIC40czt9Ci5pbnRyby1jYXJkLXRpdGxle2ZvbnQtc2l6ZTouOTJyZW07Zm9udC13ZWlnaHQ6NTAwO21hcmdpbi1ib3R0b206NnB4O30KLmludHJvLWNhcmQtYm9keXtmb250LXNpemU6LjhyZW07Y29sb3I6dmFyKC0tdGV4dDIpO2ZvbnQtd2VpZ2h0OjMwMDtsaW5lLWhlaWdodDoxLjg7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQoKLyogQkEgKi8KLmJhLXdyYXB7bWFyZ2luLWJvdHRvbTo2MHB4O30KLmJhLWxhYmVsLXJvd3tkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTRweDt9Ci5iYS1udW17Zm9udC1mYW1pbHk6J0Nvcm1vcmFudCBHYXJhbW9uZCcsc2VyaWY7Zm9udC1zaXplOjEuOHJlbTtmb250LXdlaWdodDozMDA7Y29sb3I6dmFyKC0tZ29sZCk7b3BhY2l0eTouNDtsaW5lLWhlaWdodDoxO3RyYW5zaXRpb246Y29sb3IgLjRzO30KLmJhLXRpdGxle2ZvbnQtc2l6ZTouOTVyZW07Y29sb3I6dmFyKC0tdGV4dDIpO3RyYW5zaXRpb246Y29sb3IgLjRzO30KLmJhLWNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDoxMDAlO2FzcGVjdC1yYXRpbzoxNi85O292ZXJmbG93OmhpZGRlbjtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2N1cnNvcjpldy1yZXNpemU7dXNlci1zZWxlY3Q6bm9uZTt0cmFuc2l0aW9uOmJvcmRlci1jb2xvciAuNHM7fQouYmEtaW1ne3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y292ZXI7cG9pbnRlci1ldmVudHM6bm9uZTt9Ci5iYS1hZnRlcntjbGlwLXBhdGg6aW5zZXQoMCAwIDAgNTAlKTt6LWluZGV4OjI7fQouYmEtaGFuZGxle3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2JvdHRvbTowO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpO3dpZHRoOjQwcHg7ei1pbmRleDoxMDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcjtwb2ludGVyLWV2ZW50czpub25lO30KLmJhLWhhbmRsZS1saW5le3dpZHRoOjJweDtmbGV4OjE7YmFja2dyb3VuZDp2YXIoLS1nb2xkKTtvcGFjaXR5Oi45O3RyYW5zaXRpb246YmFja2dyb3VuZCAuNHM7fQouYmEtaGFuZGxlLXBpbGx7YmFja2dyb3VuZDp2YXIoLS1nb2xkKTtjb2xvcjojZmZmO2ZvbnQtc2l6ZTouNXJlbTtmb250LXdlaWdodDo3MDA7bGV0dGVyLXNwYWNpbmc6MnB4O3BhZGRpbmc6NXB4IDhweDt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjRzO30KLmJhLXRhZ3N7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjEycHg7bGVmdDowO3JpZ2h0OjA7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3BhZGRpbmc6MCAxNHB4O3otaW5kZXg6NTtwb2ludGVyLWV2ZW50czpub25lO30KLmJhLXRhZ3tiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjU1KTtjb2xvcjojOTk5O2ZvbnQtc2l6ZTouNnJlbTtsZXR0ZXItc3BhY2luZzoycHg7cGFkZGluZzo0cHggMTBweDtib3JkZXItcmFkaXVzOjJweDtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsLjEpO30KLmJhLXRhZy5hZnRlcntjb2xvcjp2YXIoLS1nb2xkKTtib3JkZXItY29sb3I6cmdiYSgyMDEsMTY4LDc2LC40KTt0cmFuc2l0aW9uOmNvbG9yIC40czt9Ci5iYS1jYXB0aW9ue21hcmdpbi10b3A6MTBweDtmb250LXNpemU6Ljg1cmVtO2NvbG9yOnZhcigtLXRleHQyKTtmb250LXdlaWdodDozMDA7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQovKiBCQSBpbmZvIHBhbmVsICovCi5iYS1pbmZve2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O2dhcDoxNHB4O21hcmdpbi10b3A6MTRweDtwYWRkaW5nOjE0cHggMThweDtiYWNrZ3JvdW5kOnZhcigtLWJnMik7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci1yYWRpdXM6OHB4O3RyYW5zaXRpb246YmFja2dyb3VuZCAuNHMsYm9yZGVyLWNvbG9yIC40czt9Ci5iYS1pbmZvLmhpZGRlbntkaXNwbGF5Om5vbmU7fQouYmEtaW5mby10ZXh0e2ZsZXg6MTttaW4td2lkdGg6MDt9Ci5iYS1pbmZvLW5hbWV7Zm9udC1zaXplOi45cmVtO2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjp2YXIoLS10ZXh0KTttYXJnaW4tYm90dG9tOjZweDt0cmFuc2l0aW9uOmNvbG9yIC40czt9Ci5iYS1pbmZvLXRhZ3N7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO2dhcDo2cHg7fQouYmEtaW5mby1jaGlwe2ZvbnQtc2l6ZTouN3JlbTtjb2xvcjp2YXIoLS10ZXh0Mik7YmFja2dyb3VuZDp2YXIoLS1iZzMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtwYWRkaW5nOjNweCAxMHB4O2JvcmRlci1yYWRpdXM6MTAwcHg7dHJhbnNpdGlvbjphbGwgLjRzO30KLmJhLXNhbXBsZS10aHVtYnt3aWR0aDo1MnB4O2hlaWdodDo1MnB4O2JvcmRlci1yYWRpdXM6NnB4O29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2N1cnNvcjpwb2ludGVyO2ZsZXgtc2hyaW5rOjA7dHJhbnNpdGlvbjpvcGFjaXR5IC4ycyx0cmFuc2Zvcm0gLjJzO30KLmJhLXNhbXBsZS10aHVtYjpob3ZlcntvcGFjaXR5Oi44NTt0cmFuc2Zvcm06c2NhbGUoMS4wNSk7fQovKiDov73liqDjgqLjg7PjgrDjg6vlhpnnnJ8gKi8KLmJhLWFuZ2xlc3tkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjEwcHg7bWFyZ2luLXRvcDoxNHB4O30KLmJhLWFuZ2xlLWl0ZW17cG9zaXRpb246cmVsYXRpdmU7Y3Vyc29yOnBvaW50ZXI7fQouYmEtYW5nbGUtaW1ne3dpZHRoOjEwMCU7YXNwZWN0LXJhdGlvOjQvMztvYmplY3QtZml0OmNvdmVyO2JvcmRlci1yYWRpdXM6OHB4O2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtkaXNwbGF5OmJsb2NrO3RyYW5zaXRpb246b3BhY2l0eSAuMnMsdHJhbnNmb3JtIC4yczt9Ci5iYS1hbmdsZS1pbWc6aG92ZXJ7b3BhY2l0eTouODU7dHJhbnNmb3JtOnNjYWxlKDEuMDQpO30KLmJhLWFuZ2xlLWxhYmVse3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNik7Y29sb3I6I2RkZDtmb250LXNpemU6LjY1cmVtO2xldHRlci1zcGFjaW5nOjFweDt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjVweCA2cHg7Ym9yZGVyLXJhZGl1czowIDAgOHB4IDhweDt9Ci8qIExpZ2h0Ym94ICovCi5saWdodGJveHtwb3NpdGlvbjpmaXhlZDtpbnNldDowO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuODgpO3otaW5kZXg6OTAwMDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7b3BhY2l0eTowO3BvaW50ZXItZXZlbnRzOm5vbmU7dHJhbnNpdGlvbjpvcGFjaXR5IC4yNXM7fQoubGlnaHRib3gub3BlbntvcGFjaXR5OjE7cG9pbnRlci1ldmVudHM6YWxsO30KLmxpZ2h0Ym94IGltZ3ttYXgtd2lkdGg6OTB2dzttYXgtaGVpZ2h0Ojg4dmg7Ym9yZGVyLXJhZGl1czo4cHg7Ym94LXNoYWRvdzowIDIwcHggNjBweCByZ2JhKDAsMCwwLC42KTt9Ci5saWdodGJveC1jbG9zZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MjBweDtyaWdodDoyNHB4O2NvbG9yOiNmZmY7Zm9udC1zaXplOjJyZW07Y3Vyc29yOnBvaW50ZXI7b3BhY2l0eTouNztsaW5lLWhlaWdodDoxO30KCi8qIFZJREVPICovCi52aWRlby1zZWN0aW9ue2JhY2tncm91bmQ6dmFyKC0tYmcyKTtib3JkZXItdG9wOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC40cyxib3JkZXItY29sb3IgLjRzO30KLnZpZGVvLXdyYXB7cG9zaXRpb246cmVsYXRpdmU7d2lkdGg6MTAwJTthc3BlY3QtcmF0aW86MTYvOTtiYWNrZ3JvdW5kOnZhcigtLWJnMyk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtvdmVyZmxvdzpoaWRkZW47bWFyZ2luLXRvcDozMnB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjRzLGJvcmRlci1jb2xvciAuNHM7fQoudmlkZW8td3JhcCB2aWRlb3t3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y292ZXI7fQoudmlkZW8tcGxhY2Vob2xkZXJ7cG9zaXRpb246YWJzb2x1dGU7aW5zZXQ6MDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2dhcDoxMnB4O2NvbG9yOnZhcigtLXRleHQyKTt9Ci52aWRlby1pY29ue3dpZHRoOjUycHg7aGVpZ2h0OjUycHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci1yYWRpdXM6NTAlO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjt0cmFuc2l0aW9uOmJvcmRlci1jb2xvciAuNHM7fQoudmlkZW8tcGxhY2Vob2xkZXIgc3Bhbntmb250LXNpemU6LjcycmVtO2xldHRlci1zcGFjaW5nOjJweDt9CgovKiBNRVNTQUdFICovCi5tZXNzYWdlLWJveHtiYWNrZ3JvdW5kOnZhcigtLW1zZy1iZyk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtwYWRkaW5nOjQ4cHggNDBweDt0ZXh0LWFsaWduOmNlbnRlcjt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjRzLGJvcmRlci1jb2xvciAuNHM7fQoubWVzc2FnZS1tYWlue2ZvbnQtZmFtaWx5OidOb3RvIFNlcmlmIEpQJyxzZXJpZjtmb250LXNpemU6Y2xhbXAoLjk1cmVtLDR2dywxLjRyZW0pO2ZvbnQtd2VpZ2h0OjQwMDtsaW5lLWhlaWdodDoxLjg7bWFyZ2luLWJvdHRvbToyMHB4O30KLm1lc3NhZ2UtbWFpbiBzcGFue2NvbG9yOnZhcigtLWdvbGQpO3RyYW5zaXRpb246Y29sb3IgLjRzO30KLm1lc3NhZ2UtYm9keXtmb250LXNpemU6Ljg4cmVtO2NvbG9yOnZhcigtLXRleHQyKTtmb250LXdlaWdodDozMDA7bGluZS1oZWlnaHQ6Mi4wO3RyYW5zaXRpb246Y29sb3IgLjRzO30KCi8qIENUQSAqLwouY3RhLXNlY3Rpb257cGFkZGluZzo4MHB4IDI0cHggMTAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7cG9zaXRpb246cmVsYXRpdmU7b3ZlcmZsb3c6aGlkZGVuO30KLmN0YS1zZWN0aW9uPio6bm90KC53bSl7cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxO30KLmN0YS1pbm5lcnttYXgtd2lkdGg6NTYwcHg7bWFyZ2luOjAgYXV0bzt9Ci5jdGEtdGl0bGV7Zm9udC1mYW1pbHk6J05vdG8gU2VyaWYgSlAnLHNlcmlmO2ZvbnQtc2l6ZTpjbGFtcCgxLjJyZW0sM3Z3LDEuN3JlbSk7Zm9udC13ZWlnaHQ6NDAwO2xpbmUtaGVpZ2h0OjEuODttYXJnaW4tYm90dG9tOjEwcHg7fQouY3RhLXN1Yntmb250LXNpemU6Ljg4cmVtO2NvbG9yOnZhcigtLXRleHQyKTttYXJnaW4tYm90dG9tOjM2cHg7Zm9udC13ZWlnaHQ6MzAwO3RyYW5zaXRpb246Y29sb3IgLjRzO30KLmN0YS1idG57ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtnYXA6MTJweDtiYWNrZ3JvdW5kOiMwNkM3NTU7Y29sb3I6I2ZmZjt0ZXh0LWRlY29yYXRpb246bm9uZTtwYWRkaW5nOjIwcHggNDhweDtmb250LXNpemU6MXJlbTtmb250LXdlaWdodDo1MDA7bGV0dGVyLXNwYWNpbmc6MnB4O2JvcmRlci1yYWRpdXM6MTAwcHg7dHJhbnNpdGlvbjpvcGFjaXR5IC4ycyx0cmFuc2Zvcm0gLjJzO21pbi13aWR0aDoyNzBweDtib3gtc2hhZG93OjAgNnB4IDI4cHggcmdiYSg2LDE5OSw4NSwuMik7fQouY3RhLWJ0bjpob3ZlcntvcGFjaXR5Oi44ODt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMnB4KTt9Ci5jdGEtbm90ZXttYXJnaW4tdG9wOjE2cHg7Zm9udC1zaXplOi43NXJlbTtjb2xvcjp2YXIoLS10ZXh0Mik7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQovKiBHYWxsZXJ5IHRlYXNlciAqLwouZ2FsbGVyeS10ZWFzZXItc2VjdGlvbntib3JkZXItdG9wOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7YmFja2dyb3VuZDp2YXIoLS1iZzIpO3RyYW5zaXRpb246YmFja2dyb3VuZCAuNHMsYm9yZGVyLWNvbG9yIC40czt9Ci5nYWxsZXJ5LXRlYXNlci1idG57ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEwcHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci1yYWRpdXM6MTAwcHg7cGFkZGluZzoxM3B4IDI4cHg7Zm9udC1zaXplOi44NXJlbTtjb2xvcjp2YXIoLS10ZXh0Mik7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dHJhbnNpdGlvbjphbGwgLjNzO2N1cnNvcjpub3QtYWxsb3dlZDtvcGFjaXR5Oi43O30KLmdhbGxlcnktdGVhc2VyLWJ0bjpob3Zlcntib3JkZXItY29sb3I6dmFyKC0tZ29sZCk7Y29sb3I6dmFyKC0tdGV4dCk7fQouZ2FsbGVyeS10ZWFzZXItYmFkZ2V7YmFja2dyb3VuZDpyZ2JhKDIwMSwxNjgsNzYsLjE1KTtjb2xvcjp2YXIoLS1nb2xkKTtmb250LXNpemU6LjYycmVtO2xldHRlci1zcGFjaW5nOjJweDtwYWRkaW5nOjNweCA4cHg7Ym9yZGVyLXJhZGl1czo0cHg7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDIwMSwxNjgsNzYsLjMpO30KCi8qIEZPT1RFUiAqLwpmb290ZXJ7cGFkZGluZzo0OHB4IDI0cHg7dGV4dC1hbGlnbjpjZW50ZXI7Ym9yZGVyLXRvcDoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtwb3NpdGlvbjpyZWxhdGl2ZTtvdmVyZmxvdzpoaWRkZW47dHJhbnNpdGlvbjpib3JkZXItY29sb3IgLjRzO30KZm9vdGVyPio6bm90KC53bSl7cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxO30KLmZvb3Rlci1sb2dvLWRhcmssLmZvb3Rlci1sb2dvLWxpZ2h0e21hcmdpbjowIGF1dG8gMjBweDtkaXNwbGF5OmJsb2NrO3RyYW5zaXRpb246b3BhY2l0eSAuNHM7bWF4LXdpZHRoOm1pbig1OCUsNTYwcHgpO3dpZHRoOjEwMCU7fQouZm9vdGVyLWxvZ28tZGFya3tvcGFjaXR5Oi45NTt9Ci5mb290ZXItbG9nby1saWdodHtvcGFjaXR5Oi44NTt9CltkYXRhLXRoZW1lPSJkYXJrIl0gIC5mb290ZXItbG9nby1kYXJrICB7ZGlzcGxheTpibG9jazt9CltkYXRhLXRoZW1lPSJkYXJrIl0gIC5mb290ZXItbG9nby1saWdodCB7ZGlzcGxheTpub25lO30KW2RhdGEtdGhlbWU9ImxpZ2h0Il0gLmZvb3Rlci1sb2dvLWRhcmsgIHtkaXNwbGF5Om5vbmU7fQpbZGF0YS10aGVtZT0ibGlnaHQiXSAuZm9vdGVyLWxvZ28tbGlnaHQge2Rpc3BsYXk6YmxvY2s7fQpbZGF0YS10aGVtZT0iaW5rIl0gICAuZm9vdGVyLWxvZ28tZGFyayAge2Rpc3BsYXk6bm9uZTt9CltkYXRhLXRoZW1lPSJpbmsiXSAgIC5mb290ZXItbG9nby1saWdodCB7ZGlzcGxheTpibG9jaztvcGFjaXR5Oi43NTt9CltkYXRhLXRoZW1lPSJsaWdodCJdIC5mb290ZXItbG9nb3tvcGFjaXR5Oi4zNTt9CltkYXRhLXRoZW1lPSJpbmsiXSAuZm9vdGVyLWxvZ297b3BhY2l0eTouNTU7fQouZm9vdGVyLXRhZ2xpbmV7Zm9udC1mYW1pbHk6J0Nvcm1vcmFudCBHYXJhbW9uZCcsc2VyaWY7Zm9udC1zaXplOi45NXJlbTtmb250LXdlaWdodDozMDA7bGV0dGVyLXNwYWNpbmc6NHB4O2NvbG9yOnZhcigtLXRleHQyKTttYXJnaW4tYm90dG9tOjEwcHg7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQouZm9vdGVyLWNvcHl7Zm9udC1zaXplOi42cmVtO2xldHRlci1zcGFjaW5nOjJweDtjb2xvcjp2YXIoLS10ZXh0Mik7b3BhY2l0eTouNTt0cmFuc2l0aW9uOmNvbG9yIC40czt9CgoKLyogTlVNQU4gU0VDVElPTiAqLwoubnVtYW4tc2VjdGlvbiB7IGJhY2tncm91bmQ6IHZhcigtLWJnMik7IGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAuNHMsIGJvcmRlci1jb2xvciAuNHM7IH0KLm51bWFuLWlubmVyIHsgbWF4LXdpZHRoOiA5MDBweDsgbWFyZ2luOiAwIGF1dG87IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjgwcHggMWZyOyBnYXA6IDYwcHg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IH0KLm51bWFuLXBob3RvcyB7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGdhcDogMTZweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQoubnVtYW4tcGhvdG8tbWFpbiB7IHdpZHRoOiAyMDBweDsgaGVpZ2h0OiAyMDBweDsgYm9yZGVyLXJhZGl1czogNTAlOyBvYmplY3QtZml0OiBjb3ZlcjsgYm9yZGVyOiAzcHggc29saWQgdmFyKC0tZ29sZC1saW5lKTsgdHJhbnNpdGlvbjogYm9yZGVyLWNvbG9yIC40czsgfQoubnVtYW4tcGhvdG8tc3ViIHsgd2lkdGg6IDE0MHB4OyBoZWlnaHQ6IDE0MHB4OyBib3JkZXItcmFkaXVzOiA1MCU7IG9iamVjdC1maXQ6IGNvdmVyOyBvcGFjaXR5OiAuNzU7IGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJvcmRlcik7IHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAuNHMsIG9wYWNpdHkgLjRzOyB9Ci5udW1hbi1uYW1lIHsgZm9udC1mYW1pbHk6ICdOb3RvIFNlcmlmIEpQJywgc2VyaWY7IGZvbnQtc2l6ZTogY2xhbXAoMS40cmVtLDN2dywxLjlyZW0pOyBmb250LXdlaWdodDogNDAwOyBsZXR0ZXItc3BhY2luZzogMnB4OyBtYXJnaW4tYm90dG9tOiA0cHg7IH0KLm51bWFuLXRpdGxlIHsgZm9udC1zaXplOiAuNzVyZW07IGxldHRlci1zcGFjaW5nOiA0cHg7IGNvbG9yOiB2YXIoLS1nb2xkKTsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgbWFyZ2luLWJvdHRvbTogMjRweDsgZm9udC13ZWlnaHQ6IDUwMDsgdHJhbnNpdGlvbjogY29sb3IgLjRzOyB9Ci5udW1hbi10aXRsZTo6YmVmb3JlIHsgY29udGVudDogJ+KAlCAnOyB9Ci5udW1hbi1ib2R5IHsgZm9udC1zaXplOiAuOTVyZW07IGNvbG9yOiB2YXIoLS10ZXh0Mik7IGZvbnQtd2VpZ2h0OiAzMDA7IGxpbmUtaGVpZ2h0OiAyLjY7IG1hcmdpbi1ib3R0b206IDI4cHg7IHRyYW5zaXRpb246IGNvbG9yIC40czsgfQoubnVtYW4tYm9keSBzdHJvbmcgeyBjb2xvcjogdmFyKC0tdGV4dCk7IGZvbnQtd2VpZ2h0OiA1MDA7IH0KLm51bWFuLW1ldGEgeyBkaXNwbGF5OiBmbGV4OyBmbGV4LXdyYXA6IHdyYXA7IGdhcDogMTJweDsgbWFyZ2luLWJvdHRvbTogMjhweDsgfQoubnVtYW4tdGFnIHsgZGlzcGxheTogaW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNnB4OyBmb250LXNpemU6IC43MnJlbTsgbGV0dGVyLXNwYWNpbmc6IDJweDsgY29sb3I6IHZhcigtLXRleHQyKTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsgcGFkZGluZzogNXB4IDE0cHg7IGJvcmRlci1yYWRpdXM6IDEwMHB4OyB0cmFuc2l0aW9uOiBjb2xvciAuNHMsIGJvcmRlci1jb2xvciAuNHM7IH0KLm51bWFuLWlnIHsgZGlzcGxheTogaW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogOHB4OyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCM4MzNhYjQsI2ZkMWQxZCwjZmNiMDQ1KTsgY29sb3I6ICNmZmY7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgZm9udC1zaXplOiAuOHJlbTsgZm9udC13ZWlnaHQ6IDUwMDsgbGV0dGVyLXNwYWNpbmc6IDJweDsgcGFkZGluZzogMTJweCAyOHB4OyBib3JkZXItcmFkaXVzOiAxMDBweDsgdHJhbnNpdGlvbjogb3BhY2l0eSAuMnMsIHRyYW5zZm9ybSAuMnM7IH0KLm51bWFuLWlnOmhvdmVyIHsgb3BhY2l0eTogLjg4OyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7IH0KQG1lZGlhKG1heC13aWR0aDo3MDBweCkgewogICAgLm51bWFuLWlubmVyIHsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7IGdhcDogMzJweDsgfQogICAgLm51bWFuLXBob3RvcyB7IGZsZXgtZGlyZWN0aW9uOiByb3c7IGp1c3RpZnktY29udGVudDogY2VudGVyOyB9CiAgICAubnVtYW4tcGhvdG8tbWFpbiB7IHdpZHRoOiAxNTBweDsgaGVpZ2h0OiAxNTBweDsgfQogICAgLm51bWFuLXBob3RvLXN1YiB7IHdpZHRoOiAxMDBweDsgaGVpZ2h0OiAxMDBweDsgfQp9CgoKLyogV0hZIEtJTUFSVSBTVE9SWSBTRUNUSU9OICovCi53aHktc2VjdGlvbiB7IGJhY2tncm91bmQ6IHZhcigtLWJnKTsgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAuNHM7IH0KLndoeS1pbm5lciB7IG1heC13aWR0aDogNzYwcHg7IG1hcmdpbjogMCBhdXRvOyB9Ci53aHktbGVhZCB7IGZvbnQtZmFtaWx5OiAnTm90byBTZXJpZiBKUCcsIHNlcmlmOyBmb250LXNpemU6IGNsYW1wKDEuMDVyZW0sMy41dncsMS41cmVtKTsgZm9udC13ZWlnaHQ6IDQwMDsgbGluZS1oZWlnaHQ6IDEuOTsgbGV0dGVyLXNwYWNpbmc6IC41cHg7IGNvbG9yOiB2YXIoLS10ZXh0KTsgbWFyZ2luLWJvdHRvbTogMzJweDsgYm9yZGVyLWxlZnQ6IDJweCBzb2xpZCB2YXIoLS1nb2xkLWxpbmUpOyBwYWRkaW5nLWxlZnQ6IDIwcHg7IHRyYW5zaXRpb246IGNvbG9yIC40cywgYm9yZGVyLWNvbG9yIC40czsgfQoud2h5LWxlYWQgZW0geyBjb2xvcjogdmFyKC0tZ29sZCk7IGZvbnQtc3R5bGU6IG5vcm1hbDsgdHJhbnNpdGlvbjogY29sb3IgLjRzOyB9Ci53aHktYm9keSB7IGZvbnQtc2l6ZTogLjkycmVtOyBjb2xvcjogdmFyKC0tdGV4dDIpOyBsaW5lLWhlaWdodDogMi4yOyBmb250LXdlaWdodDogMzAwOyBtYXJnaW4tYm90dG9tOiAyNHB4OyB0cmFuc2l0aW9uOiBjb2xvciAuNHM7IH0KLndoeS1ib2R5IHN0cm9uZyB7IGNvbG9yOiB2YXIoLS10ZXh0KTsgZm9udC13ZWlnaHQ6IDUwMDsgfQoud2h5LWRpdmlkZXIgeyB3aWR0aDogNDBweDsgaGVpZ2h0OiAxcHg7IGJhY2tncm91bmQ6IHZhcigtLWdvbGQtbGluZSk7IG1hcmdpbjogNDBweCAwOyB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIC40czsgfQoud2h5LXF1b3RlIHsgcG9zaXRpb246IHJlbGF0aXZlOyBiYWNrZ3JvdW5kOiB2YXIoLS1iZzIpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOyBib3JkZXItcmFkaXVzOiAxMnB4OyBwYWRkaW5nOiAzMnB4IDM2cHg7IG1hcmdpbjogNDBweCAwOyB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIC40cywgYm9yZGVyLWNvbG9yIC40czsgfQoud2h5LXF1b3RlOjpiZWZvcmUgeyBjb250ZW50OiAnIic7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAtMThweDsgbGVmdDogMjhweDsgZm9udC1mYW1pbHk6ICdDb3Jtb3JhbnQgR2FyYW1vbmQnLCBzZXJpZjsgZm9udC1zaXplOiA1cmVtOyBsaW5lLWhlaWdodDogMTsgY29sb3I6IHZhcigtLWdvbGQpOyBvcGFjaXR5OiAuNDsgdHJhbnNpdGlvbjogY29sb3IgLjRzOyB9Ci53aHktcXVvdGUgcCB7IGZvbnQtZmFtaWx5OiAnTm90byBTZXJpZiBKUCcsIHNlcmlmOyBmb250LXNpemU6IC45NXJlbTsgbGluZS1oZWlnaHQ6IDIuNDsgY29sb3I6IHZhcigtLXRleHQyKTsgZm9udC1zdHlsZTogaXRhbGljOyB0cmFuc2l0aW9uOiBjb2xvciAuNHM7IH0KLndoeS1xdW90ZSBjaXRlIHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi10b3A6IDE2cHg7IGZvbnQtc2l6ZTogLjcycmVtOyBsZXR0ZXItc3BhY2luZzogM3B4OyBjb2xvcjogdmFyKC0tZ29sZCk7IGZvbnQtc3R5bGU6IG5vcm1hbDsgdHJhbnNpdGlvbjogY29sb3IgLjRzOyB9Ci53aHktY29uY2x1c2lvbiB7IGZvbnQtZmFtaWx5OiAnTm90byBTZXJpZiBKUCcsIHNlcmlmOyBmb250LXNpemU6IGNsYW1wKDFyZW0sMnZ3LDEuMjVyZW0pOyBsaW5lLWhlaWdodDogMi40OyBjb2xvcjogdmFyKC0tdGV4dCk7IGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOyBwYWRkaW5nLXRvcDogMzZweDsgbWFyZ2luLXRvcDogMzZweDsgdHJhbnNpdGlvbjogY29sb3IgLjRzLCBib3JkZXItY29sb3IgLjRzOyB9Ci53aHktY29uY2x1c2lvbiBzdHJvbmcgeyBjb2xvcjogdmFyKC0tZ29sZCk7IGZvbnQtd2VpZ2h0OiA2MDA7IHRyYW5zaXRpb246IGNvbG9yIC40czsgfQoKLyogUkVWRUFMICovCi5yZXZlYWx7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDIwcHgpO3RyYW5zaXRpb246b3BhY2l0eSAuN3MgY3ViaWMtYmV6aWVyKC4yMiwxLC4zNiwxKSx0cmFuc2Zvcm0gLjdzIGN1YmljLWJlemllciguMjIsMSwuMzYsMSk7fQoucmV2ZWFsLnZpc2libGV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApO30KCkBtZWRpYShtYXgtd2lkdGg6NjQwcHgpewogICAgLmludHJvLWNhcmRze2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnI7fQogICAgLm1lc3NhZ2UtYm94e3BhZGRpbmc6MjhweCAxOHB4O30KICAgIC5jdGEtYnRue21pbi13aWR0aDp1bnNldDt3aWR0aDoxMDAlO21heC13aWR0aDozMDBweDt9CiAgICAuaGVyby1jYXRjaC13cmFwe21pbi1oZWlnaHQ6MTIwcHg7fQp9Cjwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgZGF0YS10aGVtZT0iJSVLSU1BUlVfVEhFTUUlJSI+CgoKPCEtLSBIRVJP77yI6YCP44GL44GX44GC44KK77yJIC0tPgo8c2VjdGlvbiBjbGFzcz0iaGVybyI+CiAgICA8ZGl2IGNsYXNzPSJ3bSI+PGltZyBzcmM9ImltYWdlcy9sb2dvLnBuZyIgYWx0PSIiPjwvZGl2PgogICAgPGRpdiBjbGFzcz0iaGVyby1iYWRnZSI+S0lNQVJVIOKAlCBOZXcgV2F5IHRvIFByb3Bvc2U8L2Rpdj4KICAgIDxkaXYgY2xhc3M9Imhlcm8tY2F0Y2gtd3JhcCI+CiAgICAgICAgPGRpdiBjbGFzcz0iY2F0Y2gtaXRlbSBhY3RpdmUiPuOBguOBquOBn+OBruaKgOihk+OBr+OAgTxicj7jgoLjgaPjgag8c3Bhbj7kvJ3jgo/jgos8L3NwYW4+44CCPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iY2F0Y2gtaXRlbSI+6IG35Lq644Gu5LuV5LqL44GM44CBPGJyPueUu+mdouOBruS4reOBpzxzcGFuPuWLleOBjeWHuuOBmTwvc3Bhbj7jgII8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjYXRjaC1pdGVtIj7mj5DmoYjjgYzlpInjgo/jgozjgbDjgIE8c3Bhbj7lpZHntIQ8L3NwYW4+44GM5aSJ44KP44KL44CCPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iY2F0Y2gtaXRlbSI+44K544Oe44Ob5LiA44Gk44Gn44CBPGJyPjxzcGFuPuODl+ODrTwvc3Bhbj7jga7mj5DmoYjmm7jjgII8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjYXRjaC1pdGVtIj7opovjgZvmlrnjgpLlpInjgYjjgovjgaDjgZHjgafjgIE8YnI+PHNwYW4+57WQ5p6cPC9zcGFuPuOBjOWkieOCj+OCi+OAgjwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJoZXJvLWRvdHMiPgogICAgICAgIDxkaXYgY2xhc3M9Imhlcm8tZG90IGFjdGl2ZSIgZGF0YS1kb3Q9IjAiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imhlcm8tZG90IiBkYXRhLWRvdD0iMSI+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaGVyby1kb3QiIGRhdGEtZG90PSIyIj48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJoZXJvLWRvdCIgZGF0YS1kb3Q9IjMiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imhlcm8tZG90IiBkYXRhLWRvdD0iNCI+PC9kaXY+CiAgICA8L2Rpdj4KICAgIDxwIGNsYXNzPSJoZXJvLXN1YiI+5pa95bel44Gu54++5aC044GM44CBPGJyPuOBneOBruOBvuOBvuacgOmrmOOBruaPkOahiOabuOOBq+OBquOCi+OAgjxicj5LSU1BUlXjgYzjgIHjgYLjgarjgZ/jga7llrbmpa3jgpLlpInjgYjjgb7jgZnjgII8L3A+CiAgICA8ZGl2IGNsYXNzPSJoZXJvLXNjcm9sbCI+PHNwYW4+U2Nyb2xsPC9zcGFuPjxkaXYgY2xhc3M9InNjcm9sbC1iYXIiPjwvZGl2PjwvZGl2Pgo8L3NlY3Rpb24+Cgo8IS0tIElOVFJP77yI6YCP44GL44GX44Gq44GX77yJIC0tPgo8c2VjdGlvbiBjbGFzcz0ic2VjdGlvbiBpbnRybyI+CiAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWlubmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJyZXZlYWwiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLXRhZyI+V2hhdCBpcyBLSU1BUlU8L2Rpdj4KICAgICAgICAgICAgPGgyIGNsYXNzPSJzZWN0aW9uLXRpdGxlIj7jgZPjgpPjgarjgZPjgajjgYzjgIHjgafjgY3jgovjgojjgYbjgavjgarjgorjgb7jgZfjgZ/jgII8L2gyPgogICAgICAgICAgICA8cCBjbGFzcz0ic2VjdGlvbi1ib2R5Ij7jgYrlrqLmp5jjga7nj77loLTlhpnnnJ/jgavku5XkuIrjgYzjgorjgqTjg6Hjg7zjgrjjgpLph43jga3jgZ/jg5Pjg5Xjgqnjg7zjgqLjg5Xjgr/jg7zmj5DmoYjmm7jjgpLjgIFVUkzjgbLjgajjgaTjgaflsYrjgZHjgovjgILjgrnjg57jg5vjgafop6bjgozjgovjgIHjgqTjg7Pjgr/jg6njgq/jg4bjgqPjg5bjgarmj5DmoYjjga7lvaLjgafjgZnjgII8L3A+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaW50cm8tY2FyZHMgcmV2ZWFsIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW50cm8tY2FyZCI+PGRpdiBjbGFzcz0iaW50cm8tY2FyZC1udW0iPjAxPC9kaXY+PGRpdiBjbGFzcz0iaW50cm8tY2FyZC10aXRsZSI+5YaZ55yf44KS5b2T44Gm6L6844KAPC9kaXY+PGRpdiBjbGFzcz0iaW50cm8tY2FyZC1ib2R5Ij7mlr3lt6XliY3jga7nj77loLTlhpnnnJ/jgavku5XkuIrjgYzjgorjgqTjg6Hjg7zjgrjjgpLph43jga3jgos8L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW50cm8tY2FyZCI+PGRpdiBjbGFzcz0iaW50cm8tY2FyZC1udW0iPjAyPC9kaXY+PGRpdiBjbGFzcz0iaW50cm8tY2FyZC10aXRsZSI+VVJM44Gn5bGK44GR44KLPC9kaXY+PGRpdiBjbGFzcz0iaW50cm8tY2FyZC1ib2R5Ij5MSU5F44Gn6YCB44KL44Gg44GR44CC54m55Yil44Gq44Ki44OX44Oq44Gv5LiN6KaBPC9kaXY+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImludHJvLWNhcmQiPjxkaXYgY2xhc3M9ImludHJvLWNhcmQtbnVtIj4wMzwvZGl2PjxkaXYgY2xhc3M9ImludHJvLWNhcmQtdGl0bGUiPue/jOacneOAgemAo+e1oeOBjOadpeOCizwvZGl2PjxkaXYgY2xhc3M9ImludHJvLWNhcmQtYm9keSI+44GK5a6i5qeY44GM5a6244Gn6KaL44Gm44CB6Ieq5YiG44Gn5rG644KB44KLPC9kaXY+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KPC9zZWN0aW9uPgoKPCEtLSBCQSBEQVRBIChKU09OKSDigJQg566h55CG55S76Z2i44GL44KJ6Ieq5YuV55Sf5oiQIC0tPgo8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2pzb24iIGlkPSJiYS1kYXRhIj5bXTwvc2NyaXB0Pgo8IS0tIEJB77yI6YCP44GL44GX44Gq44GX77yJIC0tPgo8c2VjdGlvbiBjbGFzcz0ic2VjdGlvbiIgaWQ9ImJhLXNlY3Rpb24iPgogICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1pbm5lciI+CiAgICAgICAgPGRpdiBjbGFzcz0icmV2ZWFsIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi10YWciPkJlZm9yZSAvIEFmdGVyPC9kaXY+CiAgICAgICAgICAgIDxoMiBjbGFzcz0ic2VjdGlvbi10aXRsZSI+5a6f6Zqb44Gr6Kem44Gj44Gm44G/44Gm44GP44Gg44GV44GE44CCPC9oMj4KICAgICAgICAgICAgPHAgY2xhc3M9InNlY3Rpb24tYm9keSI+44K544Op44Kk44OA44O844KS5YuV44GL44GZ44Go44CB5pa95bel5YmN44Go5pa95bel5b6M44GM5YiH44KK5pu/44KP44KK44G+44GZ44CCPC9wPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgaWQ9ImJhLWxpc3QiIHN0eWxlPSJtYXJnaW4tdG9wOjM2cHg7Ij48L2Rpdj4KICAgIDwvZGl2Pgo8L3NlY3Rpb24+CjwhLS0gTGlnaHRib3ggLS0+CjxkaXYgY2xhc3M9ImxpZ2h0Ym94IiBpZD0ibGlnaHRib3giIG9uY2xpY2s9ImNsb3NlTGlnaHRib3goKSI+CiAgPHNwYW4gY2xhc3M9ImxpZ2h0Ym94LWNsb3NlIj7Dlzwvc3Bhbj4KICA8aW1nIGlkPSJsaWdodGJveC1pbWciIHNyYz0iIiBhbHQ9IiI+CjwvZGl2PgoKPCEtLSBHQUxMRVJZIFRFQVNFUiAtLT4KPHNlY3Rpb24gY2xhc3M9InNlY3Rpb24gZ2FsbGVyeS10ZWFzZXItc2VjdGlvbiByZXZlYWwiIGlkPSJnYWxsZXJ5LXRlYXNlciI+CiAgPGRpdiBjbGFzcz0ic2VjdGlvbi1pbm5lciIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+CiAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLXRhZyIgc3R5bGU9Imp1c3RpZnktY29udGVudDpjZW50ZXI7Ij5Qb3J0Zm9saW88L2Rpdj4KICAgIDxoMiBjbGFzcz0ic2VjdGlvbi10aXRsZSIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTJweDsiPuOBneOBruS7luOBruaWveW3peS6i+S+i+OBr+OBk+OBoeOCiTwvaDI+CiAgICA8cCBjbGFzcz0ic2VjdGlvbi1ib2R5IiBzdHlsZT0ibWF4LXdpZHRoOjQ4MHB4O21hcmdpbjowIGF1dG8gMjhweDsiPuODkeOCv+ODvOODs+WIpeODu+e0oOadkOWIpeOBruODneODvOODiOODleOCqeODquOCquOCruODo+ODqeODquODvOOCkua6luWCmeOBl+OBpuOBhOOBvuOBmeOAgjwvcD4KICAgIDxhIGhyZWY9IiMiIGNsYXNzPSJnYWxsZXJ5LXRlYXNlci1idG4iIG9uY2xpY2s9InJldHVybiBmYWxzZTsiPgogICAgICA8c3BhbiBjbGFzcz0iZ2FsbGVyeS10ZWFzZXItYmFkZ2UiPua6luWCmeS4rTwvc3Bhbj4KICAgICAg5pa95bel5LqL5L6L44Ku44Oj44Op44Oq44O844KS6KaL44KLCiAgICAgIDxzdmcgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiPjxwYXRoIGQ9Ik01IDEyaDE0TTEyIDVsNyA3LTcgNyIvPjwvc3ZnPgogICAgPC9hPgogICAgPHAgc3R5bGU9ImZvbnQtc2l6ZTouNzJyZW07Y29sb3I6dmFyKC0tdGV4dDIpO21hcmdpbi10b3A6MTRweDtsZXR0ZXItc3BhY2luZzoxcHg7Ij5DT01JTkcgU09PTjwvcD4KICA8L2Rpdj4KPC9zZWN0aW9uPgoKPCEtLSBWSURFT++8iOmAj+OBi+OBl+OBquOBl++8iSAtLT4KPHNlY3Rpb24gY2xhc3M9InNlY3Rpb24gdmlkZW8tc2VjdGlvbiI+CiAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWlubmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJyZXZlYWwiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLXRhZyI+Q2luZW1hdGljIFZpZXc8L2Rpdj4KICAgICAgICAgICAgPGgyIGNsYXNzPSJzZWN0aW9uLXRpdGxlIj7ntKDmnZDjga7kuJbnlYzjgpLjgIHmmKDlg4/jgafjgII8L2gyPgogICAgICAgICAgICA8cCBjbGFzcz0ic2VjdGlvbi1ib2R5Ij7mlr3lt6Xjga7os6rmhJ/jgajku5XkuIrjgYzjgorjgpLjgIHmmKDlg4/jgafjgYrlsYrjgZHjgZfjgb7jgZnjgII8L3A+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0idmlkZW8td3JhcCByZXZlYWwiPgogICAgICAgICAgICA8dmlkZW8gaWQ9InByb21vLXZpZGVvIiBzcmM9IiIgcG9zdGVyPSIiIGF1dG9wbGF5IG11dGVkIGxvb3AgcGxheXNpbmxpbmU+PC92aWRlbz4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idmlkZW8tcGxhY2Vob2xkZXIiIGlkPSJ2aWRlby1wbGFjZWhvbGRlciI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ2aWRlby1pY29uIj48c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJjdXJyZW50Q29sb3IiIHN0eWxlPSJjb2xvcjp2YXIoLS1nb2xkKSI+PHBhdGggZD0iTTggNXYxNGwxMS03eiIvPjwvc3ZnPjwvZGl2PgogICAgICAgICAgICAgICAgPHNwYW4+c3JjIOOBq+WLleeUuyBVUkwg44KS5YWl44KM44Gm44GP44Gg44GV44GEPC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L3NlY3Rpb24+Cgo8IS0tIE1FU1NBR0XvvIjpgI/jgYvjgZfjgarjgZfvvIkgLS0+CjxzZWN0aW9uIGNsYXNzPSJzZWN0aW9uIj4KICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taW5uZXIiPgogICAgICAgIDxkaXYgY2xhc3M9Im1lc3NhZ2UtYm94IHJldmVhbCI+CiAgICAgICAgICAgIDxwIGNsYXNzPSJtZXNzYWdlLW1haW4iPuOCteODs+ODl+ODq+OCkuaMgeOBo+OBpuihjOOBo+OBpuOCguWlkee0hOOBjOWPluOCjOOBquOBhOOAgTxicj7jgZ3jgpPjgarmmYLku6Pjga88c3Bhbj7jgoLjgYbntYLjgo/jgoo8L3NwYW4+44Gr44GX44G+44Gb44KT44GL44CCPC9wPgogICAgICAgICAgICA8cCBjbGFzcz0ibWVzc2FnZS1ib2R5Ij7mioDooZPjga/mnKznianjgarjga7jgavjgIHkvJ3jgYjmlrnjgYzov73jgYTjgaTjgYTjgabjgYTjgarjgYTjgaDjgZHjgII8YnI+S0lNQVJV44KS5L2/44GI44Gw44CB44GK5a6i5qeY44GM6Ieq5YiG44Gn44CM5rG644KB44KL44CN44KI44GG44Gr44Gq44KK44G+44GZ44CCPC9wPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+Cjwvc2VjdGlvbj4KCgo8IS0tIE5VTUFOIFNFQ1RJT04gLS0+CjxzZWN0aW9uIGNsYXNzPSJzZWN0aW9uIG51bWFuLXNlY3Rpb24iPgogICAgPGRpdiBjbGFzcz0ibnVtYW4taW5uZXIiPgogICAgICAgIDxkaXYgY2xhc3M9Im51bWFuLXBob3RvcyByZXZlYWwiPgogICAgICAgICAgICA8aW1nIGNsYXNzPSJudW1hbi1waG90by1tYWluIiBzcmM9ImltYWdlcy9udW1hbl9jb2xvci5qcGciIGFsdD0i44K744Oh44Oz44OI44Ki44O844OG44Kj44K544OIIOOBrOODvOOBvuOCkyI+CiAgICAgICAgICAgIDxpbWcgY2xhc3M9Im51bWFuLXBob3RvLXN1YiIgIHNyYz0iaW1hZ2VzL251bWFuX3BvcnRyYWl0LmpwZyIgYWx0PSLjgazjg7zjgb7jgpMiPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Im51bWFuLXRleHQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZXZlYWwiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi10YWciPkFib3V0PC9kaXY+CiAgICAgICAgICAgICAgICA8aDIgY2xhc3M9Im51bWFuLW5hbWUiPuOCu+ODoeODs+ODiOOCouODvOODhuOCo+OCueODiDxicj7jgazjg7zjgb7jgpM8L2gyPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibnVtYW4tdGl0bGUiPkNlbWVudCBBcnRpc3QgTnXimIZNYW48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im51bWFuLW1ldGEgcmV2ZWFsIj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJudW1hbi10YWciPvCfk40g5LiJ6YeN55yMIOadvumYquW4gjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJudW1hbi10YWciPvCfl5Mg44Ot44O844Op44O844K544OI44O844Oz5q20IDIwMTnlubTjgJw8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8cCBjbGFzcz0ibnVtYW4tYm9keSByZXZlYWwiPgogICAgICAgICAgICAgICAgPHN0cm9uZz4xNuats+OBi+OCieW7uuiorealreeVjDwvc3Ryb25nPuOBq+mjm+OBs+i+vOOBv+OAgemVt+W5tOOBq+OCj+OBn+OBo+OBpuS7ruioreS6i+alreODu+S4i+iri+OBkeOBruS4lueVjOOBp+WDjeOBhOOBpuOBjeOBn+OAgjxicj48YnI+CiAgICAgICAgICAgICAgICDjgYTjgaTjgZfjgYvjgIHjgIw8c3Ryb25nPuOCq+OCv+ODgeOBq+aui+OCi+S7leS6i+OBjOOBl+OBn+OBhDwvc3Ryb25nPuOAjeOBqOaAneOBhuOCiOOBhuOBq+OBquOBo+OBn+OAgjxicj4KICAgICAgICAgICAgICAgIOOBneOCk+OBquOBqOOBjeWHuuS8muOBo+OBn+OBruOBjOOAgeODreODvOODqeODvOOCueODiOODvOODs+OAgjxicj48YnI+CiAgICAgICAgICAgICAgICDjgYrlrqLjgZXjgpPjga7llpzjgbblo7DjgIHnrJHpoZTjgavnm7TmjqXjgbXjgozjgonjgozjgovku5XkuovjgII8YnI+CiAgICAgICAgICAgICAgICDjgZ3jgZfjgabjgIHjgZPjga7ku5XkuovjgavnnJ/liaPjgavlkJHjgY3lkIjjgYY8c3Ryb25nPueGseOBhOaAneOBhOOCkuaMgeOBo+OBn+S7sumWk+OBn+OBoeOBqOWumuacn+eahOOBq+S8muOBiOOCi+eSsOWigzwvc3Ryb25nPuOAgjxicj4KICAgICAgICAgICAgICAgIOWHuuS8muOBhuOBn+OBs+OBq+awl+OBpeOBjeOBjOOBguOCiuOAgeWtpuOBs+OBjOOBguOCi+OAgjxicj48YnI+CiAgICAgICAgICAgICAgICDjgZPjga7ntKDmmbTjgonjgZfjgYTku5XkuovjgpLjgIHjgoLjgaPjgajlpJrjgY/jga7kurrjgavnn6XjgaPjgabjgoLjgonjgYTjgZ/jgYTjgII8YnI+CiAgICAgICAgICAgICAgICDpq5jjgYTmioDooZPjgpLmjIHjgaTku7LplpPjgZ/jgaHjgavjgIHjgoLjgaPjgajoh6rkv6HjgpLmjIHjgaPjgabovJ3jgZHjgovmqZ/kvJrjgpLlsYrjgZHjgZ/jgYTjgII8YnI+CiAgICAgICAgICAgICAgICDjgZ3jgZfjgabjgIE8c3Ryb25nPuengeiHqui6q+OCkuiCsuOBpuOBpuOBj+OCjOOBn1JPTExFUiBTVE9OReOBqOOBhOOBhualreeVjOOBqzwvc3Ryb25nPuOAgeOBk+OBruODl+ODreOCuOOCp+OCr+ODiOOBp+aBqei/lOOBl+OBjOOBl+OBn+OBhOOAgjxicj48YnI+CiAgICAgICAgICAgICAgICDjgZ3jgozjgYzjgIFLSU1BUlXjga7ljp/ngrnjgafjgZnjgIIKICAgICAgICAgICAgPC9wPgogICAgICAgICAgICA8YSBocmVmPSJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL2NlbWVudGFydF9udW1hbi8iIGNsYXNzPSJudW1hbi1pZyByZXZlYWwiIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vb3BlbmVyIj4KICAgICAgICAgICAgICAgIDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTEyIDIuMTYzYzMuMjA0IDAgMy41ODQuMDEyIDQuODUuMDcgMy4yNTIuMTQ4IDQuNzcxIDEuNjkxIDQuOTE5IDQuOTE5LjA1OCAxLjI2NS4wNjkgMS42NDUuMDY5IDQuODQ5IDAgMy4yMDUtLjAxMiAzLjU4NC0uMDY5IDQuODQ5LS4xNDkgMy4yMjUtMS42NjQgNC43NzEtNC45MTkgNC45MTktMS4yNjYuMDU4LTEuNjQ0LjA3LTQuODUuMDctMy4yMDQgMC0zLjU4NC0uMDEyLTQuODQ5LS4wNy0zLjI2LS4xNDktNC43NzEtMS42OTktNC45MTktNC45Mi0uMDU4LTEuMjY1LS4wNy0xLjY0NC0uMDctNC44NDkgMC0zLjIwNC4wMTMtMy41ODMuMDctNC44NDkuMTQ5LTMuMjI3IDEuNjY0LTQuNzcxIDQuOTE5LTQuOTE5IDEuMjY2LS4wNTcgMS42NDUtLjA2OSA0Ljg0OS0uMDY5em0wLTIuMTYzYy0zLjI1OSAwLTMuNjY3LjAxNC00Ljk0Ny4wNzItNC4zNTguMi02Ljc4IDIuNjE4LTYuOTggNi45OC0uMDU5IDEuMjgxLS4wNzMgMS42ODktLjA3MyA0Ljk0OCAwIDMuMjU5LjAxNCAzLjY2OC4wNzIgNC45NDguMiA0LjM1OCAyLjYxOCA2Ljc4IDYuOTggNi45OCAxLjI4MS4wNTggMS42ODkuMDcyIDQuOTQ4LjA3MiAzLjI1OSAwIDMuNjY4LS4wMTQgNC45NDgtLjA3MiA0LjM1NC0uMiA2Ljc4Mi0yLjYxOCA2Ljk3OS02Ljk4LjA1OS0xLjI4LjA3My0xLjY4OS4wNzMtNC45NDggMC0zLjI1OS0uMDE0LTMuNjY3LS4wNzItNC45NDctLjE5Ni00LjM1NC0yLjYxNy02Ljc4LTYuOTc5LTYuOTgtMS4yODEtLjA1OS0xLjY5LS4wNzMtNC45NDktLjA3M3ptMCA1LjgzOGMtMy40MDMgMC02LjE2MiAyLjc1OS02LjE2MiA2LjE2MnMyLjc1OSA2LjE2MyA2LjE2MiA2LjE2MyA2LjE2Mi0yLjc1OSA2LjE2Mi02LjE2M2MwLTMuNDAzLTIuNzU5LTYuMTYyLTYuMTYyLTYuMTYyem0wIDEwLjE2MmMtMi4yMDkgMC00LTEuNzktNC00IDAtMi4yMDkgMS43OTEtNCA0LTRzNCAxLjc5MSA0IDRjMCAyLjIxLTEuNzkxIDQtNCA0em02LjQwNi0xMS44NDVjLS43OTYgMC0xLjQ0MS42NDUtMS40NDEgMS40NHMuNjQ1IDEuNDQgMS40NDEgMS40NGMuNzk1IDAgMS40MzktLjY0NSAxLjQzOS0xLjQ0cy0uNjQ0LTEuNDQtMS40MzktMS40NHoiLz48L3N2Zz4KICAgICAgICAgICAgICAgIEBjZW1lbnRhcnRfbnVtYW4KICAgICAgICAgICAgPC9hPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+Cjwvc2VjdGlvbj4KCgo8IS0tIFdIWSBLSU1BUlUgU1RPUlkgLS0+CjxzZWN0aW9uIGNsYXNzPSJzZWN0aW9uIHdoeS1zZWN0aW9uIiBpZD0id2h5LWtpbWFydSI+CiAgICA8ZGl2IGNsYXNzPSJ3aHktaW5uZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tdGFnIHJldmVhbCI+V2h5IEtJTUFSVTwvZGl2PgoKICAgICAgICA8cCBjbGFzcz0id2h5LWxlYWQgcmV2ZWFsIj4KICAgICAgICAgICAg44Ot44O844Op44O844K544OI44O844Oz44Gv44CB6KO95ZOB44Gn44Gv44Gq44GE44CCPGJyPgogICAgICAgICAgICA8ZW0+44GZ44G544Gm44GM44OV44Oq44O844OP44Oz44OJ44Gn44CB54++5aC044Gn44G/44KT44Gq44GM5LuV5LiK44GS44Gm44GE44GP5oqA6KGTPC9lbT7jgaDjgIIKICAgICAgICA8L3A+CgogICAgICAgIDxwIGNsYXNzPSJ3aHktYm9keSByZXZlYWwiPgogICAgICAgICAgICDllK/kuIDnhKHkuozjga7jgqrjg6rjgrjjg4rjg6vjg4fjgrbjgqTjg7PjgILjgZ3jgozjga/jg63jg7zjg6njg7zjgrnjg4jjg7zjg7Pjga7mnIDlpKfjga7lvLfjgb/jgafjgYLjgorjgIHlkIzmmYLjgas8c3Ryb25nPuWkp+OBjeOBquiqsumhjDwvc3Ryb25nPuOBp+OCguOBguOBo+OBn+OAgjxicj48YnI+CiAgICAgICAgICAgIOOBiuWuouOBleOCk+OBr+WujOaIkOW9ouOCkuimi+OBn+OBhOOAguaXouijveWTgeOBquOCieOCteODs+ODl+ODq+OCkuimi+OBm+OCieOCjOOCi+OAguOBp+OCguODreODvOODqeODvOOCueODiOODvOODs+OBr+OAgTxzdHJvbmc+5LuV5LiK44GM44KK44Kk44Oh44O844K444Gv6IG35Lq644Gu6aCt44Gu5Lit44Gr44GX44GL44Gq44GE44CCPC9zdHJvbmc+PGJyPjxicj4KICAgICAgICAgICAg44Gg44GL44KJ56eB44Gf44Gh44Gr44Gn44GN44KL44GT44Go44Gv44CB6YGO5Y6744Gu5pa95bel5LqL5L6L44KS5Lim44G544Gf44OR44Oz44OV44Os44OD44OI44KS6KaL44Gb44Gm44CM5oOz5YOP44GX44Gm44KC44KJ44GG44CN44GT44Go44Gg44GR44Gg44Gj44Gf44CCCiAgICAgICAgPC9wPgoKICAgICAgICA8ZGl2IGNsYXNzPSJ3aHktcXVvdGUgcmV2ZWFsIj4KICAgICAgICAgICAgPHA+44CM56eB44Gr5Lu744Gb44Gm44GP44Gg44GV44GE44CC44GN44Gj44Go5Ly85ZCI44GG44Go5oCd44GE44G+44GZ44CC57W25a++44Gr44GL44Gj44GT44GE44GE44Gv44Ga44Gn44GZ44CC44CNPC9wPgogICAgICAgICAgICA8Y2l0ZT7igJQg5aSa44GP44Gu6IG35Lq644GM44CB54++5aC044Gn57mw44KK6L+U44GX44Gm44GN44Gf6KiA6JGJPC9jaXRlPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8cCBjbGFzcz0id2h5LWJvZHkgcmV2ZWFsIj4KICAgICAgICAgICAg5rSL5pyN44Gg44Gj44Gm44CB6Kmm552A5a6k44Gn6Ieq5YiG44Gr5Ly85ZCI44GG44GL56K644GL44KB44Gm44GL44KJ6LK344GG44CCPGJyPgogICAgICAgICAgICDpq5jpoY3jgarjg6rjg5Xjgqnjg7zjg6DjgarjgonjgIHjgarjgYrjgZXjgonjgZ3jgYbjgafjgYLjgovjgbnjgY3jgaDjgII8YnI+PGJyPgogICAgICAgICAgICA8c3Ryb25nPuOAjOS/oeOBmOOBpuOBj+OBoOOBleOBhOOAjeOBqOOBhOOBhuiogOiRieOBoOOBkeOBp+OAgeiqsOOBjOmrmOmhjeWVhuWTgeOCkuiyt+OBhuOBoOOCjeOBhuOBi+OAgjwvc3Ryb25nPjxicj48YnI+CiAgICAgICAgICAgIOengeOBr+OBmuOBo+OBqOOBneOBk+OBq+eWkeWVj+OBqOatr+OBjOOChuOBleOCkuaEn+OBmOOBpuOBhOOBn+OAgjxicj4KICAgICAgICAgICAg54ax44GE5oCd44GE44KC44CB6auY44GE5oqA6KGT44KC44CBPHN0cm9uZz7jgIzkvJ3jgYjjgovlipvjgI3jgYzjgarjgZHjgozjgbDlsYrjgYvjgarjgYTjgII8L3N0cm9uZz4KICAgICAgICA8L3A+CgogICAgICAgIDxkaXYgY2xhc3M9IndoeS1kaXZpZGVyIHJldmVhbCI+PC9kaXY+CgogICAgICAgIDxwIGNsYXNzPSJ3aHktY29uY2x1c2lvbiByZXZlYWwiPgogICAgICAgICAgICBLSU1BUlXjga/jgIHjgZ3jga7jgZnjgbnjgabjgpLop6PmsbrjgZnjgovjgZ/jgoHjga7jg5fjg63jgrjjgqfjgq/jg4jjgaDjgII8YnI+PGJyPgogICAgICAgICAgICDlrozmiJDjgqTjg6Hjg7zjgrjjgpLkvJ3jgYjjgonjgozjgovmj5DmoYjmm7jjgILjgYrlrqLjgZXjgpPjgYzjgIzjgZPjgozjgavjgZfjgZ/jgYTjgI3jgajoqIDjgYjjgovkvZPpqJPjgII8YnI+CiAgICAgICAgICAgIOiBt+S6uuOBjOiHquS/oeOCkuaMgeOBo+OBpuOAgeato+W9k+OBquWvvuS+oeOCkuW+l+OCieOCjOOCi+S7lee1hOOBv+OAgjxicj48YnI+CiAgICAgICAgICAgIOOBk+OCjOOBr+engeS4gOS6uuOBruOBn+OCgeOBmOOCg+OBquOBhOOAgjxicj4KICAgICAgICAgICAgPHN0cm9uZz7lkIzjgZjmgJ3jgYTjgpLmjIHjgaTjgIHjgZnjgbnjgabjga7jg63jg7zjg6njg7zjgrnjg4jjg7zjg7PogbfkurrjgbjjgII8L3N0cm9uZz4KICAgICAgICA8L3A+CiAgICA8L2Rpdj4KPC9zZWN0aW9uPgoKPCEtLSBDVEHvvIjpgI/jgYvjgZfjgYLjgorvvIkgLS0+CjxkaXYgY2xhc3M9ImN0YS1zZWN0aW9uIj4KICAgIDxkaXYgY2xhc3M9IndtIj48aW1nIHNyYz0iaW1hZ2VzL2xvZ28ucG5nIiBhbHQ9IiI+PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJjdGEtaW5uZXIiPgogICAgICAgIDxoMiBjbGFzcz0iY3RhLXRpdGxlIHJldmVhbCI+5rCX44Gr44Gq44Gj44Gf5pa544Gv44CBPGJyPuOBvuOBmkxJTkXjgafoqbHjgZfjgb7jgZfjgofjgYbjgII8L2gyPgogICAgICAgIDxwIGNsYXNzPSJjdGEtc3ViIHJldmVhbCI+6Kmz44GX44GE6Kqs5piO44O744OH44Oi44KC44GK5rCX6Lu944Gr44Gp44GG44GePC9wPgogICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vbGluLmVlL3h4eHh4eHgiIGNsYXNzPSJjdGEtYnRuIHJldmVhbCIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9vcGVuZXIiPgogICAgICAgICAgICA8c3ZnIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDQwIDM4IiBmaWxsPSJjdXJyZW50Q29sb3IiPjxwYXRoIGQ9Ik0yMCAwQzkgMCAwIDcuMiAwIDE2YzAgNS41IDMuNCAxMC4zIDguNyAxMy4zLS40IDEuNC0xLjQgNS4xLTEuNiA1LjktLjIgMSAuNCAxIC44LjcuMy0uMiA0LjgtMy4zIDYuNy00LjYuOS4xIDEuOS4yIDIuOS4yIDExIDAgMjAtNy4yIDIwLTE2UzMxIDAgMjAgMHoiLz48L3N2Zz4KICAgICAgICAgICAgTElORSDjgafjgYrllY/jgYTlkIjjgo/jgZsKICAgICAgICA8L2E+CiAgICAgICAgPHAgY2xhc3M9ImN0YS1ub3RlIHJldmVhbCI+54Sh5paZ44Gn44GU55u46KuH44GE44Gf44Gg44GR44G+44GZPC9wPgogICAgPC9kaXY+CjwvZGl2PgoKPCEtLSBGT09URVLvvIjpgI/jgYvjgZfvvIvjg63jgrTjgYLjgorvvIkgLS0+Cjxmb290ZXI+CiAgICA8aW1nIGNsYXNzPSJmb290ZXItbG9nby1kYXJrIiAgc3JjPSJpbWFnZXMvZm9vdGVyX2xvZ29fZGFyay5qcGciICBhbHQ9IktJTUFSVSI+CiAgICA8aW1nIGNsYXNzPSJmb290ZXItbG9nby1saWdodCIgc3JjPSJpbWFnZXMvZm9vdGVyX2xvZ29fbGlnaHQuanBnIiBhbHQ9IktJTUFSVSI+CiAgICA8ZGl2IGNsYXNzPSJmb290ZXItdGFnbGluZSI+UHJvcG9zYWwgU3lzdGVtIGZvciBDb25zdHJ1Y3Rpb24gUHJvZmVzc2lvbmFsczwvZGl2PgogICAgPGRpdiBjbGFzcz0iZm9vdGVyLWNvcHkiPiZjb3B5OyAyMDI1IEtJTUFSVS4gQWxsIHJpZ2h0cyByZXNlcnZlZC48L2Rpdj4KPC9mb290ZXI+Cgo8c2NyaXB0PgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICBLSU1BUlUgTFAg4oCUIOODoeOCpOODs+OCueOCr+ODquODl+ODiAogICBHQTQg5ris5a6aSUQ6IEctMFZGMjc3RjZSWAogICDjgqTjg5njg7Pjg4joqK3oqIjmm7ggdjIuMAogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKLy8gLS0tLS0g44Kt44Oj44OD44OB44Kz44OU44O8IOODreODvOODhuODvOOCt+ODp+ODsyAtLS0tLQp2YXIgY2F0Y2hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRjaC1pdGVtJyk7CnZhciBkb3RzICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlcm8tZG90Jyk7CnZhciBjdXJyZW50ID0gMCwgdGltZXI7CmZ1bmN0aW9uIHNob3dDYXRjaChpZHgpewogIGNhdGNoZXNbY3VycmVudF0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgZG90c1tjdXJyZW50XS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICBjdXJyZW50ID0gaWR4OwogIGNhdGNoZXNbY3VycmVudF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgZG90c1tjdXJyZW50XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKfQp0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7IHNob3dDYXRjaCgoY3VycmVudCArIDEpICUgY2F0Y2hlcy5sZW5ndGgpOyB9LCA0MDAwKTsKZG90cy5mb3JFYWNoKGZ1bmN0aW9uKGRvdCl7CiAgZG90LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXsKICAgIGNsZWFySW50ZXJ2YWwodGltZXIpOwogICAgc2hvd0NhdGNoKHBhcnNlSW50KGRvdC5kYXRhc2V0LmRvdCkpOwogICAgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpeyBzaG93Q2F0Y2goKGN1cnJlbnQgKyAxKSAlIGNhdGNoZXMubGVuZ3RoKTsgfSwgNDAwMCk7CiAgfSk7Cn0pOwoKLy8gLS0tLS0gQkEg44K544Op44Kk44OA44O877yISlNPTumnhuWLle+8iSAtLS0tLQp2YXIgUExBQ0VIT0xERVJfQkVGT1JFID0gJ2h0dHBzOi8vdmlhLnBsYWNlaG9sZGVyLmNvbS8xMjAweDY3NS8xMTEvMWUxZTFlP3RleHQ9QkVGT1JFJzsKdmFyIFBMQUNFSE9MREVSX0FGVEVSICA9ICdodHRwczovL3ZpYS5wbGFjZWhvbGRlci5jb20vMTIwMHg2NzUvMWExMjA4LzJhMjAxMD90ZXh0PUFGVEVSJzsKCmZ1bmN0aW9uIGluaXRCYVNsaWRlcnMoKXsKICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYS1saXN0Jyk7CiAgaWYoIWxpc3QpIHJldHVybjsKICB2YXIgZGF0YSA9IFtdOwogIHRyeXsgZGF0YSA9IEpTT04ucGFyc2UoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhLWRhdGEnKS50ZXh0Q29udGVudCB8fCAnW10nKTsgfWNhdGNoKGUpe30KICBpZighZGF0YS5sZW5ndGgpewogICAgZGF0YSA9IFsKICAgICAge3RpdGxlOifmlr3lt6Xkuovkvosg4oCUIOOCv+OCpOODiOODq+OCkuWFpeOCjOOBpuOBj+OBoOOBleOBhCcsIGJlZm9yZTpQTEFDRUhPTERFUl9CRUZPUkUsIGFmdGVyOlBMQUNFSE9MREVSX0FGVEVSLCBmaW5pc2g6JycsIGNvbG9yOicnLCBncm91dDonJywgc2FtcGxlOicnLCBhbmdsZXM6W119LAogICAgICB7dGl0bGU6J+aWveW3peS6i+S+iyDigJQg44K/44Kk44OI44Or44KS5YWl44KM44Gm44GP44Gg44GV44GEJywgYmVmb3JlOlBMQUNFSE9MREVSX0JFRk9SRSwgYWZ0ZXI6UExBQ0VIT0xERVJfQUZURVIsIGZpbmlzaDonJywgY29sb3I6JycsIGdyb3V0OicnLCBzYW1wbGU6JycsIGFuZ2xlczpbXX0KICAgIF07CiAgfQogIGxpc3QuaW5uZXJIVE1MID0gJyc7CiAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGkpewogICAgdmFyIGNoaXBzID0gJyc7CiAgICBpZihpdGVtLmZpbmlzaCkgY2hpcHMgKz0gJzxzcGFuIGNsYXNzPSJiYS1pbmZvLWNoaXAiPicgKyBpdGVtLmZpbmlzaCArICc8L3NwYW4+JzsKICAgIGlmKGl0ZW0uY29sb3IpICBjaGlwcyArPSAnPHNwYW4gY2xhc3M9ImJhLWluZm8tY2hpcCI+44Kr44Op44O877yaJyArIGl0ZW0uY29sb3IgKyAnPC9zcGFuPic7CiAgICBpZihpdGVtLmdyb3V0KSAgY2hpcHMgKz0gJzxzcGFuIGNsYXNzPSJiYS1pbmZvLWNoaXAiPuebruWcsO+8micgKyBpdGVtLmdyb3V0ICsgJzwvc3Bhbj4nOwogICAgdmFyIGFuZ2xlc0h0bWwgPSAnJzsKICAgIGlmKGl0ZW0uYW5nbGVzICYmIGl0ZW0uYW5nbGVzLmxlbmd0aCl7CiAgICAgIGFuZ2xlc0h0bWwgPSAnPGRpdiBjbGFzcz0iYmEtYW5nbGVzIj4nOwogICAgICBpdGVtLmFuZ2xlcy5mb3JFYWNoKGZ1bmN0aW9uKGFuZyl7CiAgICAgICAgaWYoIWFuZy5zcmMpIHJldHVybjsKICAgICAgICBhbmdsZXNIdG1sICs9ICc8ZGl2IGNsYXNzPSJiYS1hbmdsZS1pdGVtIiBvbmNsaWNrPSJvcGVuTGlnaHRib3goXCcnICsgYW5nLnNyYyArICdcJykiPicKICAgICAgICAgICsgJzxpbWcgY2xhc3M9ImJhLWFuZ2xlLWltZyIgc3JjPSInICsgYW5nLnNyYyArICciIGFsdD0iJyArIGVzY0h0bWxMUChhbmcubGFiZWx8fCcnKSArICciPicKICAgICAgICAgICsgKGFuZy5sYWJlbCA/ICc8ZGl2IGNsYXNzPSJiYS1hbmdsZS1sYWJlbCI+JyArIGVzY0h0bWxMUChhbmcubGFiZWwpICsgJzwvZGl2PicgOiAnJykKICAgICAgICAgICsgJzwvZGl2Pic7CiAgICAgIH0pOwogICAgICBhbmdsZXNIdG1sICs9ICc8L2Rpdj4nOwogICAgfQogICAgdmFyIGluZm9IdG1sID0gJyc7CiAgICBpZihjaGlwcyB8fCBpdGVtLnNhbXBsZSB8fCBhbmdsZXNIdG1sKXsKICAgICAgaW5mb0h0bWwgPSAnPGRpdiBjbGFzcz0iYmEtaW5mbyI+JwogICAgICAgICsgKGl0ZW0uc2FtcGxlID8gJzxpbWcgY2xhc3M9ImJhLXNhbXBsZS10aHVtYiIgc3JjPSInICsgaXRlbS5zYW1wbGUgKyAnIiBhbHQ9Iue0oOadkOOCteODs+ODl+ODqyIgb25jbGljaz0ib3BlbkxpZ2h0Ym94KFwnJyArIGl0ZW0uc2FtcGxlICsgJ1wnKSI+JyA6ICcnKQogICAgICAgICsgJzxkaXYgY2xhc3M9ImJhLWluZm8tdGV4dCI+JwogICAgICAgICsgKGl0ZW0uZmluaXNofHxpdGVtLmNvbG9yfHxpdGVtLmdyb3V0ID8gJzxkaXYgY2xhc3M9ImJhLWluZm8tbmFtZSI+JyArIChpdGVtLmZpbmlzaHx8JycpICsgJzwvZGl2PicgOiAnJykKICAgICAgICArIChjaGlwcyA/ICc8ZGl2IGNsYXNzPSJiYS1pbmZvLXRhZ3MiPicgKyBjaGlwcyArICc8L2Rpdj4nIDogJycpCiAgICAgICAgKyBhbmdsZXNIdG1sCiAgICAgICAgKyAnPC9kaXY+PC9kaXY+JzsKICAgIH0KICAgIHZhciBudW1TdHIgPSAoaSArIDEgPCAxMCA/ICcwJyArIChpICsgMSkgOiAnJyArIChpICsgMSkpOwogICAgdmFyIHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHdyYXAuY2xhc3NOYW1lID0gJ2JhLXdyYXAnOwogICAgaWYoaSA9PT0gMCkgd3JhcC5zdHlsZS5tYXJnaW5Ub3AgPSAnMCc7CiAgICB3cmFwLmlubmVySFRNTCA9CiAgICAgICAgJzxkaXYgY2xhc3M9ImJhLWxhYmVsLXJvdyByZXZlYWwiPjxzcGFuIGNsYXNzPSJiYS1udW0iPicgKyBudW1TdHIgKyAnPC9zcGFuPjxzcGFuIGNsYXNzPSJiYS10aXRsZSI+JyArIGl0ZW0udGl0bGUgKyAnPC9zcGFuPjwvZGl2PicKICAgICAgKyAnPGRpdiBjbGFzcz0iYmEtY29udGFpbmVyIHJldmVhbCIgaWQ9ImJhLScgKyBpICsgJyI+JwogICAgICArICAgJzxpbWcgc3JjPSInICsgKGl0ZW0uYmVmb3JlIHx8IFBMQUNFSE9MREVSX0JFRk9SRSkgKyAnIiBjbGFzcz0iYmEtaW1nIiBhbHQ9IkJlZm9yZSI+JwogICAgICArICAgJzxpbWcgc3JjPSInICsgKGl0ZW0uYWZ0ZXIgIHx8IFBMQUNFSE9MREVSX0FGVEVSKSAgKyAnIiBjbGFzcz0iYmEtaW1nIGJhLWFmdGVyIiBhbHQ9IkFmdGVyIj4nCiAgICAgICsgICAnPGRpdiBjbGFzcz0iYmEtaGFuZGxlIj48ZGl2IGNsYXNzPSJiYS1oYW5kbGUtbGluZSI+PC9kaXY+PGRpdiBjbGFzcz0iYmEtaGFuZGxlLXBpbGwiPlNMSURFPC9kaXY+PC9kaXY+JwogICAgICArICAgJzxkaXYgY2xhc3M9ImJhLXRhZ3MiPjxzcGFuIGNsYXNzPSJiYS10YWciPkJFRk9SRTwvc3Bhbj48c3BhbiBjbGFzcz0iYmEtdGFnIGFmdGVyIj5BRlRFUjwvc3Bhbj48L2Rpdj4nCiAgICAgICsgJzwvZGl2PicKICAgICAgKyAnPHAgY2xhc3M9ImJhLWNhcHRpb24gcmV2ZWFsIj7ihpAg44K544Op44Kk44OJ44GX44Gm5aSJ5YyW44KS56K66KqN44GX44Gm44GP44Gg44GV44GEPC9wPicKICAgICAgKyBpbmZvSHRtbDsKICAgIGxpc3QuYXBwZW5kQ2hpbGQod3JhcCk7CiAgfSk7CgogIC8vIOOCueODqeOCpOODgOODvOaTjeS9nOOCpOODmeODs+ODiAogIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYS1jb250YWluZXInKS5mb3JFYWNoKGZ1bmN0aW9uKGNvbnRhaW5lcil7CiAgICB2YXIgaGFuZGxlICAgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmJhLWhhbmRsZScpOwogICAgdmFyIGFmdGVySW1nID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5iYS1hZnRlcicpOwogICAgdmFyIGRyYWdnaW5nID0gZmFsc2U7CiAgICBmdW5jdGlvbiB1cGRhdGUoY2xpZW50WCl7CiAgICAgIHZhciByZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB2YXIgcG9zICA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgKChjbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHJlY3Qud2lkdGgpICogMTAwKSk7CiAgICAgIGFmdGVySW1nLnN0eWxlLmNsaXBQYXRoICA9ICdpbnNldCgwIDAgMCAnICsgcG9zICsgJyUpJzsKICAgICAgaGFuZGxlLnN0eWxlLmxlZnQgICAgICAgID0gcG9zICsgJyUnOwogICAgICBoYW5kbGUuc3R5bGUudHJhbnNmb3JtICAgPSAndHJhbnNsYXRlWCgtNTAlKSc7CiAgICB9CiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZnVuY3Rpb24oZSl7IGRyYWdnaW5nID0gdHJ1ZTsgdXBkYXRlKGUuY2xpZW50WCk7IH0pOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsICAgIGZ1bmN0aW9uKGUpeyBpZihkcmFnZ2luZykgdXBkYXRlKGUuY2xpZW50WCk7IH0pOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAgICAgIGZ1bmN0aW9uKCl7IGRyYWdnaW5nID0gZmFsc2U7IH0pOwogICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihlKXsgdXBkYXRlKGUudG91Y2hlc1swXS5jbGllbnRYKTsgfSwge3Bhc3NpdmU6dHJ1ZX0pOwogICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsICBmdW5jdGlvbihlKXsgdXBkYXRlKGUudG91Y2hlc1swXS5jbGllbnRYKTsgfSwge3Bhc3NpdmU6dHJ1ZX0pOwogIH0pOwoKICAvLyBCQSDjgrnjg6njgqTjg4Djg7zkuIvjga4gcmV2ZWFsIOimgee0oOOCkuebo+imlgogIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNiYS1saXN0IC5yZXZlYWwnKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKXsgb2JzZXJ2ZXIub2JzZXJ2ZShlbCk7IH0pOwp9CgpmdW5jdGlvbiBlc2NIdG1sTFAocyl7IHJldHVybiAoc3x8JycpLnJlcGxhY2UoLyYvZywnJmFtcDsnKS5yZXBsYWNlKC8iL2csJyZxdW90OycpLnJlcGxhY2UoLzwvZywnJmx0OycpLnJlcGxhY2UoLz4vZywnJmd0OycpOyB9CmZ1bmN0aW9uIG9wZW5MaWdodGJveChzcmMpeyB2YXIgbGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpZ2h0Ym94Jyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaWdodGJveC1pbWcnKS5zcmM9c3JjOyBsYi5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7IH0KZnVuY3Rpb24gY2xvc2VMaWdodGJveCgpeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlnaHRib3gnKS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7IH0KCi8vIC0tLS0tIOWLleeUu+ihqOekuuWItuW+oSAtLS0tLQp2YXIgdmlkZW8gICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvbW8tdmlkZW8nKTsKdmFyIHBsYWNlaG9sZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZGVvLXBsYWNlaG9sZGVyJyk7CnZhciB2aWRlb1NyYyAgICA9IHZpZGVvID8gdmlkZW8uZ2V0QXR0cmlidXRlKCdzcmMnKSA6ICcnOwppZih2aWRlb1NyYyAmJiB2aWRlb1NyYy50cmltKCkgIT09ICcnKXsKICBpZihwbGFjZWhvbGRlcikgcGxhY2Vob2xkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICB2aWRlby5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKfSBlbHNlIHsKICBpZih2aWRlbykgICAgICAgdmlkZW8uc3R5bGUuZGlzcGxheSAgICAgICA9ICdub25lJzsKICBpZihwbGFjZWhvbGRlcikgcGxhY2Vob2xkZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKfQoKLy8gLS0tLS0gUmV2ZWFsIOOCueOCr+ODreODvOODq+OCouODi+ODoeODvOOCt+ODp+ODsyAtLS0tLQp2YXIgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oZW50cmllcyl7CiAgZW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uKGUpeyBpZihlLmlzSW50ZXJzZWN0aW5nKSBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7IH0pOwp9LCB7dGhyZXNob2xkOiAwLjEyfSk7CmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZXZlYWwnKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKXsgb2JzZXJ2ZXIub2JzZXJ2ZShlbCk7IH0pOwoKLy8gQkEg44K544Op44Kk44OA44O85Yid5pyf5YyW77yIb2JzZXJ2ZXIg5a6a576p5b6M77yJCmluaXRCYVNsaWRlcnMoKTsKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgIEdBNCDjgqTjg5njg7Pjg4joqIjmuKzvvIjoqK3oqIjmm7ggdjIuMO+8iQogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKLy8gWzFdIExJTkUgQ1RB44Oc44K/44OzIOKAlCBldmVudF9jYXRlZ29yeTonY3RhJywgZXZlbnRfbGFiZWw6J2xpbmVfcHInCmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jdGEtYnRuJykuZm9yRWFjaChmdW5jdGlvbihidG4pewogIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7CiAgICBndGFnKCdldmVudCcsICdjbGljaycsIHsKICAgICAgZXZlbnRfY2F0ZWdvcnkgOiAnY3RhJywKICAgICAgZXZlbnRfbGFiZWwgICAgOiAnbGluZV9wcicKICAgIH0pOwogIH0pOwp9KTsKCi8vIFsyXSBJbnN0YWdyYW0g44Oc44K/44OzIOKAlCBldmVudF9jYXRlZ29yeTonc29jaWFsJywgZXZlbnRfbGFiZWw6J2luc3RhZ3JhbV9udW1hbicKZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm51bWFuLWlnJykuZm9yRWFjaChmdW5jdGlvbihidG4pewogIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7CiAgICBndGFnKCdldmVudCcsICdjbGljaycsIHsKICAgICAgZXZlbnRfY2F0ZWdvcnkgOiAnc29jaWFsJywKICAgICAgZXZlbnRfbGFiZWwgICAgOiAnaW5zdGFncmFtX251bWFuJwogICAgfSk7CiAgfSk7Cn0pOwoKLy8gWzNdIEJB44K544Op44Kk44OA44O85pON5L2cIOKAlCBzbGlkZXJfaW50ZXJhY3QgLyAxUFbjgavjgaTjgY0x5Zue44Gu44G/CnZhciBzbGlkZXJUcmFja2VkID0gZmFsc2U7CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uKGUpewogIGlmKCFzbGlkZXJUcmFja2VkICYmIGUudGFyZ2V0LmNsb3Nlc3QgJiYgZS50YXJnZXQuY2xvc2VzdCgnLmJhLWNvbnRhaW5lcicpKXsKICAgIHNsaWRlclRyYWNrZWQgPSB0cnVlOwogICAgZ3RhZygnZXZlbnQnLCAnc2xpZGVyX2ludGVyYWN0JywgewogICAgICBldmVudF9jYXRlZ29yeSA6ICdlbmdhZ2VtZW50JywKICAgICAgZXZlbnRfbGFiZWwgICAgOiAnYmFfc2xpZGVyJwogICAgfSk7CiAgfQp9LCB7cGFzc2l2ZTp0cnVlfSk7CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihlKXsKICBpZighc2xpZGVyVHJhY2tlZCAmJiBlLnRhcmdldC5jbG9zZXN0ICYmIGUudGFyZ2V0LmNsb3Nlc3QoJy5iYS1jb250YWluZXInKSl7CiAgICBzbGlkZXJUcmFja2VkID0gdHJ1ZTsKICAgIGd0YWcoJ2V2ZW50JywgJ3NsaWRlcl9pbnRlcmFjdCcsIHsKICAgICAgZXZlbnRfY2F0ZWdvcnkgOiAnZW5nYWdlbWVudCcsCiAgICAgIGV2ZW50X2xhYmVsICAgIDogJ2JhX3NsaWRlcicKICAgIH0pOwogIH0KfSwge3Bhc3NpdmU6dHJ1ZX0pOwoKLy8gWzRdIFdoeSBLSU1BUlXjgrnjg4jjg7zjg6rjg7zoqq3kuoYg4oCUIHJlYWRfc3RvcnkgLyAzMCXooajnpLogw5cgNeenkuS7peS4igp2YXIgc3RvcnlUcmFja2VkID0gZmFsc2U7CnZhciBzdG9yeVRpbWVyICAgPSBudWxsOwp2YXIgc3RvcnlPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihmdW5jdGlvbihlbnRyaWVzKXsKICBlbnRyaWVzLmZvckVhY2goZnVuY3Rpb24oZW50cnkpewogICAgaWYoZW50cnkuaXNJbnRlcnNlY3RpbmcgJiYgIXN0b3J5VHJhY2tlZCl7CiAgICAgIC8vIDXnp5LplpPntpnntprooajnpLrjgafjgqvjgqbjg7Pjg4gKICAgICAgc3RvcnlUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICBzdG9yeVRyYWNrZWQgPSB0cnVlOwogICAgICAgIGd0YWcoJ2V2ZW50JywgJ3JlYWRfc3RvcnknLCB7CiAgICAgICAgICBldmVudF9jYXRlZ29yeSA6ICdlbmdhZ2VtZW50JywKICAgICAgICAgIGV2ZW50X2xhYmVsICAgIDogJ3doeV9raW1hcnUnCiAgICAgICAgfSk7CiAgICAgIH0sIDUwMDApOwogICAgfSBlbHNlIHsKICAgICAgLy8g44K544Kv44Ot44O844Or44Ki44Km44OI44GX44Gf44KJ44K/44Kk44Oe44O844Oq44K744OD44OICiAgICAgIGNsZWFyVGltZW91dChzdG9yeVRpbWVyKTsKICAgICAgc3RvcnlUaW1lciA9IG51bGw7CiAgICB9CiAgfSk7Cn0sIHt0aHJlc2hvbGQ6IDAuM30pOwp2YXIgd2h5U2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aHkta2ltYXJ1Jyk7CmlmKHdoeVNlY3Rpb24pIHN0b3J5T2JzZXJ2ZXIub2JzZXJ2ZSh3aHlTZWN0aW9uKTsKPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg==';
function _getLp(){
  try{ return decodeURIComponent(escape(atob(_LP_B64))); }catch(e){ return ''; }
}
function generateAndDownload(){
  var s=saveSettings();
  var html=_getLp();
  if(!html){ showToast('âš  ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼'); return; }
  html=applySettings(html,s);
  var theme=s['theme']||'dark';
  var themeName=theme.charAt(0).toUpperCase()+theme.slice(1);
  downloadHTML(html,'KIMARU_'+themeName+'.html');
  dirty=false;
  document.getElementById('save-bar').classList.remove('show');
  showToast('âœ… KIMARU_'+themeName+'.html ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼');
}

function applySettings(html,s){
  // BA data JSON
  var baJson=JSON.stringify(baCards.map(function(item){
    return {
      title  : item.title   || '',
      before : item.before  || '',
      after  : item.after   || '',
      finish : item.finish  || '',
      color  : item.color   || '',
      grout  : item.grout   || '',
      sample : item.sample  || '',
      angles : (item.angles || []).map(function(a){ return {src:a.src||'', label:a.label||''}; })
    };
  }));
  html=html.replace(/(<script type="application\/json" id="ba-data">)([\s\S]*?)(<\/script>)/,'$1'+baJson+'$3');

  // ãƒ†ãƒ¼ãƒå›ºå®šï¼ˆåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã¯å‰Šé™¤æ¸ˆã¿ï¼‰
  var theme = s['theme'] || 'dark';
  html = html.replace(/data-theme="%%KIMARU_THEME%%"/, 'data-theme="'+theme+'"');

  // GA4 æ¸¬å®šID
  if(s['ga4-id'] && s['ga4-id'].trim()){
    html=html.replace(/G-0VF277F6RX/g, s['ga4-id'].trim());
  }
  // LINE URL
  html=html.replace(/href="[^"]*"(\s*class="cta-btn)/g,'href="'+s['line-url']+'"$1');
  // Instagram URL
  html=html.replace(/href="[^"]*"(\s*class="numan-ig)/g,'href="'+s['ig-url']+'"$1');
  // Video
  html=html.replace(/(<video[^>]*src=")[^"]*(")/,'$1'+s['video-url']+'$2');
  if(s['video-title']) html=html.replace(/(<h2 class="section-title">)ç´ æã®ä¸–ç•Œã‚’ã€æ˜ åƒã§ã€‚(<\/h2>)/,'$1'+s['video-title']+'$2');
  if(s['video-body'])  html=html.replace(/(<p class="section-body">)é³¥è¦³å›³ã‹ã‚‰[^<]*(<\/p>)/,'$1'+s['video-body']+'$2');
  html=html.replace(/(<video[^>]*poster=")[^"]*(")/,'$1'+s['video-poster']+'$2');

  // Hero catch
  // ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ç½®æ›
  var catchTexts=[s['catch-1'],s['catch-2'],s['catch-3'],s['catch-4'],s['catch-5']];
  var catchDefaults=['ã‚ãªãŸã®æŠ€è¡“ã¯ã€ã‚‚ã£ã¨<span>ä¼ã‚ã‚‹</span>ã€‚','è·äººã®ä»•äº‹ãŒã€ç”»é¢ã®ä¸­ã§<span>å‹•ãå‡ºã™</span>ã€‚','ææ¡ˆãŒå¤‰ã‚ã‚Œã°ã€<span>å¥‘ç´„</span>ãŒå¤‰ã‚ã‚‹ã€‚','ã‚¹ãƒãƒ›ä¸€ã¤ã§ã€<span>ãƒ—ãƒ­</span>ã®ææ¡ˆæ›¸ã€‚','è¦‹ã›æ–¹ã‚’å¤‰ãˆã‚‹ã ã‘ã§ã€<span>çµæœ</span>ãŒå¤‰ã‚ã‚‹ã€‚'];
  html=html.replace(/<div class="catch-item( active)?">.*?<\/div>/g,function(m,act,offset){return m;});
  // å„catch-itemã‚’ç½®æ›
  catchTexts.forEach(function(txt,i){
    if(!txt||!txt.trim()) txt=catchDefaults[i];
    var re=new RegExp('<div class="catch-item'+(i===0?' active':'')+'">.*?<\/div>');
    html=html.replace(re,'<div class="catch-item'+(i===0?' active':'')+'">'+txt+'<\/div>');
  });
  var catchLines=s['hero-catch'].split('\n').filter(l=>l.trim());
  if(catchLines.length){
    var newCatch=catchLines.map(l=>'<span>'+l+'</span>').join('');
    html=html.replace(/(<div class="hero-catch">)([\s\S]*?)(<\/div>[\s\n]*<\/div>[\s\n]*<p class="hero-sub">)/,function(m,p1,p2,p3){return p1+newCatch+p3.replace(/^(<\/div>[\s\n]*<\/div>[\s\n]*)/,'</div>\n    </div>\n    ');});
  }
  // Hero sub
  html=html.replace(/(<p class="hero-sub">)([\s\S]*?)(<\/p>)/,'$1'+s['hero-sub'].replace(/\n/g,'<br>')+'$3');
  // Message
  html=html.replace(/(<p class="message-main">)([\s\S]*?)(<\/p>)/,'$1'+s['msg-main'].replace(/\n/g,'<br>')+'$3');
  html=html.replace(/(<p class="message-body">)([\s\S]*?)(<\/p>)/,'$1'+s['msg-body'].replace(/\n/g,'<br>')+'$3');
  // CTA title
  html=html.replace(/(<h2 class="cta-title reveal">)([\s\S]*?)(<\/h2>)/,'$1'+s['cta-title'].replace(/\n/g,'<br>')+'$3');
  // Gallery teaser
  var galleryTitle   = s['gallery-title']   || 'ãã®ä»–ã®æ–½å·¥äº‹ä¾‹ã¯ã“ã¡ã‚‰';
  var galleryBody    = s['gallery-body']    || 'ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ãƒ»ç´ æåˆ¥ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’æº–å‚™ã—ã¦ã„ã¾ã™ã€‚';
  var galleryBtnText = s['gallery-btn-text']|| 'æ–½å·¥äº‹ä¾‹ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’è¦‹ã‚‹';
  var galleryUrl     = s['gallery-url']     || '';
  html = html.replace(/(<h2 class="section-title" style="margin-bottom:12px;">)[^<]*(<\/h2>)/, '$1'+galleryTitle+'$2');
  html = html.replace(/(<p class="section-body" style="max-width:480px;margin:0 auto 28px;">)[^<]*(<\/p>)/, '$1'+galleryBody+'$2');
  // ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆSVGã®å‰ã®ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ¼ãƒ‰ï¼‰
  html = html.replace(/(gallery-teaser-btn[^>]*>[\s\S]*?<\/span>\s*)([^<]+)(\s*<svg)/, '$1'+galleryBtnText+'$3');
  if(galleryUrl){
    // URLã‚ã‚Š â†’ ãƒªãƒ³ã‚¯æœ‰åŠ¹åŒ–ãƒ»ãƒãƒƒã‚¸éè¡¨ç¤º
    html = html.replace(/href="#" class="gallery-teaser-btn" onclick="return false;"/, 'href="'+galleryUrl+'" class="gallery-teaser-btn" target="_blank" rel="noopener"');
    html = html.replace(/<span class="gallery-teaser-badge">æº–å‚™ä¸­<\/span>\s*/, '');
  }
  // Numan name
  html=html.replace(/(<h2 class="numan-name">)([\s\S]*?)(<\/h2>)/,'$1'+s['numan-name-ja'].replace(/\n/g,'<br>')+'$3');
  html=html.replace(/(<p class="numan-title">)([\s\S]*?)(<\/p>)/,'$1'+s['numan-name-en']+'$3');
  html=html.replace(/(<span class="numan-meta-text">ä¸‰é‡çœŒ[^<]*)(<\/span>)/,'<span class="numan-meta-text">'+s['numan-location']+'$2');
  html=html.replace(/(<span class="numan-meta-text">ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³æ­´[^<]*)(<\/span>)/,'<span class="numan-meta-text">'+s['numan-career']+'$2');
  // Numan body
  var nbHtml=s['numan-body'].replace(/\n\n/g,'</p>\n<p class="numan-body reveal">').replace(/\n/g,'<br>');
  html=html.replace(/(<p class="numan-body reveal">)([\s\S]*?)(<\/p>\s*<a)/,'$1'+nbHtml+'$3');

  // Images (logo / numan photos)
  var imgMap={'numan-color':'images/numan_color.jpg','numan-portrait':'images/numan_portrait.jpg','footer-logo-dark':'images/footer_logo_dark.jpg','footer-logo-light':'images/footer_logo_light.jpg','logo':'images/logo.png'};
  Object.keys(imageData).forEach(function(key){
    if(!imgMap[key])return;
    var src=imgMap[key].replace(/\./g,'\\.').replace(/\//g,'\\/');
    html=html.replace(new RegExp('src="'+src+'"','g'),'src="'+imageData[key].base64+'"');
  });

  // Section visibility
  if(!s['sec-ba'])html=html.replace(/(id="ba-section"[^>]*>)([\s\S]*?)(<\/section>[\s\S]*?<!-- VIDEO)/,function(m,p1,p2,p3){return p1+'<div style="display:none">'+p2+'</div>'+p3;});
  if(!s['sec-video'])html=html.replace(/(class="[^"]*video-section[^"]*"[^>]*>)([\s\S]*?)(<\/section>[\s\S]*?<!-- MESSAGE)/,function(m,p1,p2,p3){return p1+'<div style="display:none">'+p2+'</div>'+p3;});
  if(!s['sec-profile'])html=html.replace(/(<!-- NUMAN SECTION -->)([\s\S]*?)(<!-- WHY)/, '$1<div style="display:none">$2</div>$3');
  if(!s['sec-why'])html=html.replace(/(<!-- WHY KIMARU STORY -->)([\s\S]*?)(<!-- CTA)/,'$1<div style="display:none">$2</div>$3');

  return html;
}

function downloadHTML(html,filename){
  var blob=new Blob([html],{type:'text/html;charset=utf-8'});
  var a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=filename;a.click();URL.revokeObjectURL(a.href);
}

function previewLP(){
  var s=saveSettings();
  var _ph=_getLp();
  if(_ph){var m=applySettings(_ph,s);var blob=new Blob([m],{type:'text/html'});window.open(URL.createObjectURL(blob),'_blank');}
}

function showToast(msg){
  var t=document.getElementById('toast');document.getElementById('toast-msg').textContent=msg;
  t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3500);
}


// ===== PROJECT SAVE / LOAD =====
function openSaveModal(){
  document.getElementById('proj-save-name').value='';
  document.getElementById('modal-save').classList.add('open');
  setTimeout(()=>document.getElementById('proj-save-name').focus(),100);
}
function openLoadModal(){
  renderProjList();
  document.getElementById('modal-load').classList.add('open');
}
function closeProjModal(id){document.getElementById(id).classList.remove('open');}

function saveProject(){
  var name=document.getElementById('proj-save-name').value.trim();
  if(!name){alert('ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');return;}
  var s=saveSettings();
  var projects={};
  try{projects=JSON.parse(localStorage.getItem('kimaru-projects')||'{}');}catch(e){}
  projects[name]={settings:s,savedAt:new Date().toLocaleString('ja-JP')};
  localStorage.setItem('kimaru-projects',JSON.stringify(projects));
  closeProjModal('modal-save');
  showToast('ã€Œ'+name+'ã€ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
}

function renderProjList(){
  var projects={};
  try{projects=JSON.parse(localStorage.getItem('kimaru-projects')||'{}');}catch(e){}
  var names=Object.keys(projects);
  var list=document.getElementById('proj-list');
  if(!names.length){list.innerHTML='<div class="proj-empty">ä¿å­˜æ¸ˆã¿ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Šã¾ã›ã‚“</div>';return;}
  window._projNames=names;
  list.innerHTML=names.map(function(name,idx){
    var p=projects[name];
    return '<div class="proj-item">'
      +'<div style="flex:1;min-width:0;">'
      +'<div class="proj-item-name">'+escHtml(name)+'</div>'
      +'<div class="proj-item-date">'+p.savedAt+'</div>'
      +'</div>'
      +'<div class="proj-item-btns">'
      +'<button class="btn btn-primary" style="padding:6px 14px;font-size:.7rem;" onclick="loadProjectByIndex('+idx+')">å‘¼ã³å‡ºã™</button>'
      +'<button class="btn btn-danger" style="padding:6px 10px;" onclick="deleteProjectByIndex('+idx+')">&#10005;</button>'
      +'</div>'
      +'</div>';
  }).join('');
}

function loadProjectByIndex(i){
  var name=window._projNames&&window._projNames[i];
  if(name)loadProject(name);
}
function deleteProjectByIndex(i){
  var name=window._projNames&&window._projNames[i];
  if(name)deleteProject(name);
}

function loadProject(name){
  var projects={};
  try{projects=JSON.parse(localStorage.getItem('kimaru-projects')||'{}');}catch(e){}
  if(!projects[name])return;
  if(!confirm('ã€Œ'+name+'ã€ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚ç¾åœ¨ã®ç·¨é›†å†…å®¹ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ'))return;
  localStorage.setItem('kimaru-settings',JSON.stringify(projects[name].settings));
  closeProjModal('modal-load');
  loadDefaults();
  showToast('ã€Œ'+name+'ã€ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸã€‚');
}

function deleteProject(name){
  if(!confirm('ã€Œ'+name+'ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ'))return;
  var projects={};
  try{projects=JSON.parse(localStorage.getItem('kimaru-projects')||'{}');}catch(e){}
  delete projects[name];
  localStorage.setItem('kimaru-projects',JSON.stringify(projects));
  renderProjList();
  showToast('å‰Šé™¤ã—ã¾ã—ãŸã€‚');
}

// INIT
loadDefaults();
</script>

<!-- PROJECT SAVE MODAL -->
<div class="proj-modal" id="modal-save" onclick="if(event.target===this)closeProjModal('modal-save')">
  <div class="proj-box">
    <h3>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿å­˜</h3>
    <div class="form-row"><label class="field-label">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå</label><input type="text" id="proj-save-name" placeholder="ä¾‹ï¼šç„é–¢ã‚¢ãƒ—ãƒ­ãƒ¼ãƒææ¡ˆ Aãƒ‘ã‚¿ãƒ¼ãƒ³"></div>
    <div style="display:flex;gap:10px;margin-top:16px;">
      <button class="btn btn-primary" style="flex:1;" onclick="saveProject()">ğŸ’¾ ä¿å­˜ã™ã‚‹</button>
      <button class="btn btn-secondary" onclick="closeProjModal('modal-save')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
    </div>
  </div>
</div>
<!-- PROJECT LOAD MODAL -->
<div class="proj-modal" id="modal-load" onclick="if(event.target===this)closeProjModal('modal-load')">
  <div class="proj-box">
    <h3>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å‘¼ã³å‡ºã™</h3>
    <div id="proj-list"></div>
    <button class="btn btn-secondary" style="width:100%;margin-top:12px;" onclick="closeProjModal('modal-load')">é–‰ã˜ã‚‹</button>
  </div>
</div>
</body>
</html>
