<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>KIMARU ç®¡ç†ç”»é¢</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500&family=Cormorant+Garamond:wght@300;400&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0;}
:root{
  --gold:#c9a84c;--bg:#0e0e0e;--bg2:#161616;--bg3:#1e1e1e;
  --border:rgba(201,168,76,0.18);--text:#eeebe4;--text2:#888;
  --radius:10px;--green:#4caf7d;--red:#e05555;
}
body{background:var(--bg);color:var(--text);font-family:'Noto Sans JP',sans-serif;font-weight:300;min-height:100vh;}
.header{background:var(--bg2);border-bottom:1px solid var(--border);padding:18px 28px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;}
.header-logo{font-family:'Cormorant Garamond',serif;font-size:1.4rem;color:var(--gold);letter-spacing:4px;}
.header-logo span{color:var(--text2);font-size:.72rem;letter-spacing:2px;margin-left:10px;font-family:'Noto Sans JP',sans-serif;}
.hbtns{display:flex;gap:10px;}
.btn{font-family:'Noto Sans JP',sans-serif;font-size:.78rem;font-weight:400;letter-spacing:1px;padding:10px 22px;border-radius:6px;cursor:pointer;border:none;transition:all .2s;display:flex;align-items:center;gap:7px;}
.btn-primary{background:var(--gold);color:#111;}
.btn-primary:hover{opacity:.85;transform:translateY(-1px);}
.btn-secondary{background:transparent;color:var(--text2);border:1px solid var(--border);}
.btn-secondary:hover{border-color:var(--gold);color:var(--gold);}
.btn-danger{background:transparent;color:var(--red);border:1px solid rgba(224,85,85,.3);font-size:.72rem;padding:7px 14px;}
.btn-danger:hover{background:rgba(224,85,85,.1);}
.btn-add{background:rgba(201,168,76,.08);color:var(--gold);border:1px dashed rgba(201,168,76,.4);width:100%;padding:14px;border-radius:8px;font-size:.82rem;letter-spacing:1px;margin-top:16px;}
.btn-add:hover{background:rgba(201,168,76,.14);}

/* LAYOUT */
.layout{display:grid;grid-template-columns:210px 1fr;min-height:calc(100vh - 61px);}
.sidebar{background:var(--bg2);border-right:1px solid var(--border);padding:20px 0;}
.sidebar-label{font-size:.6rem;letter-spacing:3px;color:var(--text2);padding:14px 14px 6px;text-transform:uppercase;}
.nav-item{display:flex;align-items:center;gap:9px;padding:9px 14px;border-radius:6px;cursor:pointer;font-size:.8rem;color:var(--text2);transition:all .2s;border:none;background:none;width:100%;text-align:left;}
.nav-item:hover{background:var(--bg3);color:var(--text);}
.nav-item.active{background:rgba(201,168,76,.1);color:var(--gold);border-left:2px solid var(--gold);}
.main{padding:36px 40px 120px;}
.page{display:none;}.page.active{display:block;}
.page-title{font-family:'Cormorant Garamond',serif;font-size:1.7rem;font-weight:300;color:var(--text);margin-bottom:4px;letter-spacing:2px;}
.page-sub{font-size:.78rem;color:var(--text2);margin-bottom:32px;}

/* CARDS */
.card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius);margin-bottom:20px;overflow:hidden;}
.card-head{padding:16px 22px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px;}
.card-icon{font-size:1rem;}
.card-name{font-size:.88rem;font-weight:500;letter-spacing:.5px;}
.card-desc{font-size:.72rem;color:var(--text2);margin-left:auto;}
.card-body{padding:22px;}

/* BA SLIDER CARD */
.ba-card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius);margin-bottom:16px;overflow:hidden;}
.ba-card-head{padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px;}
.ba-card-num{font-family:'Cormorant Garamond',serif;font-size:1.4rem;color:var(--gold);opacity:.5;line-height:1;}
.ba-card-title-input{flex:1;background:transparent;border:none;color:var(--text);font-family:'Noto Sans JP',sans-serif;font-size:.88rem;outline:none;border-bottom:1px solid transparent;transition:border-color .2s;padding:2px 4px;}
.ba-card-title-input:focus{border-bottom-color:var(--gold);}
.ba-card-body{padding:18px;}
.ba-img-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:16px;}
.img-drop-label{font-size:.65rem;letter-spacing:2px;color:var(--text2);margin-bottom:7px;text-transform:uppercase;}
.img-drop{border:2px dashed var(--border);border-radius:8px;overflow:hidden;aspect-ratio:16/9;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;position:relative;background:var(--bg3);}
.img-drop:hover{border-color:var(--gold);}
.img-drop.has-img{border-style:solid;border-color:rgba(201,168,76,.4);}
.img-drop img.preview{width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0;}
.img-drop-overlay{position:absolute;inset:0;background:rgba(0,0,0,.55);display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;transition:opacity .2s;z-index:1;}
.img-drop:hover .img-drop-overlay,.img-drop:not(.has-img) .img-drop-overlay{opacity:1;}
.img-drop-icon{font-size:1.6rem;margin-bottom:5px;color:var(--gold);}
.img-drop-text{font-size:.68rem;color:var(--text2);text-align:center;}
.img-drop input[type=file]{display:none;}
.img-fname{font-size:.68rem;color:var(--text2);margin-top:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}

/* INFO FIELDS */
.info-fields{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:14px;}
.sample-row{display:flex;align-items:center;gap:14px;}
/* Drive URL options */
.drive-opt{display:flex;align-items:center;gap:10px;background:var(--bg3);border:1px solid var(--border);border-radius:8px;padding:10px 14px;cursor:pointer;transition:all .2s;}
.drive-opt:hover{border-color:var(--gold);}
.drive-opt.selected{border-color:var(--gold);background:rgba(201,168,76,.08);}
.drive-opt-num{font-family:"Cormorant Garamond",serif;font-size:1.3rem;color:var(--gold);opacity:.6;line-height:1;flex-shrink:0;}
.drive-opt-info{flex:1;min-width:0;}
.drive-opt-label{font-size:.78rem;font-weight:500;color:var(--text);margin-bottom:3px;}
.drive-opt-url{font-size:.65rem;color:var(--text2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
/* Theme picker */
.theme-picker{display:flex;gap:10px;}
.theme-btn{flex:1;background:var(--bg3);border:2px solid var(--border);border-radius:10px;padding:14px 10px;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:7px;transition:all .2s;}
.theme-btn:hover{border-color:rgba(201,168,76,.5);}
.theme-btn.active{border-color:var(--gold);background:rgba(201,168,76,.08);}
.theme-swatch{width:36px;height:36px;border-radius:50%;border:2px solid rgba(255,255,255,.15);}
.dark-swatch{background:#111;box-shadow:inset 0 0 0 8px #c9a84c;}
.light-swatch{background:#f5f3ef;box-shadow:inset 0 0 0 8px #c9a84c;}
.ink-swatch{background:#f8f7f4;box-shadow:inset 0 0 0 8px #1a1a1a;}
.theme-label{font-size:.82rem;font-weight:500;color:var(--text);}
.theme-desc{font-size:.65rem;color:var(--text2);text-align:center;}
/* Project save/load */
.proj-modal{position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:500;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .25s;}
.proj-modal.open{opacity:1;pointer-events:all;}
.proj-box{background:var(--bg2);border:1px solid var(--border);border-radius:12px;padding:28px;width:420px;max-width:90vw;max-height:80vh;overflow-y:auto;}
.proj-box h3{font-family:'Cormorant Garamond',serif;font-size:1.2rem;font-weight:300;color:var(--gold);letter-spacing:2px;margin-bottom:20px;}
.proj-item{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;background:var(--bg3);border-radius:6px;margin-bottom:8px;cursor:pointer;transition:background .2s;border:1px solid transparent;}
.proj-item:hover{background:rgba(201,168,76,.1);border-color:var(--border);}
.proj-item-name{font-size:.85rem;}
.proj-item-date{font-size:.68rem;color:var(--text2);}
.proj-item-btns{display:flex;gap:6px;flex-shrink:0;}
.proj-empty{font-size:.8rem;color:var(--text2);text-align:center;padding:24px;}

.sample-preview-wrap{position:relative;width:64px;height:64px;flex-shrink:0;}
.sample-preview{width:64px;height:64px;border-radius:7px;object-fit:cover;border:1px solid var(--border);display:none;}
.sample-preview.visible{display:block;}

/* FORM */
label.field-label{display:block;font-size:.65rem;letter-spacing:2px;color:var(--text2);margin-bottom:7px;text-transform:uppercase;}
input[type=text],input[type=url],textarea{width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:6px;padding:11px 13px;color:var(--text);font-family:'Noto Sans JP',sans-serif;font-size:.85rem;font-weight:300;outline:none;transition:border-color .2s;}
input[type=text]:focus,input[type=url]:focus,textarea:focus{border-color:var(--gold);}
textarea{resize:vertical;line-height:1.9;}
.hint{font-size:.68rem;color:var(--text2);margin-top:5px;line-height:1.7;}
.hint a{color:var(--gold);text-decoration:none;}
.form-row{margin-bottom:18px;}.form-row:last-child{margin-bottom:0;}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
.form-grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px;}

/* TOGGLE */
.toggle-row{display:flex;align-items:center;justify-content:space-between;padding:12px 0;border-bottom:1px solid rgba(255,255,255,.04);}
.toggle-row:last-child{border-bottom:none;}
.toggle-info .t-label{font-size:.83rem;font-weight:400;}
.toggle-info .t-desc{font-size:.7rem;color:var(--text2);margin-top:2px;}
.toggle{position:relative;width:42px;height:22px;flex-shrink:0;margin-left:14px;}
.toggle input{display:none;}
.toggle-track{display:block;width:100%;height:100%;background:var(--bg3);border:1px solid var(--border);border-radius:11px;transition:all .2s;cursor:pointer;}
.toggle input:checked+.toggle-track{background:rgba(201,168,76,.3);border-color:var(--gold);}
.toggle-thumb{position:absolute;top:3px;left:3px;width:14px;height:14px;background:var(--text2);border-radius:50%;transition:all .2s;pointer-events:none;}
.toggle input:checked~.toggle-thumb{left:23px;background:var(--gold);}

/* LOGO GRID */
.logo-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;}
.logo-drop{border:2px dashed var(--border);border-radius:8px;aspect-ratio:1;overflow:hidden;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;position:relative;background:var(--bg3);}
.logo-drop:hover{border-color:var(--gold);}
.logo-drop.has-img{border-style:solid;border-color:rgba(201,168,76,.4);}
.logo-drop img.preview{width:100%;height:100%;object-fit:cover;position:absolute;}
.logo-drop input[type=file]{display:none;}

/* SAVE BAR */
.save-bar{position:fixed;bottom:0;left:0;right:0;background:var(--bg2);border-top:1px solid var(--border);padding:14px 28px;display:flex;align-items:center;justify-content:space-between;transform:translateY(100%);transition:transform .3s;z-index:200;}
.save-bar.show{transform:translateY(0);}
.save-msg{font-size:.78rem;color:var(--text2);}
.save-msg strong{color:var(--gold);}
.save-btns{display:flex;gap:10px;}

/* TOAST */
.toast{position:fixed;top:72px;right:20px;background:var(--bg2);border:1px solid var(--green);border-radius:8px;padding:12px 18px;font-size:.8rem;color:var(--text);display:flex;align-items:center;gap:9px;transform:translateX(120%);transition:transform .3s;z-index:300;}
.toast.show{transform:translateX(0);}

/* BA PREVIEW */
.ba-preview-panel{background:var(--bg3);border-radius:8px;overflow:hidden;margin-bottom:8px;}
.ba-preview-slider{position:relative;width:100%;aspect-ratio:16/9;cursor:ew-resize;user-select:none;}
.ba-preview-img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;}
.ba-preview-after{clip-path:inset(0 0 0 50%);z-index:2;}
.ba-preview-handle{position:absolute;top:0;bottom:0;left:50%;transform:translateX(-50%);width:30px;z-index:10;display:flex;flex-direction:column;align-items:center;pointer-events:none;}
.ba-preview-line{width:2px;flex:1;background:var(--gold);}
.ba-preview-pill{background:var(--gold);color:#111;font-size:.5rem;font-weight:700;letter-spacing:2px;padding:4px 6px;}
.ba-preview-empty{display:flex;align-items:center;justify-content:center;height:120px;color:var(--text2);font-size:.78rem;}

@media(max-width:768px){
  .layout{grid-template-columns:1fr;}
  .sidebar{display:none;}
  .main{padding:20px 14px 120px;}
  .form-grid,.form-grid3,.info-fields,.ba-img-grid,.logo-grid{grid-template-columns:1fr;}
}
</style>
</head>
<body>

<header class="header">
  <div class="header-logo">KIMARU <span>ç®¡ç†ç”»é¢</span></div>
  <div class="hbtns">
    <button class="btn btn-secondary" onclick="previewLP()">ğŸ‘ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
    <button class="btn btn-primary" onclick="generateAndDownload()">â¬‡ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
  </div>
</header>

<div class="layout">
  <nav class="sidebar">
    <div class="sidebar-label">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</div>
    <button class="nav-item active" onclick="showPage('ba',this)"><span>â†”ï¸</span>BAã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼</button>
    <button class="nav-item" onclick="showPage('urls',this)"><span>ğŸ”—</span>URLè¨­å®š</button>
    <button class="nav-item" onclick="showPage('text',this)"><span>âœï¸</span>ãƒ†ã‚­ã‚¹ãƒˆ</button>
    <button class="nav-item" onclick="showPage('logos',this)"><span>ğŸ·</span>ãƒ­ã‚´</button>
    <button class="nav-item" onclick="showPage('profile',this)"><span>ğŸ‘¤</span>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</button>
    <button class="nav-item" onclick="showPage('sections',this)"><span>âš™ï¸</span>ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š</button>
    <div class="sidebar-label" style="margin-top:16px;">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</div>
    <button class="nav-item" onclick="openSaveModal()"><span>ğŸ’¾</span>ä¿å­˜ã™ã‚‹</button>
    <button class="nav-item" onclick="openLoadModal()"><span>ğŸ“‚</span>å‘¼ã³å‡ºã™</button>
  </nav>

  <main class="main">

    <!-- ===== BA SLIDER ===== -->
    <div class="page active" id="page-ba">
      <div class="page-title">BAã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼</div>
      <div class="page-sub">æ–½å·¥äº‹ä¾‹ã®Before/Afterã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’ç®¡ç†ã—ã¾ã™ã€‚è¿½åŠ ãƒ»å‰Šé™¤ãƒ»ä¸¦ã³æ›¿ãˆãŒå¯èƒ½ã§ã™ã€‚</div>
      <div id="ba-cards"></div>
      <button class="btn btn-add" onclick="addBaCard()">ï¼‹ ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’è¿½åŠ ã™ã‚‹</button>
    </div>

    <!-- ===== URL ===== -->
    <div class="page" id="page-urls">
      <div class="page-title">URL è¨­å®š</div>
      <div class="page-sub">LINEãƒ»Instagramãƒ»å‹•ç”»ã®URLã‚’è¨­å®šã—ã¾ã™ã€‚</div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ¨</span><span class="card-name">ãƒ†ãƒ¼ãƒ</span><span class="card-desc">æ›¸ãå‡ºã™LPã®é…è‰²</span></div>
        <div class="card-body">
          <div class="form-row">
            <label class="field-label">ãƒ†ãƒ¼ãƒã‚’é¸æŠ</label>
            <div class="theme-picker" id="theme-picker">
              <button class="theme-btn active" data-theme="dark"  onclick="selectTheme('dark',this)">
                <span class="theme-swatch dark-swatch"></span>
                <span class="theme-label">Dark</span>
                <span class="theme-desc">é»’èƒŒæ™¯ãƒ»é‡‘ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ</span>
              </button>
              <button class="theme-btn" data-theme="light" onclick="selectTheme('light',this)">
                <span class="theme-swatch light-swatch"></span>
                <span class="theme-label">Light</span>
                <span class="theme-desc">ãƒ™ãƒ¼ã‚¸ãƒ¥ãƒ»æ¸©ã‹ã¿</span>
              </button>
              <button class="theme-btn" data-theme="ink"   onclick="selectTheme('ink',this)">
                <span class="theme-swatch ink-swatch"></span>
                <span class="theme-label">Ink</span>
                <span class="theme-desc">ç™½é»’ãƒ»ã‚·ãƒ£ãƒ¼ãƒ—</span>
              </button>
            </div>
            <div class="hint" style="margin-top:10px;">æ›¸ãå‡ºã—ãŸHTMLã¯ã“ã®ãƒ†ãƒ¼ãƒã§å®Œå…¨å›ºå®šã•ã‚Œã¾ã™ï¼ˆåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ãªã—ï¼‰ã€‚</div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ“Š</span><span class="card-name">GA4 è¨­å®š</span><span class="card-desc">Google Analytics</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">æ¸¬å®šIDï¼ˆGA4ï¼‰</label><input type="text" id="ga4-id" placeholder="G-XXXXXXXXXX" oninput="markDirty()"><div class="hint">ç¾åœ¨ã®è¨­å®š: G-0VF277F6RXã€€å¤‰æ›´ã™ã‚‹å ´åˆã®ã¿å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</div></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ’¬</span><span class="card-name">LINE</span><span class="card-desc">ãƒ¡ã‚¤ãƒ³CTA ã‚¤ãƒ™ãƒ³ãƒˆ: click / cta / line_pr</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">LINE URL</label><input type="url" id="line-url" placeholder="https://lin.ee/xxxxxxx" oninput="markDirty()"><div class="hint"><a href="https://manager.line.biz/" target="_blank">LINE Official Account Manager</a> â†’ å‹ã ã¡è¿½åŠ ã‚¬ã‚¤ãƒ‰</div></div>
          <div class="form-row"><label class="field-label">CTAãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆ</label><input type="text" id="line-btn-text" placeholder="LINE ã§ãŠå•ã„åˆã‚ã›" oninput="markDirty()"></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ“·</span><span class="card-name">Instagram</span><span class="card-desc">ã‚¤ãƒ™ãƒ³ãƒˆ: click / social / instagram_numan</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">Instagram URL</label><input type="url" id="ig-url" placeholder="https://www.instagram.com/cementart_numan/" oninput="markDirty()"></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ¬</span><span class="card-name">å‹•ç”»</span><span class="card-desc">Cinematic View</span></div>
        <div class="card-body">
          <div class="form-row">
            <label class="field-label">Googleãƒ‰ãƒ©ã‚¤ãƒ–URL â†’ è‡ªå‹•å¤‰æ›</label>
            <div style="display:flex;gap:8px;">
              <input type="url" id="drive-raw-url" placeholder="https://drive.google.com/file/d/XXXXX/view" style="flex:1;">
              <button class="btn btn-primary" style="white-space:nowrap;flex-shrink:0;" onclick="convertDriveUrl()">å¤‰æ›ã™ã‚‹</button>
            </div>
            <div class="hint">ãƒ‰ãƒ©ã‚¤ãƒ–ã®URLã‚’ãã®ã¾ã¾è²¼ã£ã¦ã€Œå¤‰æ›ã™ã‚‹ã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚<br>å…±æœ‰è¨­å®šã¯ <strong style="color:var(--gold)">ã€Œãƒªãƒ³ã‚¯ã‚’çŸ¥ã£ã¦ã„ã‚‹å…¨å“¡ãŒé–²è¦§å¯ã€</strong> ã«ã—ã¦ãã ã•ã„ã€‚</div>
          </div>
          <div id="drive-results" style="display:none;">
            <div class="form-row">
              <label class="field-label">å¤‰æ›çµæœ â€” ä½¿ã†URLã‚’é¸ã‚“ã§ãã ã•ã„</label>
              <div id="drive-url-options" style="display:flex;flex-direction:column;gap:8px;"></div>
              <div class="hint" style="margin-top:8px;">
                <strong style="color:var(--gold)">â‘  ç›´æ¥DL</strong> ãŒä¸€ç•ªã‚·ãƒ³ãƒ—ãƒ«ã€‚å¤§ãã„ãƒ•ã‚¡ã‚¤ãƒ«(100MBè¶…)ã¯â‘¡ã‚’è©¦ã—ã¦ãã ã•ã„ã€‚<br>
                ã†ã¾ãå†ç”Ÿã§ããªã„å ´åˆã¯â‘¢ã®åŸ‹ã‚è¾¼ã¿iframeã‚’ãŠè©¦ã—ãã ã•ã„ï¼ˆè¦‹ãŸç›®ãŒå¤‰ã‚ã‚Šã¾ã™ï¼‰ã€‚
              </div>
            </div>
          </div>
          <div class="form-row">
            <label class="field-label">å‹•ç”»URLï¼ˆç›´æ¥å…¥åŠ›ãƒ»ã¾ãŸã¯ä¸Šã‹ã‚‰è‡ªå‹•å…¥åŠ›ï¼‰</label>
            <input type="url" id="video-url" placeholder="https://drive.google.com/uc?export=download&id=..." oninput="markDirty()">
          </div>
          <div class="form-row"><label class="field-label">ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒURLï¼ˆä»»æ„ï¼‰</label><input type="url" id="video-poster" placeholder="https://..." oninput="markDirty()"></div>
          <div class="toggle-row">
            <div class="toggle-info"><div class="t-label">å‹•ç”»ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹</div><div class="t-desc">OFFã«ã™ã‚‹ã¨ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã”ã¨éè¡¨ç¤º</div></div>
            <label class="toggle"><input type="checkbox" id="video-visible" onchange="markDirty()"><span class="toggle-track"></span><span class="toggle-thumb"></span></label>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== TEXT ===== -->
    <div class="page" id="page-text">
      <div class="page-title">ãƒ†ã‚­ã‚¹ãƒˆ ç·¨é›†</div>
      <div class="page-sub">ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»CTAã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ç·¨é›†ã—ã¾ã™ã€‚</div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ†</span><span class="card-name">Heroï¼ˆãƒˆãƒƒãƒ—ï¼‰</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">ãƒ¡ã‚¤ãƒ³ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼</label><textarea id="hero-catch" rows="3" oninput="markDirty()"></textarea><div class="hint">æ”¹è¡Œã¯ &lt;br&gt; ã‚’ä½¿ã„ã¾ã™ã€‚ä¾‹ï¼šæ–½å·¥ã®ç¾å ´ãŒã€&lt;br&gt;æœ€é«˜ã®ææ¡ˆæ›¸ã«ãªã‚‹ã€‚</div></div>
          <div class="form-row"><label class="field-label">ã‚µãƒ–ã‚³ãƒ”ãƒ¼</label><textarea id="hero-sub" rows="2" oninput="markDirty()"></textarea></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ’Œ</span><span class="card-name">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœãƒƒã‚¯ã‚¹</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</label><textarea id="msg-main" rows="3" oninput="markDirty()"></textarea><div class="hint">é‡‘è‰²ã«ã—ãŸã„éƒ¨åˆ†ã‚’ &lt;span&gt;ã€œ&lt;/span&gt; ã§å›²ã‚“ã§ãã ã•ã„ã€‚</div></div>
          <div class="form-row"><label class="field-label">ã‚µãƒ–ãƒ†ã‚­ã‚¹ãƒˆ</label><textarea id="msg-body" rows="3" oninput="markDirty()"></textarea></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ“£</span><span class="card-name">CTA</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">CTAã‚¿ã‚¤ãƒˆãƒ«</label><textarea id="cta-title" rows="2" oninput="markDirty()"></textarea></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ—‚</span><span class="card-name">ãã®ä»–ã®æ–½å·¥äº‹ä¾‹ï¼ˆã‚®ãƒ£ãƒ©ãƒªãƒ¼ï¼‰</span><span class="card-desc">æº–å‚™ä¸­ãƒãƒŠãƒ¼</span></div>
        <div class="card-body">
          <div class="form-row"><label class="field-label">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«</label><input type="text" id="gallery-title" placeholder="ãã®ä»–ã®æ–½å·¥äº‹ä¾‹ã¯ã“ã¡ã‚‰" oninput="markDirty()"></div>
          <div class="form-row"><label class="field-label">èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆ</label><textarea id="gallery-body" rows="2" placeholder="ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ãƒ»ç´ æåˆ¥ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’æº–å‚™ã—ã¦ã„ã¾ã™ã€‚" oninput="markDirty()"></textarea></div>
          <div class="form-row"><label class="field-label">ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ</label><input type="text" id="gallery-btn-text" placeholder="æ–½å·¥äº‹ä¾‹ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’è¦‹ã‚‹" oninput="markDirty()"></div>
          <div class="form-row"><label class="field-label">ã‚®ãƒ£ãƒ©ãƒªãƒ¼URLï¼ˆå®Œæˆå¾Œã«å…¥åŠ›ï¼‰</label><input type="url" id="gallery-url" placeholder="https://... ï¼ˆç©ºæ¬„ã®ã¾ã¾ã ã¨ã€Œæº–å‚™ä¸­ã€è¡¨ç¤ºï¼‰" oninput="markDirty()"><div class="hint">URLã‚’å…¥åŠ›ã™ã‚‹ã¨ãƒœã‚¿ãƒ³ãŒãƒªãƒ³ã‚¯ã«ãªã‚Šã€ã€Œæº–å‚™ä¸­ã€ãƒãƒƒã‚¸ãŒæ¶ˆãˆã¾ã™ã€‚</div></div>
        </div>
      </div>
    </div>

    <!-- ===== LOGOS ===== -->
    <div class="page" id="page-logos">
      <div class="page-title">ãƒ­ã‚´</div>
      <div class="page-sub">ãƒ•ãƒƒã‚¿ãƒ¼ãƒ»é€ã‹ã—ã«ä½¿ç”¨ã™ã‚‹ãƒ­ã‚´ç”»åƒã‚’è¨­å®šã—ã¾ã™ã€‚</div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ·</span><span class="card-name">ãƒ­ã‚´ç”»åƒ</span></div>
        <div class="card-body">
          <div class="logo-grid">
            <div>
              <div class="img-drop-label">ãƒ€ãƒ¼ã‚¯ç”¨ãƒ­ã‚´</div>
              <div class="logo-drop" id="drop-fdark" onclick="triggerUpload('file-fdark')">
                <img class="preview" id="prev-fdark" src="images/footer_logo_dark.jpg" alt="">
                <div class="img-drop-overlay"><span class="img-drop-icon">ğŸ“·</span><span class="img-drop-text">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å¤‰æ›´</span></div>
                <input type="file" id="file-fdark" accept="image/*" onchange="handleLogo(this,'footer-logo-dark','prev-fdark','drop-fdark')">
              </div>
            </div>
            <div>
              <div class="img-drop-label">ãƒ©ã‚¤ãƒˆç”¨ãƒ­ã‚´</div>
              <div class="logo-drop" id="drop-flight" onclick="triggerUpload('file-flight')">
                <img class="preview" id="prev-flight" src="images/footer_logo_light.jpg" alt="">
                <div class="img-drop-overlay"><span class="img-drop-icon">ğŸ“·</span><span class="img-drop-text">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å¤‰æ›´</span></div>
                <input type="file" id="file-flight" accept="image/*" onchange="handleLogo(this,'footer-logo-light','prev-flight','drop-flight')">
              </div>
            </div>
            <div>
              <div class="img-drop-label">é€ã‹ã—ç”¨ï¼ˆPNGæ¨å¥¨ï¼‰</div>
              <div class="logo-drop" id="drop-logo" onclick="triggerUpload('file-logo')">
                <img class="preview" id="prev-logo" src="images/logo.png" alt="">
                <div class="img-drop-overlay"><span class="img-drop-icon">ğŸ“·</span><span class="img-drop-text">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å¤‰æ›´</span></div>
                <input type="file" id="file-logo" accept="image/*" onchange="handleLogo(this,'logo','prev-logo','drop-logo')">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== PROFILE ===== -->
    <div class="page" id="page-profile">
      <div class="page-title">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</div>
      <div class="page-sub">ã¬ãƒ¼ã¾ã‚“ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†ã—ã¾ã™ã€‚</div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ‘¤</span><span class="card-name">åŸºæœ¬æƒ…å ±</span></div>
        <div class="card-body">
          <div class="form-grid form-row">
            <div><label class="field-label">åå‰ï¼ˆæ—¥æœ¬èªï¼‰</label><input type="text" id="numan-name-ja" placeholder="ã‚»ãƒ¡ãƒ³ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ ã¬ãƒ¼ã¾ã‚“" oninput="markDirty()"></div>
            <div><label class="field-label">åå‰ï¼ˆè‹±èªï¼‰</label><input type="text" id="numan-name-en" placeholder="Cement Artist Nuâ˜†Man" oninput="markDirty()"></div>
          </div>
          <div class="form-grid form-row">
            <div><label class="field-label">ğŸ“ å ´æ‰€</label><input type="text" id="numan-location" placeholder="ä¸‰é‡çœŒ æ¾é˜ªå¸‚" oninput="markDirty()"></div>
            <div><label class="field-label">ğŸ—“ çµŒæ­´</label><input type="text" id="numan-career" placeholder="ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³æ­´ 2019å¹´ã€œ" oninput="markDirty()"></div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ“–</span><span class="card-name">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ–‡</span></div>
        <div class="card-body">
          <div class="form-row"><textarea id="numan-body" rows="10" oninput="markDirty()"></textarea></div>
        </div>
      </div>
      <div class="card">
        <div class="card-head"><span class="card-icon">ğŸ–¼</span><span class="card-name">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸ</span></div>
        <div class="card-body">
          <div style="display:grid;grid-template-columns:200px 160px;gap:16px;">
            <div>
              <div class="img-drop-label">ãƒ¡ã‚¤ãƒ³å†™çœŸï¼ˆã‚«ãƒ©ãƒ¼ï¼‰</div>
              <div class="logo-drop" style="aspect-ratio:1;" id="drop-nm" onclick="triggerUpload('file-nm')">
                <img class="preview" id="prev-nm" src="images/numan_color.jpg" alt="">
                <div class="img-drop-overlay"><span class="img-drop-icon">ğŸ“·</span><span class="img-drop-text">å¤‰æ›´</span></div>
                <input type="file" id="file-nm" accept="image/*" onchange="handleLogo(this,'numan-color','prev-nm','drop-nm')">
              </div>
            </div>
            <div>
              <div class="img-drop-label">ã‚µãƒ–å†™çœŸ</div>
              <div class="logo-drop" style="aspect-ratio:1;" id="drop-ns" onclick="triggerUpload('file-ns')">
                <img class="preview" id="prev-ns" src="images/numan_portrait.jpg" alt="">
                <div class="img-drop-overlay"><span class="img-drop-icon">ğŸ“·</span><span class="img-drop-text">å¤‰æ›´</span></div>
                <input type="file" id="file-ns" accept="image/*" onchange="handleLogo(this,'numan-portrait','prev-ns','drop-ns')">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== SECTIONS ===== -->
    <div class="page" id="page-sections">
      <div class="page-title">ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š</div>
      <div class="page-sub">å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®è¡¨ç¤ºãƒ»éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™ã€‚</div>
      <div class="card">
        <div class="card-body">
          <div class="toggle-row"><div class="toggle-info"><div class="t-label">BAã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³</div></div><label class="toggle"><input type="checkbox" id="sec-ba" checked onchange="markDirty()"><span class="toggle-track"></span><span class="toggle-thumb"></span></label></div>
          <div class="toggle-row"><div class="toggle-info"><div class="t-label">å‹•ç”»ã‚»ã‚¯ã‚·ãƒ§ãƒ³</div></div><label class="toggle"><input type="checkbox" id="sec-video" onchange="markDirty()"><span class="toggle-track"></span><span class="toggle-thumb"></span></label></div>
          <div class="toggle-row"><div class="toggle-info"><div class="t-label">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³</div></div><label class="toggle"><input type="checkbox" id="sec-profile" checked onchange="markDirty()"><span class="toggle-track"></span><span class="toggle-thumb"></span></label></div>
          <div class="toggle-row"><div class="toggle-info"><div class="t-label">Why KIMARUã‚»ã‚¯ã‚·ãƒ§ãƒ³</div></div><label class="toggle"><input type="checkbox" id="sec-why" checked onchange="markDirty()"><span class="toggle-track"></span><span class="toggle-thumb"></span></label></div>
        </div>
      </div>
    </div>

  </main>
</div>

<!-- SAVE BAR -->
<div class="save-bar" id="save-bar">
  <div class="save-msg">âš  <strong>æœªä¿å­˜ã®å¤‰æ›´ãŒã‚ã‚Šã¾ã™ã€‚</strong></div>
  <div class="save-btns">
    <button class="btn btn-secondary" onclick="resetAll()">ãƒªã‚»ãƒƒãƒˆ</button>
    <button class="btn btn-primary" onclick="generateAndDownload()">â¬‡ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
  </div>
</div>
<div class="toast" id="toast"><span style="color:var(--green)">âœ…</span><span id="toast-msg"></span></div>

<script>
// ===== STATE =====
var dirty=false;
var imageData={};// keyâ†’{base64,filename}
var baCards=[];// array of {id,title,before,after,finish,color,grout,sample}

// ===== NAV =====
function showPage(id,el){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  el.classList.add('active');
}

// ===== DIRTY =====
// ===== Google Drive URL å¤‰æ› =====
function extractDriveId(url){
  var m=url.match(/\/file\/d\/([a-zA-Z0-9_-]+)/);
  if(m)return m[1];
  m=url.match(/[?&]id=([a-zA-Z0-9_-]+)/);
  if(m)return m[1];
  return null;
}

function convertDriveUrl(){
  var raw=document.getElementById('drive-raw-url').value.trim();
  if(!raw){showToast('âš  Googleãƒ‰ãƒ©ã‚¤ãƒ–URLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');return;}
  var id=extractDriveId(raw);
  if(!id){showToast('âš  ãƒ•ã‚¡ã‚¤ãƒ«IDãŒå–å¾—ã§ãã¾ã›ã‚“ã€‚URLã‚’ç¢ºèªã—ã¦ãã ã•ã„');return;}

  // 3ãƒ‘ã‚¿ãƒ¼ãƒ³ç”Ÿæˆ
  var opts=[
    {
      num:'â‘ ',
      label:'ç›´æ¥ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆæ¨å¥¨ãƒ»100MBä»¥ä¸‹ï¼‰',
      url:'https://drive.google.com/uc?export=download&id='+id
    },
    {
      num:'â‘¡',
      label:'å¼·åˆ¶ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆå¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«å‘ã‘ï¼‰',
      url:'https://drive.usercontent.google.com/download?id='+id+'&export=download&authuser=0&confirm=t'
    },
    {
      num:'â‘¢',
      label:'ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼åŸ‹ã‚è¾¼ã¿ï¼ˆå†ç”Ÿã§ããªã„æ™‚ã®ä»£æ›¿ï¼‰',
      url:'https://drive.google.com/file/d/'+id+'/preview'
    }
  ];

  var container=document.getElementById('drive-url-options');
  // store urls globally for index access
  window._driveOpts=opts;
  container.innerHTML=opts.map(function(opt,i){
    return '<div class="drive-opt" onclick="selectDriveUrlByIndex('+i+',this)">'
      +'<span class="drive-opt-num">'+opt.num+'</span>'
      +'<div class="drive-opt-info">'
      +'<div class="drive-opt-label">'+opt.label+'</div>'
      +'<div class="drive-opt-url">'+opt.url+'</div>'
      +'</div>'
      +'</div>';
  }).join('');

  document.getElementById('drive-results').style.display='block';
  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆâ‘ ã‚’è‡ªå‹•ã‚»ãƒƒãƒˆ
  selectDriveUrlByIndex(0, container.firstChild);
  showToast('âœ… å¤‰æ›ã—ã¾ã—ãŸã€‚URLã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
}

function selectDriveUrlByIndex(i, el){
  var opts=window._driveOpts||[];
  if(!opts[i])return;
  selectDriveUrl(el, opts[i].url);
}

function selectDriveUrl(el, url){
  document.querySelectorAll('.drive-opt').forEach(function(o){o.classList.remove('selected');});
  el.classList.add('selected');
  document.getElementById('video-url').value=url;
  markDirty();
}

function selectTheme(theme, el){
  document.querySelectorAll('.theme-btn').forEach(function(btn){ btn.classList.remove('active'); });
  el.classList.add('active');
  markDirty();
}

function markDirty(){dirty=true;document.getElementById('save-bar').classList.add('show');}
function resetAll(){if(!confirm('å¤‰æ›´ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ'))return;dirty=false;document.getElementById('save-bar').classList.remove('show');loadDefaults();}

// ===== BA CARDS =====
var baIdCounter=0;

function addBaCard(data){
  if(!data)data={id:'ba_'+(baIdCounter++),title:'',before:'',after:'',finish:'',color:'',grout:'',sample:''};
  else if(!data.id)data.id='ba_'+(baIdCounter++);
  baCards.push(data);
  renderBaCards();
  markDirty();
}

function removeBaCard(id){
  baCards=baCards.filter(c=>c.id!==id);
  renderBaCards();
  markDirty();
}

function renderBaCards(){
  var container=document.getElementById('ba-cards');
  container.innerHTML='';
  baCards.forEach(function(item,i){
    var div=document.createElement('div');
    div.className='ba-card';
    div.id='card-'+item.id;
    div.innerHTML=buildBaCardHTML(item,i);
    container.appendChild(div);
    initBaPreview(item.id);
  });
}

function buildBaCardHTML(item,i){
  var num=(i+1<10?'0'+(i+1):String(i+1));
  var angles=item.angles||[];
  var anglesUI=angles.map(function(ang,ai){
    return '<div style="display:flex;gap:10px;align-items:flex-start;margin-bottom:10px;">'
      +'<div><div class="img-drop'+(ang.src?' has-img':'')+'" style="width:120px;height:90px;" id="drop-ang-'+item.id+'-'+ai+'" onclick="triggerUpload(\'file-ang-'+item.id+'-'+ai+'\')">'
      +(ang.src?'<img class="preview" src="'+ang.src+'" alt="">':'')
      +'<div class="img-drop-overlay"><span class="img-drop-icon" style="font-size:1.2rem;">&#128247;</span></div>'
      +'<input type="file" id="file-ang-'+item.id+'-'+ai+'" accept="image/*" onchange="handleAngleImage(this,\''+item.id+'\','+ai+')">'
      +'</div></div>'
      +'<div style="flex:1;">'
      +'<label class="field-label">ãƒ©ãƒ™ãƒ«</label>'
      +'<input type="text" style="margin-bottom:8px;" placeholder="ä¾‹ï¼šé³¥è¦³å›³ã€å¤œæ™¯ã€ãƒ©ã‚¤ãƒˆã‚¢ãƒƒãƒ—" value="'+escHtml(ang.label||'')+'" oninput="updateAngleLabel(\''+item.id+'\','+ai+',this.value)">'
      +'<button class="btn btn-danger" style="padding:5px 12px;font-size:.7rem;" onclick="removeAngle(\''+item.id+'\','+ai+')">&#10005; å‰Šé™¤</button>'
      +'</div></div>';
  }).join('');

  var beforeHasImg=item.before?'has-img':'';
  var afterHasImg=item.after?'has-img':'';
  var sampleHasImg=item.sample?'has-img':'';

  return '<div class="ba-card-head">'
    +'<span class="ba-card-num">'+num+'</span>'
    +'<input class="ba-card-title-input" type="text" placeholder="ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆä¾‹ï¼šRSã‚¿ã‚¤ãƒ«èª¿ ç„é–¢ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰" value="'+escHtml(item.title)+'" oninput="updateBaField(\''+item.id+'\',\'title\',this.value)">'
    +'<button class="btn btn-danger" onclick="removeBaCard(\''+item.id+'\')">å‰Šé™¤</button>'
    +'</div>'
    +'<div class="ba-card-body">'
    +'<div class="ba-preview-panel">'
    +'<div class="ba-preview-slider" id="preview-slider-'+item.id+'">'
    +(item.before?'<img class="ba-preview-img" src="'+item.before+'" alt="">':'')
    +(item.after?'<img class="ba-preview-img ba-preview-after" src="'+item.after+'" alt="">':'')
    +(item.before||item.after?'<div class="ba-preview-handle"><div class="ba-preview-line"></div><div class="ba-preview-pill">SLIDE</div></div>':'<div class="ba-preview-empty">ç”»åƒã‚’ã‚¢ãƒƒãƒ—ã™ã‚‹ã¨ã“ã“ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>')
    +'</div></div>'
    +'<div class="ba-img-grid">'
    +'<div><div class="img-drop-label">Beforeï¼ˆæ–½å·¥å‰ï¼‰</div>'
    +'<div class="img-drop '+beforeHasImg+'" id="drop-b-'+item.id+'" onclick="triggerUpload(\'file-b-'+item.id+'\')">'
    +(item.before?'<img class="preview" src="'+item.before+'" alt="">':'')
    +'<div class="img-drop-overlay"><span class="img-drop-icon">&#128247;</span><span class="img-drop-text">æ–½å·¥å‰ã®å†™çœŸ</span></div>'
    +'<input type="file" id="file-b-'+item.id+'" accept="image/*" onchange="handleBaImage(this,\''+item.id+'\',\'before\')">'
    +'</div></div>'
    +'<div><div class="img-drop-label">Afterï¼ˆæ–½å·¥å¾Œï¼‰</div>'
    +'<div class="img-drop '+afterHasImg+'" id="drop-a-'+item.id+'" onclick="triggerUpload(\'file-a-'+item.id+'\')">'
    +(item.after?'<img class="preview" src="'+item.after+'" alt="">':'')
    +'<div class="img-drop-overlay"><span class="img-drop-icon">&#128247;</span><span class="img-drop-text">æ–½å·¥å¾Œã®å†™çœŸ</span></div>'
    +'<input type="file" id="file-a-'+item.id+'" accept="image/*" onchange="handleBaImage(this,\''+item.id+'\',\'after\')">'
    +'</div></div>'
    +'</div>'
    +'<div class="info-fields">'
    +'<div><label class="field-label">ä»•ä¸Šã’å</label><input type="text" placeholder="RSã‚¿ã‚¤ãƒ«èª¿" value="'+escHtml(item.finish)+'" oninput="updateBaField(\''+item.id+'\',\'finish\',this.value)"></div>'
    +'<div><label class="field-label">ã‚«ãƒ©ãƒ¼</label><input type="text" placeholder="ã‚°ãƒ¬ãƒ¼" value="'+escHtml(item.color)+'" oninput="updateBaField(\''+item.id+'\',\'color\',this.value)"></div>'
    +'<div><label class="field-label">ç›®åœ°</label><input type="text" placeholder="ãƒ–ãƒ©ãƒƒã‚¯" value="'+escHtml(item.grout)+'" oninput="updateBaField(\''+item.id+'\',\'grout\',this.value)"></div>'
    +'</div>'
    +'<div class="sample-row" style="margin-bottom:16px;">'
    +'<div><div class="img-drop-label" style="margin-bottom:6px;">ç´ æã‚µãƒ³ãƒ—ãƒ«ç”»åƒï¼ˆä»»æ„ï¼‰</div>'
    +'<div class="img-drop '+sampleHasImg+'" style="width:80px;height:80px;aspect-ratio:1;" id="drop-s-'+item.id+'" onclick="triggerUpload(\'file-s-'+item.id+'\')">'
    +(item.sample?'<img class="preview" src="'+item.sample+'" alt="">':'')
    +'<div class="img-drop-overlay"><span class="img-drop-icon" style="font-size:1.2rem;">&#128247;</span></div>'
    +'<input type="file" id="file-s-'+item.id+'" accept="image/*" onchange="handleBaImage(this,\''+item.id+'\',\'sample\')">'
    +'</div></div>'
    +'<div style="font-size:.72rem;color:var(--text2);line-height:2;">ã‚¯ãƒªãƒƒã‚¯ã§æ‹¡å¤§ã§ãã‚‹å°ã•ãªã‚µãƒ ãƒã‚¤ãƒ«<br>ã¨ã—ã¦ä»•ä¸Šã’èª¬æ˜ã®æ¨ªã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>'
    +'</div>'
    +'<div><div class="img-drop-label" style="margin-bottom:8px;">è¿½åŠ ã‚¢ãƒ³ã‚°ãƒ«å†™çœŸï¼ˆé³¥è¦³å›³ãƒ»å¤œæ™¯ãƒ»ãƒ©ã‚¤ãƒˆã‚¢ãƒƒãƒ—ãªã©ï¼‰</div>'
    +'<div class="angles-list" id="angles-'+item.id+'">'
    +anglesUI
    +'</div>'
    +'<button class="btn btn-add" style="margin-top:10px;padding:10px;" onclick="addAngle(\''+item.id+'\')">ï¼‹ ã‚¢ãƒ³ã‚°ãƒ«å†™çœŸã‚’è¿½åŠ </button>'
    +'</div>'
    +'</div>';
}

function buildAnglesHTML(item){
  var angles=item.angles||[];
  return angles.map(function(ang,ai){
    return '<div style="display:flex;gap:10px;align-items:flex-start;margin-bottom:10px;">'
      +'<div><div class="img-drop'+(ang.src?' has-img':'')+'" style="width:120px;height:90px;" id="drop-ang-'+item.id+'-'+ai+'" onclick="triggerUpload(\'file-ang-'+item.id+'-'+ai+'\')">'
      +(ang.src?'<img class="preview" src="'+ang.src+'" alt="">':'')
      +'<div class="img-drop-overlay"><span class="img-drop-icon" style="font-size:1.2rem;">&#128247;</span></div>'
      +'<input type="file" id="file-ang-'+item.id+'-'+ai+'" accept="image/*" onchange="handleAngleImage(this,\''+item.id+'\','+ai+')">'
      +'</div></div>'
      +'<div style="flex:1;">'
      +'<label class="field-label">ãƒ©ãƒ™ãƒ«</label>'
      +'<input type="text" style="margin-bottom:8px;" placeholder="ä¾‹ï¼šé³¥è¦³å›³ã€å¤œæ™¯ã€ãƒ©ã‚¤ãƒˆã‚¢ãƒƒãƒ—" value="'+escHtml(ang.label||'')+'" oninput="updateAngleLabel(\''+item.id+'\','+ai+',this.value)">'
      +'<button class="btn btn-danger" style="padding:5px 12px;font-size:.7rem;" onclick="removeAngle(\''+item.id+'\','+ai+')">&#10005; å‰Šé™¤</button>'
      +'</div></div>';
  }).join('');
}

function addAngle(cardId){
  var item=baCards.find(function(c){return c.id===cardId;});
  if(!item)return;
  if(!item.angles)item.angles=[];
  item.angles.push({src:'',label:''});
  var container=document.getElementById('angles-'+cardId);
  if(container)container.innerHTML=buildAnglesHTML(item);
  markDirty();
}

function removeAngle(cardId,ai){
  var item=baCards.find(function(c){return c.id===cardId;});
  if(!item||!item.angles)return;
  item.angles.splice(ai,1);
  var container=document.getElementById('angles-'+cardId);
  if(container)container.innerHTML=buildAnglesHTML(item);
  markDirty();
}

function updateAngleLabel(cardId,ai,val){
  var item=baCards.find(function(c){return c.id===cardId;});
  if(!item||!item.angles||!item.angles[ai])return;
  item.angles[ai].label=val;
  markDirty();
}

function handleAngleImage(input,cardId,ai){
  var file=input.files[0];if(!file)return;
  var reader=new FileReader();
  reader.onload=function(e){
    var item=baCards.find(function(c){return c.id===cardId;});
    if(!item)return;
    if(!item.angles)item.angles=[];
    if(!item.angles[ai])item.angles[ai]={src:'',label:''};
    item.angles[ai].src=e.target.result;
    var drop=document.getElementById('drop-ang-'+cardId+'-'+ai);
    if(drop){
      drop.classList.add('has-img');
      var prev=drop.querySelector('img.preview');
      if(prev)prev.src=e.target.result;
      else{var img=document.createElement('img');img.className='preview';img.src=e.target.result;drop.insertBefore(img,drop.firstChild);}
    }
    markDirty();
  };
  reader.readAsDataURL(file);
}

function escHtml(s){return (s||'').replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}

function updateBaField(id,field,val){
  var item=baCards.find(c=>c.id===id);
  if(item){item[field]=val;markDirty();}
}

function handleBaImage(input,id,field){
  var file=input.files[0];if(!file)return;
  var reader=new FileReader();
  reader.onload=function(e){
    var b64=e.target.result;
    var item=baCards.find(c=>c.id===id);
    if(!item)return;
    item[field]=b64;
    markDirty();
    // Update preview in card
    var drop=document.getElementById('drop-'+field[0]+'-'+id);
    if(drop){
      drop.classList.add('has-img');
      var prev=drop.querySelector('img.preview');
      if(prev)prev.src=b64;
      else{var img=document.createElement('img');img.className='preview';img.src=b64;drop.insertBefore(img,drop.firstChild);}
    }
    var fn=document.getElementById('fn-'+field[0]+'-'+id);
    if(fn)fn.textContent='ç”»åƒè¨­å®šæ¸ˆã¿ï¼ˆ'+file.name+')';
    // Update slider preview
    if(field==='before'||field==='after'){
      var slider=document.getElementById('preview-slider-'+id);
      if(slider){
        // Rebuild preview
        var beforeSrc=item.before||'';
        var afterSrc=item.after||'';
        slider.innerHTML=(beforeSrc?'<img class="ba-preview-img" src="'+beforeSrc+'" alt="">':'')
          +(afterSrc?'<img class="ba-preview-img ba-preview-after" id="prev-after-'+id+'" src="'+afterSrc+'" alt="">':'')
          +((beforeSrc||afterSrc)?'<div class="ba-preview-handle"><div class="ba-preview-line"></div><div class="ba-preview-pill">SLIDE</div></div>':'<div class="ba-preview-empty">ç”»åƒã‚’ã‚¢ãƒƒãƒ—ã™ã‚‹ã¨ã“ã“ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>');
        initBaPreview(id);
      }
    }
    if(field==='sample'){
      var sdrop=document.getElementById('drop-s-'+id);
      if(sdrop){
        var simg=sdrop.querySelector('img.preview');
        if(simg)simg.src=b64;
        else{var si=document.createElement('img');si.className='preview';si.src=b64;sdrop.insertBefore(si,sdrop.firstChild);}
      }
    }
  };
  reader.readAsDataURL(file);
}

function initBaPreview(id){
  var slider=document.getElementById('preview-slider-'+id);
  if(!slider)return;
  var afterImg=slider.querySelector('.ba-preview-after');
  if(!afterImg)return;
  var handle=slider.querySelector('.ba-preview-handle');
  var dragging=false;
  function update(clientX){
    var rect=slider.getBoundingClientRect();
    var pos=Math.max(0,Math.min(100,((clientX-rect.left)/rect.width)*100));
    afterImg.style.clipPath='inset(0 0 0 '+pos+'%)';
    if(handle){handle.style.left=pos+'%';handle.style.transform='translateX(-50%)';}
  }
  slider.addEventListener('mousedown',function(e){dragging=true;update(e.clientX);});
  window.addEventListener('mousemove',function(e){if(dragging)update(e.clientX);});
  window.addEventListener('mouseup',function(){dragging=false;});
  slider.addEventListener('touchstart',function(e){update(e.touches[0].clientX);},{passive:true});
  slider.addEventListener('touchmove',function(e){update(e.touches[0].clientX);},{passive:true});
}

// ===== LOGO UPLOAD =====
function triggerUpload(id){document.getElementById(id).click();}

function handleLogo(input,key,previewId,dropId){
  var file=input.files[0];if(!file)return;
  var reader=new FileReader();
  reader.onload=function(e){
    imageData[key]={base64:e.target.result,filename:file.name};
    var prev=document.getElementById(previewId);
    if(prev){prev.src=e.target.result;prev.style.display='block';}
    var drop=document.getElementById(dropId);
    if(drop)drop.classList.add('has-img');
    markDirty();
  };
  reader.readAsDataURL(file);
}

// ===== DEFAULTS =====
function loadDefaults(){
  var s={};
  try{s=JSON.parse(localStorage.getItem('kimaru-settings')||'{}');}catch(e){}
  setVal('ga4-id',s['ga4-id']||'');
  setVal('line-url',s['line-url']||'https://lin.ee/xxxxxxx');
  setVal('line-btn-text',s['line-btn-text']||'LINE ã§ãŠå•ã„åˆã‚ã›');
  setVal('ig-url',s['ig-url']||'https://www.instagram.com/cementart_numan/');
  setVal('video-url',s['video-url']||'');
  setVal('video-poster',s['video-poster']||'');
  setCheck('video-visible',s['video-visible']||false);
  setVal('hero-catch',s['hero-catch']||'æ–½å·¥ã®ç¾å ´ãŒã€ãã®ã¾ã¾<br>æœ€é«˜ã®ææ¡ˆæ›¸ã«ãªã‚‹ã€‚');
  setVal('hero-sub',s['hero-sub']||'æ–½å·¥ã®ç¾å ´ãŒã€ãã®ã¾ã¾æœ€é«˜ã®ææ¡ˆæ›¸ã«ãªã‚‹ã€‚\nKIMARUãŒã€ã‚ãªãŸã®å–¶æ¥­ã‚’å¤‰ãˆã¾ã™ã€‚');
  setVal('msg-main',s['msg-main']||'ã‚µãƒ³ãƒ—ãƒ«ã‚’æŒã£ã¦è¡Œã£ã¦ã‚‚å¥‘ç´„ãŒå–ã‚Œãªã„ã€\nãã‚“ãªæ™‚ä»£ã¯<span>ã‚‚ã†çµ‚ã‚ã‚Š</span>ã«ã—ã¾ã›ã‚“ã‹ã€‚');
  setVal('msg-body',s['msg-body']||'æŠ€è¡“ã¯æœ¬ç‰©ãªã®ã«ã€ä¼ãˆæ–¹ãŒè¿½ã„ã¤ã„ã¦ã„ãªã„ã ã‘ã€‚\nKIMARUã‚’ä½¿ãˆã°ã€ãŠå®¢æ§˜ãŒè‡ªåˆ†ã§ã€Œæ±ºã‚ã‚‹ã€ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚');
  setVal('cta-title',s['cta-title']||'æ°—ã«ãªã£ãŸæ–¹ã¯ã€\nã¾ãšLINEã§è©±ã—ã¾ã—ã‚‡ã†ã€‚');
  // ãƒ†ãƒ¼ãƒå¾©å…ƒ
  var savedTheme = s['theme'] || 'dark';
  document.querySelectorAll('.theme-btn').forEach(function(btn){
    btn.classList.toggle('active', btn.dataset.theme === savedTheme);
  });
  setVal('gallery-title',s['gallery-title']||'ãã®ä»–ã®æ–½å·¥äº‹ä¾‹ã¯ã“ã¡ã‚‰');
  setVal('gallery-body',s['gallery-body']||'ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ãƒ»ç´ æåˆ¥ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’æº–å‚™ã—ã¦ã„ã¾ã™ã€‚');
  setVal('gallery-btn-text',s['gallery-btn-text']||'æ–½å·¥äº‹ä¾‹ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’è¦‹ã‚‹');
  setVal('gallery-url',s['gallery-url']||'');
  setVal('numan-name-ja',s['numan-name-ja']||'ã‚»ãƒ¡ãƒ³ãƒˆã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ\nã¬ãƒ¼ã¾ã‚“');
  setVal('numan-name-en',s['numan-name-en']||'Cement Artist Nuâ˜†Man');
  setVal('numan-location',s['numan-location']||'ä¸‰é‡çœŒ æ¾é˜ªå¸‚');
  setVal('numan-career',s['numan-career']||'ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³æ­´ 2019å¹´ã€œ');
  setVal('numan-body',s['numan-body']||'16æ­³ã‹ã‚‰å»ºè¨­æ¥­ç•Œã«é£›ã³è¾¼ã¿ã€é•·å¹´ã«ã‚ãŸã£ã¦ä»®è¨­äº‹æ¥­ãƒ»ä¸‹è«‹ã‘ã®ä¸–ç•Œã§åƒã„ã¦ããŸã€‚\n\nã„ã¤ã—ã‹ã€ã€Œã‚«ã‚¿ãƒã«æ®‹ã‚‹ä»•äº‹ãŒã—ãŸã„ã€ã¨æ€ã†ã‚ˆã†ã«ãªã£ãŸã€‚\nãã‚“ãªã¨ãå‡ºä¼šã£ãŸã®ãŒã€ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³ã€‚\n\nãŠå®¢ã•ã‚“ã®å–œã¶å£°ã€ç¬‘é¡”ã«ç›´æ¥ãµã‚Œã‚‰ã‚Œã‚‹ä»•äº‹ã€‚\nãã—ã¦ã€ã“ã®ä»•äº‹ã«çœŸå‰£ã«å‘ãåˆã†ç†±ã„æ€ã„ã‚’æŒã£ãŸä»²é–“ãŸã¡ã¨å®šæœŸçš„ã«ä¼šãˆã‚‹ç’°å¢ƒã€‚\nå‡ºä¼šã†ãŸã³ã«æ°—ã¥ããŒã‚ã‚Šã€å­¦ã³ãŒã‚ã‚‹ã€‚\n\nã“ã®ç´ æ™´ã‚‰ã—ã„ä»•äº‹ã‚’ã€ã‚‚ã£ã¨å¤šãã®äººã«çŸ¥ã£ã¦ã‚‚ã‚‰ã„ãŸã„ã€‚\né«˜ã„æŠ€è¡“ã‚’æŒã¤ä»²é–“ãŸã¡ã«ã€ã‚‚ã£ã¨è‡ªä¿¡ã‚’æŒã£ã¦è¼ã‘ã‚‹æ©Ÿä¼šã‚’å±Šã‘ãŸã„ã€‚\nãã—ã¦ã€ç§è‡ªèº«ã‚’è‚²ã¦ã¦ãã‚ŒãŸROLLER STONEã¨ã„ã†æ¥­ç•Œã«ã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ©è¿”ã—ãŒã—ãŸã„ã€‚\n\nãã‚ŒãŒã€KIMARUã®åŸç‚¹ã§ã™ã€‚');
  setCheck('sec-ba',s['sec-ba']!==false);
  setCheck('sec-video',s['sec-video']||false);
  setCheck('sec-profile',s['sec-profile']!==false);
  setCheck('sec-why',s['sec-why']!==false);
  // BA cards
  baCards=[];
  baIdCounter=0;
  var savedCards=s['ba-cards']||[];
  if(savedCards.length){savedCards.forEach(function(c){c.id='ba_'+(baIdCounter++);baCards.push(c);});renderBaCards();}
  else{renderBaCards();}// empty state
}

function setVal(id,val){var el=document.getElementById(id);if(el)el.value=val;}
function setCheck(id,val){var el=document.getElementById(id);if(el)el.checked=val;}
function getVal(id){var el=document.getElementById(id);return el?el.value:'';}
function getCheck(id){var el=document.getElementById(id);return el?el.checked:false;}

// ===== SAVE SETTINGS =====
function saveSettings(){
  var s={
    'theme': document.querySelector('.theme-btn.active')?.dataset.theme || 'dark',
    'ga4-id':getVal('ga4-id'),
    'line-url':getVal('line-url'),
    'line-btn-text':getVal('line-btn-text'),
    'ig-url':getVal('ig-url'),
    'video-url':getVal('video-url'),
    'video-poster':getVal('video-poster'),
    'video-visible':getCheck('video-visible'),
    'hero-catch':getVal('hero-catch'),
    'hero-sub':getVal('hero-sub'),
    'msg-main':getVal('msg-main'),
    'msg-body':getVal('msg-body'),
    'cta-title':getVal('cta-title'),
    'gallery-title':getVal('gallery-title'),
    'gallery-body':getVal('gallery-body'),
    'gallery-btn-text':getVal('gallery-btn-text'),
    'gallery-url':getVal('gallery-url'),
    'numan-name-ja':getVal('numan-name-ja'),
    'numan-name-en':getVal('numan-name-en'),
    'numan-location':getVal('numan-location'),
    'numan-career':getVal('numan-career'),
    'numan-body':getVal('numan-body'),
    'sec-ba':getCheck('sec-ba'),
    'sec-video':getCheck('sec-video'),
    'sec-profile':getCheck('sec-profile'),
    'sec-why':getCheck('sec-why'),
    'ba-cards':baCards,
  };
  try{localStorage.setItem('kimaru-settings',JSON.stringify(s));}catch(e){}
  return s;
}

// ===== GENERATE HTML =====
// LPãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†…è”µï¼ˆfetchãªã—ãƒ»GitHub Pagesã§å‹•ä½œï¼‰
var _LP_B64='PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImphIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPgo8dGl0bGU+S0lNQVJVIHwg5o+Q5qGI44GM5aSJ44KP44KL44Go44CB5aWR57SE44GM5aSJ44KP44KLPC90aXRsZT4KPCEtLSBHb29nbGUgdGFnIChndGFnLmpzKSAtLT4KPHNjcmlwdCBhc3luYyBzcmM9Imh0dHBzOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0YWcvanM/aWQ9Ry0wVkYyNzdGNlJYIj48L3NjcmlwdD4KPHNjcmlwdD4KICB3aW5kb3cuZGF0YUxheWVyID0gd2luZG93LmRhdGFMYXllciB8fCBbXTsKICBmdW5jdGlvbiBndGFnKCl7ZGF0YUxheWVyLnB1c2goYXJndW1lbnRzKTt9CiAgZ3RhZygnanMnLCBuZXcgRGF0ZSgpKTsKICBndGFnKCdjb25maWcnLCAnRy0wVkYyNzdGNlJYJyk7Cjwvc2NyaXB0Pgo8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20iPgo8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PU5vdG8rU2FucytKUDp3Z2h0QDMwMDs0MDA7NTAwOzcwMCZmYW1pbHk9Tm90bytTZXJpZitKUDp3Z2h0QDMwMDs0MDA7NjAwJmZhbWlseT1Db3Jtb3JhbnQrR2FyYW1vbmQ6d2dodEAzMDA7NDAwOzYwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+CjxzdHlsZT4KOnJvb3QgeyAtLWdvbGQ6I0M5QTg0QzstLWdvbGQtZGltOnJnYmEoMjAxLDE2OCw3NiwwLjE1KTstLWdvbGQtbGluZTpyZ2JhKDIwMSwxNjgsNzYsMC4zKTstLXJhZGl1czo4cHg7IH0KW2RhdGEtdGhlbWU9ImRhcmsiXSAgeyAtLWJnOiMxMTE7LS1iZzI6IzE4MTgxODstLWJnMzojMjAyMDIwOy0tdGV4dDojZWVlYmU0Oy0tdGV4dDI6I2FhYTQ5YTstLWJvcmRlcjpyZ2JhKDIwMSwxNjgsNzYsMC4xOCk7LS13bS1vcGFjaXR5OjAuMDY7LS13bS1maWx0ZXI6bm9uZTstLWJhZGdlLWJnOnJnYmEoMjAxLDE2OCw3NiwwLjEyKTstLWNhcmQtYmc6IzE4MTgxODstLW1zZy1iZzojMTgxODE4OyB9CltkYXRhLXRoZW1lPSJsaWdodCJdIHsgLS1iZzojZjVmM2VmOy0tYmcyOiNlY2VhZTQ7LS1iZzM6I2UyZGZkODstLXRleHQ6IzFhMTgxNDstLXRleHQyOiM2YjY1NjA7LS1ib3JkZXI6cmdiYSgxMDAsODAsNDAsMC4xOCk7LS13bS1vcGFjaXR5OjAuMDc7LS13bS1maWx0ZXI6bm9uZTstLWJhZGdlLWJnOnJnYmEoMjAxLDE2OCw3NiwwLjE1KTstLWNhcmQtYmc6I2VjZWFlNDstLW1zZy1iZzojZWNlYWU0OyB9CltkYXRhLXRoZW1lPSJpbmsiXSAgIHsgLS1iZzojZjhmN2Y0Oy0tYmcyOiNmZmY7LS1iZzM6I2VlZWNlODstLXRleHQ6IzExMTstLXRleHQyOiM1NTU7LS1ib3JkZXI6cmdiYSgwLDAsMCwwLjEyKTstLWdvbGQ6IzFhMWExYTstLWdvbGQtZGltOnJnYmEoMCwwLDAsMC4wOCk7LS1nb2xkLWxpbmU6cmdiYSgwLDAsMCwwLjIpOy0td20tb3BhY2l0eTowLjA5Oy0td20tZmlsdGVyOm5vbmU7LS1iYWRnZS1iZzpyZ2JhKDAsMCwwLDAuMDYpOy0tY2FyZC1iZzojZmZmOy0tbXNnLWJnOiNmZmY7IH0KCiosKjo6YmVmb3JlLCo6OmFmdGVye2JveC1zaXppbmc6Ym9yZGVyLWJveDttYXJnaW46MDtwYWRkaW5nOjA7fQpodG1se3Njcm9sbC1iZWhhdmlvcjpzbW9vdGg7fQpib2R5e2JhY2tncm91bmQ6dmFyKC0tYmcpO2NvbG9yOnZhcigtLXRleHQpO2ZvbnQtZmFtaWx5OidOb3RvIFNhbnMgSlAnLHNhbnMtc2VyaWY7b3ZlcmZsb3cteDpoaWRkZW47bGluZS1oZWlnaHQ6MS43O3RyYW5zaXRpb246YmFja2dyb3VuZCAuNHMsY29sb3IgLjRzO30KCi8qIFdBVEVSTUFSSyAtIDPnrofmiYDjga7jgb8gKi8KLndte3Bvc2l0aW9uOmFic29sdXRlO2luc2V0OjA7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BvaW50ZXItZXZlbnRzOm5vbmU7ei1pbmRleDowO292ZXJmbG93OmhpZGRlbjt9Ci53bSBpbWd7d2lkdGg6bWluKDY1JSw0ODBweCk7b3BhY2l0eTp2YXIoLS13bS1vcGFjaXR5KTtmaWx0ZXI6dmFyKC0td20tZmlsdGVyKTtvYmplY3QtZml0OmNvbnRhaW47dXNlci1zZWxlY3Q6bm9uZTt0cmFuc2l0aW9uOm9wYWNpdHkgLjRzO30KCi8qIE1PREUgQkFSICovCgovKiBBTklNUyAqLwpAa2V5ZnJhbWVzIGZhZGVVcHtmcm9te29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgyMHB4KTt9dG97b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApO319CkBrZXlmcmFtZXMgZmFkZUlue2Zyb217b3BhY2l0eTowO310b3tvcGFjaXR5OjE7fX0KQGtleWZyYW1lcyBwdWxzZXswJSwxMDAle29wYWNpdHk6MC40O301MCV7b3BhY2l0eToxO319CgovKiBDQVRDSCAqLwouY2F0Y2gtaXRlbXtkaXNwbGF5Om5vbmU7Zm9udC1mYW1pbHk6J05vdG8gU2VyaWYgSlAnLHNlcmlmO2ZvbnQtc2l6ZTpjbGFtcCgxLjVyZW0sNC41dncsMi42cmVtKTtmb250LXdlaWdodDo0MDA7bGluZS1oZWlnaHQ6MS42O2xldHRlci1zcGFjaW5nOjFweDtjb2xvcjp2YXIoLS10ZXh0KTt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjAgMTZweDt0cmFuc2l0aW9uOmNvbG9yIC40czt9Ci5jYXRjaC1pdGVtLmFjdGl2ZXtkaXNwbGF5OmJsb2NrO2FuaW1hdGlvbjpmYWRlVXAgLjZzIGN1YmljLWJlemllciguMjIsMSwuMzYsMSkgYm90aDt9Ci5jYXRjaC1pdGVtIHNwYW57Y29sb3I6dmFyKC0tZ29sZCk7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQoKLyogSEVSTyAqLwouaGVyb3ttaW4taGVpZ2h0OjEwMHZoO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzo4MHB4IDI0cHggMTIwcHg7cG9zaXRpb246cmVsYXRpdmU7b3ZlcmZsb3c6aGlkZGVuO3RyYW5zaXRpb246YmFja2dyb3VuZCAuNHM7fQpbZGF0YS10aGVtZT0iZGFyayJdIC5oZXJve2JhY2tncm91bmQ6cmFkaWFsLWdyYWRpZW50KGVsbGlwc2UgODAlIDYwJSBhdCA1MCUgNDAlLHJnYmEoMjAxLDE2OCw3NiwuMDYpIDAlLHRyYW5zcGFyZW50IDY1JSksdmFyKC0tYmcpO30KW2RhdGEtdGhlbWU9ImxpZ2h0Il0gLmhlcm97YmFja2dyb3VuZDpyYWRpYWwtZ3JhZGllbnQoZWxsaXBzZSA4MCUgNjAlIGF0IDUwJSA0MCUscmdiYSgyMDEsMTY4LDc2LC4wOCkgMCUsdHJhbnNwYXJlbnQgNjUlKSx2YXIoLS1iZyk7fQpbZGF0YS10aGVtZT0iaW5rIl0gLmhlcm97YmFja2dyb3VuZDp2YXIoLS1iZyk7fQouaGVybz4qOm5vdCgud20pe3Bvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6MTt9Ci5oZXJvLWJhZGdle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2JhY2tncm91bmQ6dmFyKC0tYmFkZ2UtYmcpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tZ29sZC1saW5lKTtjb2xvcjp2YXIoLS1nb2xkKTtmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6NTAwO2xldHRlci1zcGFjaW5nOjRweDtwYWRkaW5nOjdweCAyMHB4O2JvcmRlci1yYWRpdXM6MTAwcHg7bWFyZ2luLWJvdHRvbTo0MHB4O2FuaW1hdGlvbjpmYWRlSW4gLjZzIC4ycyBib3RoO3RyYW5zaXRpb246YmFja2dyb3VuZCAuNHMsY29sb3IgLjRzLGJvcmRlci1jb2xvciAuNHM7fQouaGVyby1jYXRjaC13cmFwe3dpZHRoOjEwMCU7bWF4LXdpZHRoOjc2MHB4O21pbi1oZWlnaHQ6MTAwcHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbi1ib3R0b206MjRweDt9Ci5oZXJvLWRvdHN7ZGlzcGxheTpmbGV4O2dhcDo4cHg7anVzdGlmeS1jb250ZW50OmNlbnRlcjttYXJnaW4tYm90dG9tOjMycHg7YW5pbWF0aW9uOmZhZGVJbiAuNnMgLjhzIGJvdGg7fQouaGVyby1kb3R7d2lkdGg6NnB4O2hlaWdodDo2cHg7Ym9yZGVyLXJhZGl1czo1MCU7YmFja2dyb3VuZDp2YXIoLS1nb2xkLWRpbSk7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC4zczt9Ci5oZXJvLWRvdC5hY3RpdmV7YmFja2dyb3VuZDp2YXIoLS1nb2xkKTt9Ci5oZXJvLXN1Yntmb250LXNpemU6Y2xhbXAoLjlyZW0sMnZ3LDEuMDVyZW0pO2NvbG9yOnZhcigtLXRleHQyKTtmb250LXdlaWdodDozMDA7bGluZS1oZWlnaHQ6Mi4yO2FuaW1hdGlvbjpmYWRlVXAgLjZzIC41cyBib3RoO3RyYW5zaXRpb246Y29sb3IgLjRzO30KLmhlcm8tc2Nyb2xse3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTozMnB4O2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo2cHg7YW5pbWF0aW9uOmZhZGVJbiAuNnMgMS4ycyBib3RoO30KLmhlcm8tc2Nyb2xsIHNwYW57Zm9udC1zaXplOi41NXJlbTtsZXR0ZXItc3BhY2luZzozcHg7Y29sb3I6dmFyKC0tdGV4dDIpO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTt9Ci5zY3JvbGwtYmFye3dpZHRoOjFweDtoZWlnaHQ6MjhweDtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20sdmFyKC0tZ29sZCksdHJhbnNwYXJlbnQpO2FuaW1hdGlvbjpwdWxzZSAycyBpbmZpbml0ZTt9CgovKiBTRUNUSU9OUyAqLwouc2VjdGlvbntwYWRkaW5nOjgwcHggMjRweDtwb3NpdGlvbjpyZWxhdGl2ZTtvdmVyZmxvdzpoaWRkZW47dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC40czt9Ci5zZWN0aW9uLWlubmVye21heC13aWR0aDo5MDBweDttYXJnaW46MCBhdXRvO3Bvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6MTt9Ci5zZWN0aW9uLXRhZ3tkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTBweDtmb250LXNpemU6LjY4cmVtO2ZvbnQtd2VpZ2h0OjUwMDtsZXR0ZXItc3BhY2luZzo0cHg7Y29sb3I6dmFyKC0tZ29sZCk7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO21hcmdpbi1ib3R0b206MTZweDt0cmFuc2l0aW9uOmNvbG9yIC40czt9Ci5zZWN0aW9uLXRhZzo6YmVmb3Jle2NvbnRlbnQ6Jyc7ZGlzcGxheTpibG9jazt3aWR0aDoyMHB4O2hlaWdodDoxcHg7YmFja2dyb3VuZDp2YXIoLS1nb2xkKTt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjRzO30KLnNlY3Rpb24tdGl0bGV7Zm9udC1mYW1pbHk6J05vdG8gU2VyaWYgSlAnLHNlcmlmO2ZvbnQtc2l6ZTpjbGFtcCgxLjNyZW0sM3Z3LDJyZW0pO2ZvbnQtd2VpZ2h0OjQwMDtsaW5lLWhlaWdodDoxLjc7bWFyZ2luLWJvdHRvbToxNnB4O3RyYW5zaXRpb246Y29sb3IgLjRzO30KLnNlY3Rpb24tYm9keXtmb250LXNpemU6MXJlbTtjb2xvcjp2YXIoLS10ZXh0Mik7Zm9udC13ZWlnaHQ6MzAwO2xpbmUtaGVpZ2h0OjIuNDt0cmFuc2l0aW9uOmNvbG9yIC40czt9CgovKiBJTlRSTyAqLwouaW50cm97YmFja2dyb3VuZDp2YXIoLS1iZzIpO2JvcmRlci10b3A6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgdmFyKC0tYm9yZGVyKTt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjRzLGJvcmRlci1jb2xvciAuNHM7fQouaW50cm8tY2FyZHN7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoMywxZnIpO2dhcDoxcHg7YmFja2dyb3VuZDp2YXIoLS1ib3JkZXIpO21hcmdpbi10b3A6NDBweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO292ZXJmbG93OmhpZGRlbjt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjRzLGJvcmRlci1jb2xvciAuNHM7fQouaW50cm8tY2FyZHtiYWNrZ3JvdW5kOnZhcigtLWNhcmQtYmcpO3BhZGRpbmc6MjhweCAyMHB4O3RleHQtYWxpZ246Y2VudGVyO3RyYW5zaXRpb246YmFja2dyb3VuZCAuNHM7fQouaW50cm8tY2FyZC1udW17Zm9udC1mYW1pbHk6J0Nvcm1vcmFudCBHYXJhbW9uZCcsc2VyaWY7Zm9udC1zaXplOjIuNHJlbTtmb250LXdlaWdodDozMDA7Y29sb3I6dmFyKC0tZ29sZCk7b3BhY2l0eTouNDU7bGluZS1oZWlnaHQ6MTttYXJnaW4tYm90dG9tOjEwcHg7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQouaW50cm8tY2FyZC10aXRsZXtmb250LXNpemU6LjkycmVtO2ZvbnQtd2VpZ2h0OjUwMDttYXJnaW4tYm90dG9tOjZweDt9Ci5pbnRyby1jYXJkLWJvZHl7Zm9udC1zaXplOi44cmVtO2NvbG9yOnZhcigtLXRleHQyKTtmb250LXdlaWdodDozMDA7bGluZS1oZWlnaHQ6MS44O3RyYW5zaXRpb246Y29sb3IgLjRzO30KCi8qIEJBICovCi5iYS13cmFwe21hcmdpbi1ib3R0b206NjBweDt9Ci5iYS1sYWJlbC1yb3d7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTJweDttYXJnaW4tYm90dG9tOjE0cHg7fQouYmEtbnVte2ZvbnQtZmFtaWx5OidDb3Jtb3JhbnQgR2FyYW1vbmQnLHNlcmlmO2ZvbnQtc2l6ZToxLjhyZW07Zm9udC13ZWlnaHQ6MzAwO2NvbG9yOnZhcigtLWdvbGQpO29wYWNpdHk6LjQ7bGluZS1oZWlnaHQ6MTt0cmFuc2l0aW9uOmNvbG9yIC40czt9Ci5iYS10aXRsZXtmb250LXNpemU6Ljk1cmVtO2NvbG9yOnZhcigtLXRleHQyKTt0cmFuc2l0aW9uOmNvbG9yIC40czt9Ci5iYS1jb250YWluZXJ7cG9zaXRpb246cmVsYXRpdmU7d2lkdGg6MTAwJTthc3BlY3QtcmF0aW86MTYvOTtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtjdXJzb3I6ZXctcmVzaXplO3VzZXItc2VsZWN0Om5vbmU7dHJhbnNpdGlvbjpib3JkZXItY29sb3IgLjRzO30KLmJhLWltZ3twb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtvYmplY3QtZml0OmNvdmVyO3BvaW50ZXItZXZlbnRzOm5vbmU7fQouYmEtYWZ0ZXJ7Y2xpcC1wYXRoOmluc2V0KDAgMCAwIDUwJSk7ei1pbmRleDoyO30KLmJhLWhhbmRsZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTt3aWR0aDo0MHB4O3otaW5kZXg6MTA7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7cG9pbnRlci1ldmVudHM6bm9uZTt9Ci5iYS1oYW5kbGUtbGluZXt3aWR0aDoycHg7ZmxleDoxO2JhY2tncm91bmQ6dmFyKC0tZ29sZCk7b3BhY2l0eTouOTt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjRzO30KLmJhLWhhbmRsZS1waWxse2JhY2tncm91bmQ6dmFyKC0tZ29sZCk7Y29sb3I6I2ZmZjtmb250LXNpemU6LjVyZW07Zm9udC13ZWlnaHQ6NzAwO2xldHRlci1zcGFjaW5nOjJweDtwYWRkaW5nOjVweCA4cHg7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC40czt9Ci5iYS10YWdze3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbToxMnB4O2xlZnQ6MDtyaWdodDowO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjAgMTRweDt6LWluZGV4OjU7cG9pbnRlci1ldmVudHM6bm9uZTt9Ci5iYS10YWd7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC41NSk7Y29sb3I6Izk5OTtmb250LXNpemU6LjZyZW07bGV0dGVyLXNwYWNpbmc6MnB4O3BhZGRpbmc6NHB4IDEwcHg7Ym9yZGVyLXJhZGl1czoycHg7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LC4xKTt9Ci5iYS10YWcuYWZ0ZXJ7Y29sb3I6dmFyKC0tZ29sZCk7Ym9yZGVyLWNvbG9yOnJnYmEoMjAxLDE2OCw3NiwuNCk7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQouYmEtY2FwdGlvbnttYXJnaW4tdG9wOjEwcHg7Zm9udC1zaXplOi44NXJlbTtjb2xvcjp2YXIoLS10ZXh0Mik7Zm9udC13ZWlnaHQ6MzAwO3RyYW5zaXRpb246Y29sb3IgLjRzO30KLyogQkEgaW5mbyBwYW5lbCAqLwouYmEtaW5mb3tkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtnYXA6MTRweDttYXJnaW4tdG9wOjE0cHg7cGFkZGluZzoxNHB4IDE4cHg7YmFja2dyb3VuZDp2YXIoLS1iZzIpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtib3JkZXItcmFkaXVzOjhweDt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjRzLGJvcmRlci1jb2xvciAuNHM7fQouYmEtaW5mby5oaWRkZW57ZGlzcGxheTpub25lO30KLmJhLWluZm8tdGV4dHtmbGV4OjE7bWluLXdpZHRoOjA7fQouYmEtaW5mby1uYW1le2ZvbnQtc2l6ZTouOXJlbTtmb250LXdlaWdodDo1MDA7Y29sb3I6dmFyKC0tdGV4dCk7bWFyZ2luLWJvdHRvbTo2cHg7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQouYmEtaW5mby10YWdze2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtnYXA6NnB4O30KLmJhLWluZm8tY2hpcHtmb250LXNpemU6LjdyZW07Y29sb3I6dmFyKC0tdGV4dDIpO2JhY2tncm91bmQ6dmFyKC0tYmczKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7cGFkZGluZzozcHggMTBweDtib3JkZXItcmFkaXVzOjEwMHB4O3RyYW5zaXRpb246YWxsIC40czt9Ci5iYS1zYW1wbGUtdGh1bWJ7d2lkdGg6NTJweDtoZWlnaHQ6NTJweDtib3JkZXItcmFkaXVzOjZweDtvYmplY3QtZml0OmNvdmVyO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtjdXJzb3I6cG9pbnRlcjtmbGV4LXNocmluazowO3RyYW5zaXRpb246b3BhY2l0eSAuMnMsdHJhbnNmb3JtIC4yczt9Ci5iYS1zYW1wbGUtdGh1bWI6aG92ZXJ7b3BhY2l0eTouODU7dHJhbnNmb3JtOnNjYWxlKDEuMDUpO30KLyog6L+95Yqg44Ki44Oz44Kw44Or5YaZ55yfICovCi5iYS1hbmdsZXN7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2dhcDoxMHB4O21hcmdpbi10b3A6MTRweDt9Ci5iYS1hbmdsZS1pdGVte3Bvc2l0aW9uOnJlbGF0aXZlO2N1cnNvcjpwb2ludGVyO30KLmJhLWFuZ2xlLWltZ3t3aWR0aDoxMDAlO2FzcGVjdC1yYXRpbzo0LzM7b2JqZWN0LWZpdDpjb3Zlcjtib3JkZXItcmFkaXVzOjhweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7ZGlzcGxheTpibG9jazt0cmFuc2l0aW9uOm9wYWNpdHkgLjJzLHRyYW5zZm9ybSAuMnM7fQouYmEtYW5nbGUtaW1nOmhvdmVye29wYWNpdHk6Ljg1O3RyYW5zZm9ybTpzY2FsZSgxLjA0KTt9Ci5iYS1hbmdsZS1sYWJlbHtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MDtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjYpO2NvbG9yOiNkZGQ7Zm9udC1zaXplOi42NXJlbTtsZXR0ZXItc3BhY2luZzoxcHg7dGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzo1cHggNnB4O2JvcmRlci1yYWRpdXM6MCAwIDhweCA4cHg7fQovKiBMaWdodGJveCAqLwoubGlnaHRib3h7cG9zaXRpb246Zml4ZWQ7aW5zZXQ6MDtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjg4KTt6LWluZGV4OjkwMDA7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO29wYWNpdHk6MDtwb2ludGVyLWV2ZW50czpub25lO3RyYW5zaXRpb246b3BhY2l0eSAuMjVzO30KLmxpZ2h0Ym94Lm9wZW57b3BhY2l0eToxO3BvaW50ZXItZXZlbnRzOmFsbDt9Ci5saWdodGJveCBpbWd7bWF4LXdpZHRoOjkwdnc7bWF4LWhlaWdodDo4OHZoO2JvcmRlci1yYWRpdXM6OHB4O2JveC1zaGFkb3c6MCAyMHB4IDYwcHggcmdiYSgwLDAsMCwuNik7fQoubGlnaHRib3gtY2xvc2V7cG9zaXRpb246YWJzb2x1dGU7dG9wOjIwcHg7cmlnaHQ6MjRweDtjb2xvcjojZmZmO2ZvbnQtc2l6ZToycmVtO2N1cnNvcjpwb2ludGVyO29wYWNpdHk6Ljc7bGluZS1oZWlnaHQ6MTt9CgovKiBWSURFTyAqLwoudmlkZW8tc2VjdGlvbntiYWNrZ3JvdW5kOnZhcigtLWJnMik7Ym9yZGVyLXRvcDoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO3RyYW5zaXRpb246YmFja2dyb3VuZCAuNHMsYm9yZGVyLWNvbG9yIC40czt9Ci52aWRlby13cmFwe3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjEwMCU7YXNwZWN0LXJhdGlvOjE2Lzk7YmFja2dyb3VuZDp2YXIoLS1iZzMpO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7b3ZlcmZsb3c6aGlkZGVuO21hcmdpbi10b3A6MzJweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC40cyxib3JkZXItY29sb3IgLjRzO30KLnZpZGVvLXdyYXAgdmlkZW97d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtvYmplY3QtZml0OmNvdmVyO30KLnZpZGVvLXBsYWNlaG9sZGVye3Bvc2l0aW9uOmFic29sdXRlO2luc2V0OjA7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtnYXA6MTJweDtjb2xvcjp2YXIoLS10ZXh0Mik7fQoudmlkZW8taWNvbnt3aWR0aDo1MnB4O2hlaWdodDo1MnB4O2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtib3JkZXItcmFkaXVzOjUwJTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7dHJhbnNpdGlvbjpib3JkZXItY29sb3IgLjRzO30KLnZpZGVvLXBsYWNlaG9sZGVyIHNwYW57Zm9udC1zaXplOi43MnJlbTtsZXR0ZXItc3BhY2luZzoycHg7fQoKLyogTUVTU0FHRSAqLwoubWVzc2FnZS1ib3h7YmFja2dyb3VuZDp2YXIoLS1tc2ctYmcpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7cGFkZGluZzo0OHB4IDQwcHg7dGV4dC1hbGlnbjpjZW50ZXI7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC40cyxib3JkZXItY29sb3IgLjRzO30KLm1lc3NhZ2UtbWFpbntmb250LWZhbWlseTonTm90byBTZXJpZiBKUCcsc2VyaWY7Zm9udC1zaXplOmNsYW1wKDEuMDVyZW0sMi41dncsMS40cmVtKTtmb250LXdlaWdodDo0MDA7bGluZS1oZWlnaHQ6MjttYXJnaW4tYm90dG9tOjI0cHg7fQoubWVzc2FnZS1tYWluIHNwYW57Y29sb3I6dmFyKC0tZ29sZCk7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQoubWVzc2FnZS1ib2R5e2ZvbnQtc2l6ZTouOTVyZW07Y29sb3I6dmFyKC0tdGV4dDIpO2ZvbnQtd2VpZ2h0OjMwMDtsaW5lLWhlaWdodDoyLjQ7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQoKLyogQ1RBICovCi5jdGEtc2VjdGlvbntwYWRkaW5nOjgwcHggMjRweCAxMDBweDt0ZXh0LWFsaWduOmNlbnRlcjtwb3NpdGlvbjpyZWxhdGl2ZTtvdmVyZmxvdzpoaWRkZW47fQouY3RhLXNlY3Rpb24+Kjpub3QoLndtKXtwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjE7fQouY3RhLWlubmVye21heC13aWR0aDo1NjBweDttYXJnaW46MCBhdXRvO30KLmN0YS10aXRsZXtmb250LWZhbWlseTonTm90byBTZXJpZiBKUCcsc2VyaWY7Zm9udC1zaXplOmNsYW1wKDEuMnJlbSwzdncsMS43cmVtKTtmb250LXdlaWdodDo0MDA7bGluZS1oZWlnaHQ6MS44O21hcmdpbi1ib3R0b206MTBweDt9Ci5jdGEtc3Vie2ZvbnQtc2l6ZTouODhyZW07Y29sb3I6dmFyKC0tdGV4dDIpO21hcmdpbi1ib3R0b206MzZweDtmb250LXdlaWdodDozMDA7dHJhbnNpdGlvbjpjb2xvciAuNHM7fQouY3RhLWJ0bntkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2dhcDoxMnB4O2JhY2tncm91bmQ6IzA2Qzc1NTtjb2xvcjojZmZmO3RleHQtZGVjb3JhdGlvbjpub25lO3BhZGRpbmc6MjBweCA0OHB4O2ZvbnQtc2l6ZToxcmVtO2ZvbnQtd2VpZ2h0OjUwMDtsZXR0ZXItc3BhY2luZzoycHg7Ym9yZGVyLXJhZGl1czoxMDBweDt0cmFuc2l0aW9uOm9wYWNpdHkgLjJzLHRyYW5zZm9ybSAuMnM7bWluLXdpZHRoOjI3MHB4O2JveC1zaGFkb3c6MCA2cHggMjhweCByZ2JhKDYsMTk5LDg1LC4yKTt9Ci5jdGEtYnRuOmhvdmVye29wYWNpdHk6Ljg4O3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0ycHgpO30KLmN0YS1ub3Rle21hcmdpbi10b3A6MTZweDtmb250LXNpemU6Ljc1cmVtO2NvbG9yOnZhcigtLXRleHQyKTt0cmFuc2l0aW9uOmNvbG9yIC40czt9Ci8qIEdhbGxlcnkgdGVhc2VyICovCi5nYWxsZXJ5LXRlYXNlci1zZWN0aW9ue2JvcmRlci10b3A6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgdmFyKC0tYm9yZGVyKTtiYWNrZ3JvdW5kOnZhcigtLWJnMik7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC40cyxib3JkZXItY29sb3IgLjRzO30KLmdhbGxlcnktdGVhc2VyLWJ0bntkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTBweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ym9yZGVyLXJhZGl1czoxMDBweDtwYWRkaW5nOjEzcHggMjhweDtmb250LXNpemU6Ljg1cmVtO2NvbG9yOnZhcigtLXRleHQyKTt0ZXh0LWRlY29yYXRpb246bm9uZTt0cmFuc2l0aW9uOmFsbCAuM3M7Y3Vyc29yOm5vdC1hbGxvd2VkO29wYWNpdHk6Ljc7fQouZ2FsbGVyeS10ZWFzZXItYnRuOmhvdmVye2JvcmRlci1jb2xvcjp2YXIoLS1nb2xkKTtjb2xvcjp2YXIoLS10ZXh0KTt9Ci5nYWxsZXJ5LXRlYXNlci1iYWRnZXtiYWNrZ3JvdW5kOnJnYmEoMjAxLDE2OCw3NiwuMTUpO2NvbG9yOnZhcigtLWdvbGQpO2ZvbnQtc2l6ZTouNjJyZW07bGV0dGVyLXNwYWNpbmc6MnB4O3BhZGRpbmc6M3B4IDhweDtib3JkZXItcmFkaXVzOjRweDtib3JkZXI6MXB4IHNvbGlkIHJnYmEoMjAxLDE2OCw3NiwuMyk7fQoKLyogRk9PVEVSICovCmZvb3RlcntwYWRkaW5nOjQ4cHggMjRweDt0ZXh0LWFsaWduOmNlbnRlcjtib3JkZXItdG9wOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OmhpZGRlbjt0cmFuc2l0aW9uOmJvcmRlci1jb2xvciAuNHM7fQpmb290ZXI+Kjpub3QoLndtKXtwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjE7fQouZm9vdGVyLWxvZ28tZGFyaywuZm9vdGVyLWxvZ28tbGlnaHR7bWFyZ2luOjAgYXV0byAyMHB4O2Rpc3BsYXk6YmxvY2s7dHJhbnNpdGlvbjpvcGFjaXR5IC40czttYXgtd2lkdGg6bWluKDU4JSw1NjBweCk7d2lkdGg6MTAwJTt9Ci5mb290ZXItbG9nby1kYXJre29wYWNpdHk6Ljk1O30KLmZvb3Rlci1sb2dvLWxpZ2h0e29wYWNpdHk6Ljg1O30KW2RhdGEtdGhlbWU9ImRhcmsiXSAgLmZvb3Rlci1sb2dvLWRhcmsgIHtkaXNwbGF5OmJsb2NrO30KW2RhdGEtdGhlbWU9ImRhcmsiXSAgLmZvb3Rlci1sb2dvLWxpZ2h0IHtkaXNwbGF5Om5vbmU7fQpbZGF0YS10aGVtZT0ibGlnaHQiXSAuZm9vdGVyLWxvZ28tZGFyayAge2Rpc3BsYXk6bm9uZTt9CltkYXRhLXRoZW1lPSJsaWdodCJdIC5mb290ZXItbG9nby1saWdodCB7ZGlzcGxheTpibG9jazt9CltkYXRhLXRoZW1lPSJpbmsiXSAgIC5mb290ZXItbG9nby1kYXJrICB7ZGlzcGxheTpub25lO30KW2RhdGEtdGhlbWU9ImluayJdICAgLmZvb3Rlci1sb2dvLWxpZ2h0IHtkaXNwbGF5OmJsb2NrO29wYWNpdHk6Ljc1O30KW2RhdGEtdGhlbWU9ImxpZ2h0Il0gLmZvb3Rlci1sb2dve29wYWNpdHk6LjM1O30KW2RhdGEtdGhlbWU9ImluayJdIC5mb290ZXItbG9nb3tvcGFjaXR5Oi41NTt9Ci5mb290ZXItdGFnbGluZXtmb250LWZhbWlseTonQ29ybW9yYW50IEdhcmFtb25kJyxzZXJpZjtmb250LXNpemU6Ljk1cmVtO2ZvbnQtd2VpZ2h0OjMwMDtsZXR0ZXItc3BhY2luZzo0cHg7Y29sb3I6dmFyKC0tdGV4dDIpO21hcmdpbi1ib3R0b206MTBweDt0cmFuc2l0aW9uOmNvbG9yIC40czt9Ci5mb290ZXItY29weXtmb250LXNpemU6LjZyZW07bGV0dGVyLXNwYWNpbmc6MnB4O2NvbG9yOnZhcigtLXRleHQyKTtvcGFjaXR5Oi41O3RyYW5zaXRpb246Y29sb3IgLjRzO30KCgovKiBOVU1BTiBTRUNUSU9OICovCi5udW1hbi1zZWN0aW9uIHsgYmFja2dyb3VuZDogdmFyKC0tYmcyKTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOyB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIC40cywgYm9yZGVyLWNvbG9yIC40czsgfQoubnVtYW4taW5uZXIgeyBtYXgtd2lkdGg6IDkwMHB4OyBtYXJnaW46IDAgYXV0bzsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAyODBweCAxZnI7IGdhcDogNjBweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQoubnVtYW4tcGhvdG9zIHsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgZ2FwOiAxNnB4OyBhbGlnbi1pdGVtczogY2VudGVyOyB9Ci5udW1hbi1waG90by1tYWluIHsgd2lkdGg6IDIwMHB4OyBoZWlnaHQ6IDIwMHB4OyBib3JkZXItcmFkaXVzOiA1MCU7IG9iamVjdC1maXQ6IGNvdmVyOyBib3JkZXI6IDNweCBzb2xpZCB2YXIoLS1nb2xkLWxpbmUpOyB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgLjRzOyB9Ci5udW1hbi1waG90by1zdWIgeyB3aWR0aDogMTQwcHg7IGhlaWdodDogMTQwcHg7IGJvcmRlci1yYWRpdXM6IDUwJTsgb2JqZWN0LWZpdDogY292ZXI7IG9wYWNpdHk6IC43NTsgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYm9yZGVyKTsgdHJhbnNpdGlvbjogYm9yZGVyLWNvbG9yIC40cywgb3BhY2l0eSAuNHM7IH0KLm51bWFuLW5hbWUgeyBmb250LWZhbWlseTogJ05vdG8gU2VyaWYgSlAnLCBzZXJpZjsgZm9udC1zaXplOiBjbGFtcCgxLjRyZW0sM3Z3LDEuOXJlbSk7IGZvbnQtd2VpZ2h0OiA0MDA7IGxldHRlci1zcGFjaW5nOiAycHg7IG1hcmdpbi1ib3R0b206IDRweDsgfQoubnVtYW4tdGl0bGUgeyBmb250LXNpemU6IC43NXJlbTsgbGV0dGVyLXNwYWNpbmc6IDRweDsgY29sb3I6IHZhcigtLWdvbGQpOyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBtYXJnaW4tYm90dG9tOiAyNHB4OyBmb250LXdlaWdodDogNTAwOyB0cmFuc2l0aW9uOiBjb2xvciAuNHM7IH0KLm51bWFuLXRpdGxlOjpiZWZvcmUgeyBjb250ZW50OiAn4oCUICc7IH0KLm51bWFuLWJvZHkgeyBmb250LXNpemU6IC45NXJlbTsgY29sb3I6IHZhcigtLXRleHQyKTsgZm9udC13ZWlnaHQ6IDMwMDsgbGluZS1oZWlnaHQ6IDIuNjsgbWFyZ2luLWJvdHRvbTogMjhweDsgdHJhbnNpdGlvbjogY29sb3IgLjRzOyB9Ci5udW1hbi1ib2R5IHN0cm9uZyB7IGNvbG9yOiB2YXIoLS10ZXh0KTsgZm9udC13ZWlnaHQ6IDUwMDsgfQoubnVtYW4tbWV0YSB7IGRpc3BsYXk6IGZsZXg7IGZsZXgtd3JhcDogd3JhcDsgZ2FwOiAxMnB4OyBtYXJnaW4tYm90dG9tOiAyOHB4OyB9Ci5udW1hbi10YWcgeyBkaXNwbGF5OiBpbmxpbmUtZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA2cHg7IGZvbnQtc2l6ZTogLjcycmVtOyBsZXR0ZXItc3BhY2luZzogMnB4OyBjb2xvcjogdmFyKC0tdGV4dDIpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOyBwYWRkaW5nOiA1cHggMTRweDsgYm9yZGVyLXJhZGl1czogMTAwcHg7IHRyYW5zaXRpb246IGNvbG9yIC40cywgYm9yZGVyLWNvbG9yIC40czsgfQoubnVtYW4taWcgeyBkaXNwbGF5OiBpbmxpbmUtZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA4cHg7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIzgzM2FiNCwjZmQxZDFkLCNmY2IwNDUpOyBjb2xvcjogI2ZmZjsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBmb250LXNpemU6IC44cmVtOyBmb250LXdlaWdodDogNTAwOyBsZXR0ZXItc3BhY2luZzogMnB4OyBwYWRkaW5nOiAxMnB4IDI4cHg7IGJvcmRlci1yYWRpdXM6IDEwMHB4OyB0cmFuc2l0aW9uOiBvcGFjaXR5IC4ycywgdHJhbnNmb3JtIC4yczsgfQoubnVtYW4taWc6aG92ZXIgeyBvcGFjaXR5OiAuODg7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsgfQpAbWVkaWEobWF4LXdpZHRoOjcwMHB4KSB7CiAgICAubnVtYW4taW5uZXIgeyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjsgZ2FwOiAzMnB4OyB9CiAgICAubnVtYW4tcGhvdG9zIHsgZmxleC1kaXJlY3Rpb246IHJvdzsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IH0KICAgIC5udW1hbi1waG90by1tYWluIHsgd2lkdGg6IDE1MHB4OyBoZWlnaHQ6IDE1MHB4OyB9CiAgICAubnVtYW4tcGhvdG8tc3ViIHsgd2lkdGg6IDEwMHB4OyBoZWlnaHQ6IDEwMHB4OyB9Cn0KCgovKiBXSFkgS0lNQVJVIFNUT1JZIFNFQ1RJT04gKi8KLndoeS1zZWN0aW9uIHsgYmFja2dyb3VuZDogdmFyKC0tYmcpOyB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIC40czsgfQoud2h5LWlubmVyIHsgbWF4LXdpZHRoOiA3NjBweDsgbWFyZ2luOiAwIGF1dG87IH0KLndoeS1sZWFkIHsgZm9udC1mYW1pbHk6ICdOb3RvIFNlcmlmIEpQJywgc2VyaWY7IGZvbnQtc2l6ZTogY2xhbXAoMS4xNXJlbSwyLjV2dywxLjVyZW0pOyBmb250LXdlaWdodDogNDAwOyBsaW5lLWhlaWdodDogMi4yOyBsZXR0ZXItc3BhY2luZzogMXB4OyBjb2xvcjogdmFyKC0tdGV4dCk7IG1hcmdpbi1ib3R0b206IDQ4cHg7IGJvcmRlci1sZWZ0OiAycHggc29saWQgdmFyKC0tZ29sZC1saW5lKTsgcGFkZGluZy1sZWZ0OiAyNHB4OyB0cmFuc2l0aW9uOiBjb2xvciAuNHMsIGJvcmRlci1jb2xvciAuNHM7IH0KLndoeS1sZWFkIGVtIHsgY29sb3I6IHZhcigtLWdvbGQpOyBmb250LXN0eWxlOiBub3JtYWw7IHRyYW5zaXRpb246IGNvbG9yIC40czsgfQoud2h5LWJvZHkgeyBmb250LXNpemU6IC45NXJlbTsgY29sb3I6IHZhcigtLXRleHQyKTsgbGluZS1oZWlnaHQ6IDIuODsgZm9udC13ZWlnaHQ6IDMwMDsgbWFyZ2luLWJvdHRvbTogMzJweDsgdHJhbnNpdGlvbjogY29sb3IgLjRzOyB9Ci53aHktYm9keSBzdHJvbmcgeyBjb2xvcjogdmFyKC0tdGV4dCk7IGZvbnQtd2VpZ2h0OiA1MDA7IH0KLndoeS1kaXZpZGVyIHsgd2lkdGg6IDQwcHg7IGhlaWdodDogMXB4OyBiYWNrZ3JvdW5kOiB2YXIoLS1nb2xkLWxpbmUpOyBtYXJnaW46IDQwcHggMDsgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAuNHM7IH0KLndoeS1xdW90ZSB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgYmFja2dyb3VuZDogdmFyKC0tYmcyKTsgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsgYm9yZGVyLXJhZGl1czogMTJweDsgcGFkZGluZzogMzJweCAzNnB4OyBtYXJnaW46IDQwcHggMDsgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAuNHMsIGJvcmRlci1jb2xvciAuNHM7IH0KLndoeS1xdW90ZTo6YmVmb3JlIHsgY29udGVudDogJyInOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTE4cHg7IGxlZnQ6IDI4cHg7IGZvbnQtZmFtaWx5OiAnQ29ybW9yYW50IEdhcmFtb25kJywgc2VyaWY7IGZvbnQtc2l6ZTogNXJlbTsgbGluZS1oZWlnaHQ6IDE7IGNvbG9yOiB2YXIoLS1nb2xkKTsgb3BhY2l0eTogLjQ7IHRyYW5zaXRpb246IGNvbG9yIC40czsgfQoud2h5LXF1b3RlIHAgeyBmb250LWZhbWlseTogJ05vdG8gU2VyaWYgSlAnLCBzZXJpZjsgZm9udC1zaXplOiAuOTVyZW07IGxpbmUtaGVpZ2h0OiAyLjQ7IGNvbG9yOiB2YXIoLS10ZXh0Mik7IGZvbnQtc3R5bGU6IGl0YWxpYzsgdHJhbnNpdGlvbjogY29sb3IgLjRzOyB9Ci53aHktcXVvdGUgY2l0ZSB7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tdG9wOiAxNnB4OyBmb250LXNpemU6IC43MnJlbTsgbGV0dGVyLXNwYWNpbmc6IDNweDsgY29sb3I6IHZhcigtLWdvbGQpOyBmb250LXN0eWxlOiBub3JtYWw7IHRyYW5zaXRpb246IGNvbG9yIC40czsgfQoud2h5LWNvbmNsdXNpb24geyBmb250LWZhbWlseTogJ05vdG8gU2VyaWYgSlAnLCBzZXJpZjsgZm9udC1zaXplOiBjbGFtcCgxcmVtLDJ2dywxLjI1cmVtKTsgbGluZS1oZWlnaHQ6IDIuNDsgY29sb3I6IHZhcigtLXRleHQpOyBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYm9yZGVyKTsgcGFkZGluZy10b3A6IDM2cHg7IG1hcmdpbi10b3A6IDM2cHg7IHRyYW5zaXRpb246IGNvbG9yIC40cywgYm9yZGVyLWNvbG9yIC40czsgfQoud2h5LWNvbmNsdXNpb24gc3Ryb25nIHsgY29sb3I6IHZhcigtLWdvbGQpOyBmb250LXdlaWdodDogNjAwOyB0cmFuc2l0aW9uOiBjb2xvciAuNHM7IH0KCi8qIFJFVkVBTCAqLwoucmV2ZWFse29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgyMHB4KTt0cmFuc2l0aW9uOm9wYWNpdHkgLjdzIGN1YmljLWJlemllciguMjIsMSwuMzYsMSksdHJhbnNmb3JtIC43cyBjdWJpYy1iZXppZXIoLjIyLDEsLjM2LDEpO30KLnJldmVhbC52aXNpYmxle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKTt9CgpAbWVkaWEobWF4LXdpZHRoOjY0MHB4KXsKICAgIC5pbnRyby1jYXJkc3tncmlkLXRlbXBsYXRlLWNvbHVtbnM6MWZyO30KICAgIC5tZXNzYWdlLWJveHtwYWRkaW5nOjI4cHggMThweDt9CiAgICAuY3RhLWJ0bnttaW4td2lkdGg6dW5zZXQ7d2lkdGg6MTAwJTttYXgtd2lkdGg6MzAwcHg7fQogICAgLmhlcm8tY2F0Y2gtd3JhcHttaW4taGVpZ2h0OjEyMHB4O30KfQo8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5IGRhdGEtdGhlbWU9IiUlS0lNQVJVX1RIRU1FJSUiPgoKCjwhLS0gSEVST++8iOmAj+OBi+OBl+OBguOCiu+8iSAtLT4KPHNlY3Rpb24gY2xhc3M9Imhlcm8iPgogICAgPGRpdiBjbGFzcz0id20iPjxpbWcgc3JjPSJpbWFnZXMvbG9nby5wbmciIGFsdD0iIj48L2Rpdj4KICAgIDxkaXYgY2xhc3M9Imhlcm8tYmFkZ2UiPktJTUFSVSDigJQgTmV3IFdheSB0byBQcm9wb3NlPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJoZXJvLWNhdGNoLXdyYXAiPgogICAgICAgIDxkaXYgY2xhc3M9ImNhdGNoLWl0ZW0gYWN0aXZlIj7jgYLjgarjgZ/jga7mioDooZPjga/jgIHjgoLjgaPjgag8c3Bhbj7kvJ3jgo/jgos8L3NwYW4+44CCPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iY2F0Y2gtaXRlbSI+6IG35Lq644Gu5LuV5LqL44GM44CB55S76Z2i44Gu5Lit44GnPHNwYW4+5YuV44GN5Ye644GZPC9zcGFuPuOAgjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImNhdGNoLWl0ZW0iPuaPkOahiOOBjOWkieOCj+OCjOOBsOOAgTxzcGFuPuWlkee0hDwvc3Bhbj7jgYzlpInjgo/jgovjgII8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjYXRjaC1pdGVtIj7jgrnjg57jg5vkuIDjgaTjgafjgIE8c3Bhbj7jg5fjg608L3NwYW4+44Gu5o+Q5qGI5pu444CCPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iY2F0Y2gtaXRlbSI+6KaL44Gb5pa544KS5aSJ44GI44KL44Gg44GR44Gn44CBPHNwYW4+57WQ5p6cPC9zcGFuPuOBjOWkieOCj+OCi+OAgjwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJoZXJvLWRvdHMiPgogICAgICAgIDxkaXYgY2xhc3M9Imhlcm8tZG90IGFjdGl2ZSIgZGF0YS1kb3Q9IjAiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imhlcm8tZG90IiBkYXRhLWRvdD0iMSI+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaGVyby1kb3QiIGRhdGEtZG90PSIyIj48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJoZXJvLWRvdCIgZGF0YS1kb3Q9IjMiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imhlcm8tZG90IiBkYXRhLWRvdD0iNCI+PC9kaXY+CiAgICA8L2Rpdj4KICAgIDxwIGNsYXNzPSJoZXJvLXN1YiI+5pa95bel44Gu54++5aC044GM44CB44Gd44Gu44G+44G+5pyA6auY44Gu5o+Q5qGI5pu444Gr44Gq44KL44CCPGJyPktJTUFSVeOBjOOAgeOBguOBquOBn+OBruWWtualreOCkuWkieOBiOOBvuOBmeOAgjwvcD4KICAgIDxkaXYgY2xhc3M9Imhlcm8tc2Nyb2xsIj48c3Bhbj5TY3JvbGw8L3NwYW4+PGRpdiBjbGFzcz0ic2Nyb2xsLWJhciI+PC9kaXY+PC9kaXY+Cjwvc2VjdGlvbj4KCjwhLS0gSU5UUk/vvIjpgI/jgYvjgZfjgarjgZfvvIkgLS0+CjxzZWN0aW9uIGNsYXNzPSJzZWN0aW9uIGludHJvIj4KICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taW5uZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InJldmVhbCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tdGFnIj5XaGF0IGlzIEtJTUFSVTwvZGl2PgogICAgICAgICAgICA8aDIgY2xhc3M9InNlY3Rpb24tdGl0bGUiPuOBk+OCk+OBquOBk+OBqOOBjOOAgeOBp+OBjeOCi+OCiOOBhuOBq+OBquOCiuOBvuOBl+OBn+OAgjwvaDI+CiAgICAgICAgICAgIDxwIGNsYXNzPSJzZWN0aW9uLWJvZHkiPuOBiuWuouanmOOBruePvuWgtOWGmeecn+OBq+S7leS4iuOBjOOCiuOCpOODoeODvOOCuOOCkumHjeOBreOBn+ODk+ODleOCqeODvOOCouODleOCv+ODvOaPkOahiOabuOOCkuOAgVVSTOOBsuOBqOOBpOOBp+WxiuOBkeOCi+OAguOCueODnuODm+OBp+inpuOCjOOCi+OAgeOCpOODs+OCv+ODqeOCr+ODhuOCo+ODluOBquaPkOahiOOBruW9ouOBp+OBmeOAgjwvcD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnRyby1jYXJkcyByZXZlYWwiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnRyby1jYXJkIj48ZGl2IGNsYXNzPSJpbnRyby1jYXJkLW51bSI+MDE8L2Rpdj48ZGl2IGNsYXNzPSJpbnRyby1jYXJkLXRpdGxlIj7lhpnnnJ/jgpLlvZPjgabovrzjgoA8L2Rpdj48ZGl2IGNsYXNzPSJpbnRyby1jYXJkLWJvZHkiPuaWveW3peWJjeOBruePvuWgtOWGmeecn+OBq+S7leS4iuOBjOOCiuOCpOODoeODvOOCuOOCkumHjeOBreOCizwvZGl2PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnRyby1jYXJkIj48ZGl2IGNsYXNzPSJpbnRyby1jYXJkLW51bSI+MDI8L2Rpdj48ZGl2IGNsYXNzPSJpbnRyby1jYXJkLXRpdGxlIj5VUkzjgaflsYrjgZHjgos8L2Rpdj48ZGl2IGNsYXNzPSJpbnRyby1jYXJkLWJvZHkiPkxJTkXjgafpgIHjgovjgaDjgZHjgILnibnliKXjgarjgqLjg5fjg6rjga/kuI3opoE8L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW50cm8tY2FyZCI+PGRpdiBjbGFzcz0iaW50cm8tY2FyZC1udW0iPjAzPC9kaXY+PGRpdiBjbGFzcz0iaW50cm8tY2FyZC10aXRsZSI+57+M5pyd44CB6YCj57Wh44GM5p2l44KLPC9kaXY+PGRpdiBjbGFzcz0iaW50cm8tY2FyZC1ib2R5Ij7jgYrlrqLmp5jjgYzlrrbjgafopovjgabjgIHoh6rliIbjgafmsbrjgoHjgos8L2Rpdj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L3NlY3Rpb24+Cgo8IS0tIEJBIERBVEEgKEpTT04pIOKAlCDnrqHnkIbnlLvpnaLjgYvjgonoh6rli5XnlJ/miJAgLS0+CjxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vanNvbiIgaWQ9ImJhLWRhdGEiPltdPC9zY3JpcHQ+CjwhLS0gQkHvvIjpgI/jgYvjgZfjgarjgZfvvIkgLS0+CjxzZWN0aW9uIGNsYXNzPSJzZWN0aW9uIiBpZD0iYmEtc2VjdGlvbiI+CiAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWlubmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJyZXZlYWwiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLXRhZyI+QmVmb3JlIC8gQWZ0ZXI8L2Rpdj4KICAgICAgICAgICAgPGgyIGNsYXNzPSJzZWN0aW9uLXRpdGxlIj7lrp/pmpvjgavop6bjgaPjgabjgb/jgabjgY/jgaDjgZXjgYTjgII8L2gyPgogICAgICAgICAgICA8cCBjbGFzcz0ic2VjdGlvbi1ib2R5Ij7jgrnjg6njgqTjg4Djg7zjgpLli5XjgYvjgZnjgajjgIHmlr3lt6XliY3jgajmlr3lt6XlvozjgYzliIfjgormm7/jgo/jgorjgb7jgZnjgII8L3A+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBpZD0iYmEtbGlzdCIgc3R5bGU9Im1hcmdpbi10b3A6MzZweDsiPjwvZGl2PgogICAgPC9kaXY+Cjwvc2VjdGlvbj4KPCEtLSBMaWdodGJveCAtLT4KPGRpdiBjbGFzcz0ibGlnaHRib3giIGlkPSJsaWdodGJveCIgb25jbGljaz0iY2xvc2VMaWdodGJveCgpIj4KICA8c3BhbiBjbGFzcz0ibGlnaHRib3gtY2xvc2UiPsOXPC9zcGFuPgogIDxpbWcgaWQ9ImxpZ2h0Ym94LWltZyIgc3JjPSIiIGFsdD0iIj4KPC9kaXY+Cgo8IS0tIEdBTExFUlkgVEVBU0VSIC0tPgo8c2VjdGlvbiBjbGFzcz0ic2VjdGlvbiBnYWxsZXJ5LXRlYXNlci1zZWN0aW9uIHJldmVhbCIgaWQ9ImdhbGxlcnktdGVhc2VyIj4KICA8ZGl2IGNsYXNzPSJzZWN0aW9uLWlubmVyIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4KICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tdGFnIiBzdHlsZT0ianVzdGlmeS1jb250ZW50OmNlbnRlcjsiPlBvcnRmb2xpbzwvZGl2PgogICAgPGgyIGNsYXNzPSJzZWN0aW9uLXRpdGxlIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMnB4OyI+44Gd44Gu5LuW44Gu5pa95bel5LqL5L6L44Gv44GT44Gh44KJPC9oMj4KICAgIDxwIGNsYXNzPSJzZWN0aW9uLWJvZHkiIHN0eWxlPSJtYXgtd2lkdGg6NDgwcHg7bWFyZ2luOjAgYXV0byAyOHB4OyI+44OR44K/44O844Oz5Yil44O757Sg5p2Q5Yil44Gu44Od44O844OI44OV44Kp44Oq44Kq44Ku44Oj44Op44Oq44O844KS5rqW5YKZ44GX44Gm44GE44G+44GZ44CCPC9wPgogICAgPGEgaHJlZj0iIyIgY2xhc3M9ImdhbGxlcnktdGVhc2VyLWJ0biIgb25jbGljaz0icmV0dXJuIGZhbHNlOyI+CiAgICAgIDxzcGFuIGNsYXNzPSJnYWxsZXJ5LXRlYXNlci1iYWRnZSI+5rqW5YKZ5LitPC9zcGFuPgogICAgICDmlr3lt6Xkuovkvovjgq7jg6Pjg6njg6rjg7zjgpLopovjgosKICAgICAgPHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggZD0iTTUgMTJoMTRNMTIgNWw3IDctNyA3Ii8+PC9zdmc+CiAgICA8L2E+CiAgICA8cCBzdHlsZT0iZm9udC1zaXplOi43MnJlbTtjb2xvcjp2YXIoLS10ZXh0Mik7bWFyZ2luLXRvcDoxNHB4O2xldHRlci1zcGFjaW5nOjFweDsiPkNPTUlORyBTT09OPC9wPgogIDwvZGl2Pgo8L3NlY3Rpb24+Cgo8IS0tIFZJREVP77yI6YCP44GL44GX44Gq44GX77yJIC0tPgo8c2VjdGlvbiBjbGFzcz0ic2VjdGlvbiB2aWRlby1zZWN0aW9uIj4KICAgIDxkaXYgY2xhc3M9InNlY3Rpb24taW5uZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InJldmVhbCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tdGFnIj5DaW5lbWF0aWMgVmlldzwvZGl2PgogICAgICAgICAgICA8aDIgY2xhc3M9InNlY3Rpb24tdGl0bGUiPue0oOadkOOBruS4lueVjOOCkuOAgeaYoOWDj+OBp+OAgjwvaDI+CiAgICAgICAgICAgIDxwIGNsYXNzPSJzZWN0aW9uLWJvZHkiPumzpeims+Wbs+OBi+OCiee0oOadkOOBuOi/keWvhOOCi+aYoOWDj+OChOOAgeOCueOCseODg+ODgeOBi+OCieODquOCouODq+OBuOOBruWkieWMluOBquOBqeOAgemtheOBm+OCi+WLleeUu+OCkuW3ruOBl+i+vOOCgeOBvuOBmeOAguS9v+OCj+OBquOBhOWgtOWQiOOBr+OBk+OBruODluODreODg+OCr+OBlOOBqOWJiumZpOOBl+OBpuOBj+OBoOOBleOBhOOAgjwvcD4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJ2aWRlby13cmFwIHJldmVhbCI+CiAgICAgICAgICAgIDx2aWRlbyBpZD0icHJvbW8tdmlkZW8iIHNyYz0iIiBwb3N0ZXI9IiIgYXV0b3BsYXkgbXV0ZWQgbG9vcCBwbGF5c2lubGluZT48L3ZpZGVvPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ2aWRlby1wbGFjZWhvbGRlciIgaWQ9InZpZGVvLXBsYWNlaG9sZGVyIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InZpZGVvLWljb24iPjxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9ImN1cnJlbnRDb2xvciIgc3R5bGU9ImNvbG9yOnZhcigtLWdvbGQpIj48cGF0aCBkPSJNOCA1djE0bDExLTd6Ii8+PC9zdmc+PC9kaXY+CiAgICAgICAgICAgICAgICA8c3Bhbj5zcmMg44Gr5YuV55S7IFVSTCDjgpLlhaXjgozjgabjgY/jgaDjgZXjgYQ8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+Cjwvc2VjdGlvbj4KCjwhLS0gTUVTU0FHRe+8iOmAj+OBi+OBl+OBquOBl++8iSAtLT4KPHNlY3Rpb24gY2xhc3M9InNlY3Rpb24iPgogICAgPGRpdiBjbGFzcz0ic2VjdGlvbi1pbm5lciI+CiAgICAgICAgPGRpdiBjbGFzcz0ibWVzc2FnZS1ib3ggcmV2ZWFsIj4KICAgICAgICAgICAgPHAgY2xhc3M9Im1lc3NhZ2UtbWFpbiI+44K144Oz44OX44Or44KS5oyB44Gj44Gm6KGM44Gj44Gm44KC5aWR57SE44GM5Y+W44KM44Gq44GE44CBPGJyPuOBneOCk+OBquaZguS7o+OBrzxzcGFuPuOCguOBhue1guOCj+OCijwvc3Bhbj7jgavjgZfjgb7jgZvjgpPjgYvjgII8L3A+CiAgICAgICAgICAgIDxwIGNsYXNzPSJtZXNzYWdlLWJvZHkiPuaKgOihk+OBr+acrOeJqeOBquOBruOBq+OAgeS8neOBiOaWueOBjOi/veOBhOOBpOOBhOOBpuOBhOOBquOBhOOBoOOBkeOAgjxicj5LSU1BUlXjgpLkvb/jgYjjgbDjgIHjgYrlrqLmp5jjgYzoh6rliIbjgafjgIzmsbrjgoHjgovjgI3jgojjgYbjgavjgarjgorjgb7jgZnjgII8L3A+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KPC9zZWN0aW9uPgoKCjwhLS0gTlVNQU4gU0VDVElPTiAtLT4KPHNlY3Rpb24gY2xhc3M9InNlY3Rpb24gbnVtYW4tc2VjdGlvbiI+CiAgICA8ZGl2IGNsYXNzPSJudW1hbi1pbm5lciI+CiAgICAgICAgPGRpdiBjbGFzcz0ibnVtYW4tcGhvdG9zIHJldmVhbCI+CiAgICAgICAgICAgIDxpbWcgY2xhc3M9Im51bWFuLXBob3RvLW1haW4iIHNyYz0iaW1hZ2VzL251bWFuX2NvbG9yLmpwZyIgYWx0PSLjgrvjg6Hjg7Pjg4jjgqLjg7zjg4bjgqPjgrnjg4gg44Gs44O844G+44KTIj4KICAgICAgICAgICAgPGltZyBjbGFzcz0ibnVtYW4tcGhvdG8tc3ViIiAgc3JjPSJpbWFnZXMvbnVtYW5fcG9ydHJhaXQuanBnIiBhbHQ9IuOBrOODvOOBvuOCkyI+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibnVtYW4tdGV4dCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJldmVhbCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLXRhZyI+QWJvdXQ8L2Rpdj4KICAgICAgICAgICAgICAgIDxoMiBjbGFzcz0ibnVtYW4tbmFtZSI+44K744Oh44Oz44OI44Ki44O844OG44Kj44K544OIPGJyPuOBrOODvOOBvuOCkzwvaDI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJudW1hbi10aXRsZSI+Q2VtZW50IEFydGlzdCBOdeKYhk1hbjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibnVtYW4tbWV0YSByZXZlYWwiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Im51bWFuLXRhZyI+8J+TjSDkuInph43nnIwg5p2+6Ziq5biCPC9zcGFuPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9Im51bWFuLXRhZyI+8J+XkyDjg63jg7zjg6njg7zjgrnjg4jjg7zjg7PmrbQgMjAxOeW5tOOAnDwvc3Bhbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxwIGNsYXNzPSJudW1hbi1ib2R5IHJldmVhbCI+CiAgICAgICAgICAgICAgICA8c3Ryb25nPjE25q2z44GL44KJ5bu66Kit5qWt55WMPC9zdHJvbmc+44Gr6aOb44Gz6L6844G/44CB6ZW35bm044Gr44KP44Gf44Gj44Gm5Luu6Kit5LqL5qWt44O75LiL6KuL44GR44Gu5LiW55WM44Gn5YON44GE44Gm44GN44Gf44CCPGJyPjxicj4KICAgICAgICAgICAgICAgIOOBhOOBpOOBl+OBi+OAgeOAjDxzdHJvbmc+44Kr44K/44OB44Gr5q6L44KL5LuV5LqL44GM44GX44Gf44GEPC9zdHJvbmc+44CN44Go5oCd44GG44KI44GG44Gr44Gq44Gj44Gf44CCPGJyPgogICAgICAgICAgICAgICAg44Gd44KT44Gq44Go44GN5Ye65Lya44Gj44Gf44Gu44GM44CB44Ot44O844Op44O844K544OI44O844Oz44CCPGJyPjxicj4KICAgICAgICAgICAgICAgIOOBiuWuouOBleOCk+OBruWWnOOBtuWjsOOAgeeskemhlOOBq+ebtOaOpeOBteOCjOOCieOCjOOCi+S7leS6i+OAgjxicj4KICAgICAgICAgICAgICAgIOOBneOBl+OBpuOAgeOBk+OBruS7leS6i+OBq+ecn+WJo+OBq+WQkeOBjeWQiOOBhjxzdHJvbmc+54ax44GE5oCd44GE44KS5oyB44Gj44Gf5Luy6ZaT44Gf44Gh44Go5a6a5pyf55qE44Gr5Lya44GI44KL55Kw5aKDPC9zdHJvbmc+44CCPGJyPgogICAgICAgICAgICAgICAg5Ye65Lya44GG44Gf44Gz44Gr5rCX44Gl44GN44GM44GC44KK44CB5a2m44Gz44GM44GC44KL44CCPGJyPjxicj4KICAgICAgICAgICAgICAgIOOBk+OBrue0oOaZtOOCieOBl+OBhOS7leS6i+OCkuOAgeOCguOBo+OBqOWkmuOBj+OBruS6uuOBq+efpeOBo+OBpuOCguOCieOBhOOBn+OBhOOAgjxicj4KICAgICAgICAgICAgICAgIOmrmOOBhOaKgOihk+OCkuaMgeOBpOS7sumWk+OBn+OBoeOBq+OAgeOCguOBo+OBqOiHquS/oeOCkuaMgeOBo+OBpui8neOBkeOCi+apn+S8muOCkuWxiuOBkeOBn+OBhOOAgjxicj4KICAgICAgICAgICAgICAgIOOBneOBl+OBpuOAgTxzdHJvbmc+56eB6Ieq6Lqr44KS6IKy44Gm44Gm44GP44KM44GfUk9MTEVSIFNUT05F44Go44GE44GG5qWt55WM44GrPC9zdHJvbmc+44CB44GT44Gu44OX44Ot44K444Kn44Kv44OI44Gn5oGp6L+U44GX44GM44GX44Gf44GE44CCPGJyPjxicj4KICAgICAgICAgICAgICAgIOOBneOCjOOBjOOAgUtJTUFSVeOBruWOn+eCueOBp+OBmeOAggogICAgICAgICAgICA8L3A+CiAgICAgICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vd3d3Lmluc3RhZ3JhbS5jb20vY2VtZW50YXJ0X251bWFuLyIgY2xhc3M9Im51bWFuLWlnIHJldmVhbCIgdGFyZ2V0PSJfYmxhbmsiIHJlbD0ibm9vcGVuZXIiPgogICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTIgMi4xNjNjMy4yMDQgMCAzLjU4NC4wMTIgNC44NS4wNyAzLjI1Mi4xNDggNC43NzEgMS42OTEgNC45MTkgNC45MTkuMDU4IDEuMjY1LjA2OSAxLjY0NS4wNjkgNC44NDkgMCAzLjIwNS0uMDEyIDMuNTg0LS4wNjkgNC44NDktLjE0OSAzLjIyNS0xLjY2NCA0Ljc3MS00LjkxOSA0LjkxOS0xLjI2Ni4wNTgtMS42NDQuMDctNC44NS4wNy0zLjIwNCAwLTMuNTg0LS4wMTItNC44NDktLjA3LTMuMjYtLjE0OS00Ljc3MS0xLjY5OS00LjkxOS00LjkyLS4wNTgtMS4yNjUtLjA3LTEuNjQ0LS4wNy00Ljg0OSAwLTMuMjA0LjAxMy0zLjU4My4wNy00Ljg0OS4xNDktMy4yMjcgMS42NjQtNC43NzEgNC45MTktNC45MTkgMS4yNjYtLjA1NyAxLjY0NS0uMDY5IDQuODQ5LS4wNjl6bTAtMi4xNjNjLTMuMjU5IDAtMy42NjcuMDE0LTQuOTQ3LjA3Mi00LjM1OC4yLTYuNzggMi42MTgtNi45OCA2Ljk4LS4wNTkgMS4yODEtLjA3MyAxLjY4OS0uMDczIDQuOTQ4IDAgMy4yNTkuMDE0IDMuNjY4LjA3MiA0Ljk0OC4yIDQuMzU4IDIuNjE4IDYuNzggNi45OCA2Ljk4IDEuMjgxLjA1OCAxLjY4OS4wNzIgNC45NDguMDcyIDMuMjU5IDAgMy42NjgtLjAxNCA0Ljk0OC0uMDcyIDQuMzU0LS4yIDYuNzgyLTIuNjE4IDYuOTc5LTYuOTguMDU5LTEuMjguMDczLTEuNjg5LjA3My00Ljk0OCAwLTMuMjU5LS4wMTQtMy42NjctLjA3Mi00Ljk0Ny0uMTk2LTQuMzU0LTIuNjE3LTYuNzgtNi45NzktNi45OC0xLjI4MS0uMDU5LTEuNjktLjA3My00Ljk0OS0uMDczem0wIDUuODM4Yy0zLjQwMyAwLTYuMTYyIDIuNzU5LTYuMTYyIDYuMTYyczIuNzU5IDYuMTYzIDYuMTYyIDYuMTYzIDYuMTYyLTIuNzU5IDYuMTYyLTYuMTYzYzAtMy40MDMtMi43NTktNi4xNjItNi4xNjItNi4xNjJ6bTAgMTAuMTYyYy0yLjIwOSAwLTQtMS43OS00LTQgMC0yLjIwOSAxLjc5MS00IDQtNHM0IDEuNzkxIDQgNGMwIDIuMjEtMS43OTEgNC00IDR6bTYuNDA2LTExLjg0NWMtLjc5NiAwLTEuNDQxLjY0NS0xLjQ0MSAxLjQ0cy42NDUgMS40NCAxLjQ0MSAxLjQ0Yy43OTUgMCAxLjQzOS0uNjQ1IDEuNDM5LTEuNDRzLS42NDQtMS40NC0xLjQzOS0xLjQ0eiIvPjwvc3ZnPgogICAgICAgICAgICAgICAgQGNlbWVudGFydF9udW1hbgogICAgICAgICAgICA8L2E+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KPC9zZWN0aW9uPgoKCjwhLS0gV0hZIEtJTUFSVSBTVE9SWSAtLT4KPHNlY3Rpb24gY2xhc3M9InNlY3Rpb24gd2h5LXNlY3Rpb24iIGlkPSJ3aHkta2ltYXJ1Ij4KICAgIDxkaXYgY2xhc3M9IndoeS1pbm5lciI+CiAgICAgICAgPGRpdiBjbGFzcz0ic2VjdGlvbi10YWcgcmV2ZWFsIj5XaHkgS0lNQVJVPC9kaXY+CgogICAgICAgIDxwIGNsYXNzPSJ3aHktbGVhZCByZXZlYWwiPgogICAgICAgICAgICDjg63jg7zjg6njg7zjgrnjg4jjg7zjg7Pjga/jgIHoo73lk4Hjgafjga/jgarjgYTjgII8YnI+CiAgICAgICAgICAgIDxlbT7jgZnjgbnjgabjgYzjg5Xjg6rjg7zjg4/jg7Pjg4njgafjgIHnj77loLTjgafjgb/jgpPjgarjgYzku5XkuIrjgZLjgabjgYTjgY/mioDooZM8L2VtPuOBoOOAggogICAgICAgIDwvcD4KCiAgICAgICAgPHAgY2xhc3M9IndoeS1ib2R5IHJldmVhbCI+CiAgICAgICAgICAgIOWUr+S4gOeEoeS6jOOBruOCquODquOCuOODiuODq+ODh+OCtuOCpOODs+OAguOBneOCjOOBr+ODreODvOODqeODvOOCueODiOODvOODs+OBruacgOWkp+OBruW8t+OBv+OBp+OBguOCiuOAgeWQjOaZguOBqzxzdHJvbmc+5aSn44GN44Gq6Kqy6aGMPC9zdHJvbmc+44Gn44KC44GC44Gj44Gf44CCPGJyPjxicj4KICAgICAgICAgICAg44GK5a6i44GV44KT44Gv5a6M5oiQ5b2i44KS6KaL44Gf44GE44CC5pei6KO95ZOB44Gq44KJ44K144Oz44OX44Or44KS6KaL44Gb44KJ44KM44KL44CC44Gn44KC44Ot44O844Op44O844K544OI44O844Oz44Gv44CBPHN0cm9uZz7ku5XkuIrjgYzjgorjgqTjg6Hjg7zjgrjjga/ogbfkurrjga7poK3jga7kuK3jgavjgZfjgYvjgarjgYTjgII8L3N0cm9uZz48YnI+PGJyPgogICAgICAgICAgICDjgaDjgYvjgonnp4HjgZ/jgaHjgavjgafjgY3jgovjgZPjgajjga/jgIHpgY7ljrvjga7mlr3lt6XkuovkvovjgpLkuKbjgbnjgZ/jg5Hjg7Pjg5Xjg6zjg4Pjg4jjgpLopovjgZvjgabjgIzmg7Plg4/jgZfjgabjgoLjgonjgYbjgI3jgZPjgajjgaDjgZHjgaDjgaPjgZ/jgIIKICAgICAgICA8L3A+CgogICAgICAgIDxkaXYgY2xhc3M9IndoeS1xdW90ZSByZXZlYWwiPgogICAgICAgICAgICA8cD7jgIznp4Hjgavku7vjgZvjgabjgY/jgaDjgZXjgYTjgILjgY3jgaPjgajkvLzlkIjjgYbjgajmgJ3jgYTjgb7jgZnjgILntbblr77jgavjgYvjgaPjgZPjgYTjgYTjga/jgZrjgafjgZnjgILjgI08L3A+CiAgICAgICAgICAgIDxjaXRlPuKAlCDlpJrjgY/jga7ogbfkurrjgYzjgIHnj77loLTjgafnubDjgorov5TjgZfjgabjgY3jgZ/oqIDokYk8L2NpdGU+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxwIGNsYXNzPSJ3aHktYm9keSByZXZlYWwiPgogICAgICAgICAgICDmtIvmnI3jgaDjgaPjgabjgIHoqabnnYDlrqTjgafoh6rliIbjgavkvLzlkIjjgYbjgYvnorrjgYvjgoHjgabjgYvjgonosrfjgYbjgII8YnI+CiAgICAgICAgICAgIOmrmOmhjeOBquODquODleOCqeODvOODoOOBquOCieOAgeOBquOBiuOBleOCieOBneOBhuOBp+OBguOCi+OBueOBjeOBoOOAgjxicj48YnI+CiAgICAgICAgICAgIDxzdHJvbmc+44CM5L+h44GY44Gm44GP44Gg44GV44GE44CN44Go44GE44GG6KiA6JGJ44Gg44GR44Gn44CB6Kqw44GM6auY6aGN5ZWG5ZOB44KS6LK344GG44Gg44KN44GG44GL44CCPC9zdHJvbmc+PGJyPjxicj4KICAgICAgICAgICAg56eB44Gv44Ga44Gj44Go44Gd44GT44Gr55aR5ZWP44Go5q2v44GM44KG44GV44KS5oSf44GY44Gm44GE44Gf44CCPGJyPgogICAgICAgICAgICDnhrHjgYTmgJ3jgYTjgoLjgIHpq5jjgYTmioDooZPjgoLjgIE8c3Ryb25nPuOAjOS8neOBiOOCi+WKm+OAjeOBjOOBquOBkeOCjOOBsOWxiuOBi+OBquOBhOOAgjwvc3Ryb25nPgogICAgICAgIDwvcD4KCiAgICAgICAgPGRpdiBjbGFzcz0id2h5LWRpdmlkZXIgcmV2ZWFsIj48L2Rpdj4KCiAgICAgICAgPHAgY2xhc3M9IndoeS1jb25jbHVzaW9uIHJldmVhbCI+CiAgICAgICAgICAgIEtJTUFSVeOBr+OAgeOBneOBruOBmeOBueOBpuOCkuino+axuuOBmeOCi+OBn+OCgeOBruODl+ODreOCuOOCp+OCr+ODiOOBoOOAgjxicj48YnI+CiAgICAgICAgICAgIOWujOaIkOOCpOODoeODvOOCuOOCkuS8neOBiOOCieOCjOOCi+aPkOahiOabuOOAguOBiuWuouOBleOCk+OBjOOAjOOBk+OCjOOBq+OBl+OBn+OBhOOAjeOBqOiogOOBiOOCi+S9k+mok+OAgjxicj4KICAgICAgICAgICAg6IG35Lq644GM6Ieq5L+h44KS5oyB44Gj44Gm44CB5q2j5b2T44Gq5a++5L6h44KS5b6X44KJ44KM44KL5LuV57WE44G/44CCPGJyPjxicj4KICAgICAgICAgICAg44GT44KM44Gv56eB5LiA5Lq644Gu44Gf44KB44GY44KD44Gq44GE44CCPGJyPgogICAgICAgICAgICA8c3Ryb25nPuWQjOOBmOaAneOBhOOCkuaMgeOBpOOAgeOBmeOBueOBpuOBruODreODvOODqeODvOOCueODiOODvOODs+iBt+S6uuOBuOOAgjwvc3Ryb25nPgogICAgICAgIDwvcD4KICAgIDwvZGl2Pgo8L3NlY3Rpb24+Cgo8IS0tIENUQe+8iOmAj+OBi+OBl+OBguOCiu+8iSAtLT4KPGRpdiBjbGFzcz0iY3RhLXNlY3Rpb24iPgogICAgPGRpdiBjbGFzcz0id20iPjxpbWcgc3JjPSJpbWFnZXMvbG9nby5wbmciIGFsdD0iIj48L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImN0YS1pbm5lciI+CiAgICAgICAgPGgyIGNsYXNzPSJjdGEtdGl0bGUgcmV2ZWFsIj7msJfjgavjgarjgaPjgZ/mlrnjga/jgIE8YnI+44G+44GaTElOReOBp+ipseOBl+OBvuOBl+OCh+OBhuOAgjwvaDI+CiAgICAgICAgPHAgY2xhc3M9ImN0YS1zdWIgcmV2ZWFsIj7oqbPjgZfjgYToqqzmmI7jg7vjg4fjg6LjgoLjgYrmsJfou73jgavjganjgYbjgZ48L3A+CiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9saW4uZWUveHh4eHh4eCIgY2xhc3M9ImN0YS1idG4gcmV2ZWFsIiB0YXJnZXQ9Il9ibGFuayIgcmVsPSJub29wZW5lciI+CiAgICAgICAgICAgIDxzdmcgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgNDAgMzgiIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIwIDBDOSAwIDAgNy4yIDAgMTZjMCA1LjUgMy40IDEwLjMgOC43IDEzLjMtLjQgMS40LTEuNCA1LjEtMS42IDUuOS0uMiAxIC40IDEgLjguNy4zLS4yIDQuOC0zLjMgNi43LTQuNi45LjEgMS45LjIgMi45LjIgMTEgMCAyMC03LjIgMjAtMTZTMzEgMCAyMCAweiIvPjwvc3ZnPgogICAgICAgICAgICBMSU5FIOOBp+OBiuWVj+OBhOWQiOOCj+OBmwogICAgICAgIDwvYT4KICAgICAgICA8cCBjbGFzcz0iY3RhLW5vdGUgcmV2ZWFsIj7nhKHmlpnjgafjgZTnm7joq4fjgYTjgZ/jgaDjgZHjgb7jgZk8L3A+CiAgICA8L2Rpdj4KPC9kaXY+Cgo8IS0tIEZPT1RFUu+8iOmAj+OBi+OBl++8i+ODreOCtOOBguOCiu+8iSAtLT4KPGZvb3Rlcj4KICAgIDxpbWcgY2xhc3M9ImZvb3Rlci1sb2dvLWRhcmsiICBzcmM9ImltYWdlcy9mb290ZXJfbG9nb19kYXJrLmpwZyIgIGFsdD0iS0lNQVJVIj4KICAgIDxpbWcgY2xhc3M9ImZvb3Rlci1sb2dvLWxpZ2h0IiBzcmM9ImltYWdlcy9mb290ZXJfbG9nb19saWdodC5qcGciIGFsdD0iS0lNQVJVIj4KICAgIDxkaXYgY2xhc3M9ImZvb3Rlci10YWdsaW5lIj5Qcm9wb3NhbCBTeXN0ZW0gZm9yIENvbnN0cnVjdGlvbiBQcm9mZXNzaW9uYWxzPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJmb290ZXItY29weSI+JmNvcHk7IDIwMjUgS0lNQVJVLiBBbGwgcmlnaHRzIHJlc2VydmVkLjwvZGl2Pgo8L2Zvb3Rlcj4KCjxzY3JpcHQ+Ci8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgIEtJTUFSVSBMUCDigJQg44Oh44Kk44Oz44K544Kv44Oq44OX44OICiAgIEdBNCDmuKzlrppJRDogRy0wVkYyNzdGNlJYCiAgIOOCpOODmeODs+ODiOioreioiOabuCB2Mi4wCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgovLyAtLS0tLSDjgq3jg6Pjg4Pjg4HjgrPjg5Tjg7wg44Ot44O844OG44O844K344On44OzIC0tLS0tCnZhciBjYXRjaGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGNoLWl0ZW0nKTsKdmFyIGRvdHMgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGVyby1kb3QnKTsKdmFyIGN1cnJlbnQgPSAwLCB0aW1lcjsKZnVuY3Rpb24gc2hvd0NhdGNoKGlkeCl7CiAgY2F0Y2hlc1tjdXJyZW50XS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICBkb3RzW2N1cnJlbnRdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogIGN1cnJlbnQgPSBpZHg7CiAgY2F0Y2hlc1tjdXJyZW50XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICBkb3RzW2N1cnJlbnRdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwp9CnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsgc2hvd0NhdGNoKChjdXJyZW50ICsgMSkgJSBjYXRjaGVzLmxlbmd0aCk7IH0sIDQwMDApOwpkb3RzLmZvckVhY2goZnVuY3Rpb24oZG90KXsKICBkb3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpewogICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7CiAgICBzaG93Q2F0Y2gocGFyc2VJbnQoZG90LmRhdGFzZXQuZG90KSk7CiAgICB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7IHNob3dDYXRjaCgoY3VycmVudCArIDEpICUgY2F0Y2hlcy5sZW5ndGgpOyB9LCA0MDAwKTsKICB9KTsKfSk7CgovLyAtLS0tLSBCQSDjgrnjg6njgqTjg4Djg7zvvIhKU09O6aeG5YuV77yJIC0tLS0tCnZhciBQTEFDRUhPTERFUl9CRUZPUkUgPSAnaHR0cHM6Ly92aWEucGxhY2Vob2xkZXIuY29tLzEyMDB4Njc1LzExMS8xZTFlMWU/dGV4dD1CRUZPUkUnOwp2YXIgUExBQ0VIT0xERVJfQUZURVIgID0gJ2h0dHBzOi8vdmlhLnBsYWNlaG9sZGVyLmNvbS8xMjAweDY3NS8xYTEyMDgvMmEyMDEwP3RleHQ9QUZURVInOwoKZnVuY3Rpb24gaW5pdEJhU2xpZGVycygpewogIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhLWxpc3QnKTsKICBpZighbGlzdCkgcmV0dXJuOwogIHZhciBkYXRhID0gW107CiAgdHJ5eyBkYXRhID0gSlNPTi5wYXJzZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmEtZGF0YScpLnRleHRDb250ZW50IHx8ICdbXScpOyB9Y2F0Y2goZSl7fQogIGlmKCFkYXRhLmxlbmd0aCl7CiAgICBkYXRhID0gWwogICAgICB7dGl0bGU6J+aWveW3peS6i+S+iyDigJQg44K/44Kk44OI44Or44KS5YWl44KM44Gm44GP44Gg44GV44GEJywgYmVmb3JlOlBMQUNFSE9MREVSX0JFRk9SRSwgYWZ0ZXI6UExBQ0VIT0xERVJfQUZURVIsIGZpbmlzaDonJywgY29sb3I6JycsIGdyb3V0OicnLCBzYW1wbGU6JycsIGFuZ2xlczpbXX0sCiAgICAgIHt0aXRsZTon5pa95bel5LqL5L6LIOKAlCDjgr/jgqTjg4jjg6vjgpLlhaXjgozjgabjgY/jgaDjgZXjgYQnLCBiZWZvcmU6UExBQ0VIT0xERVJfQkVGT1JFLCBhZnRlcjpQTEFDRUhPTERFUl9BRlRFUiwgZmluaXNoOicnLCBjb2xvcjonJywgZ3JvdXQ6JycsIHNhbXBsZTonJywgYW5nbGVzOltdfQogICAgXTsKICB9CiAgbGlzdC5pbm5lckhUTUwgPSAnJzsKICBkYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaSl7CiAgICB2YXIgY2hpcHMgPSAnJzsKICAgIGlmKGl0ZW0uZmluaXNoKSBjaGlwcyArPSAnPHNwYW4gY2xhc3M9ImJhLWluZm8tY2hpcCI+JyArIGl0ZW0uZmluaXNoICsgJzwvc3Bhbj4nOwogICAgaWYoaXRlbS5jb2xvcikgIGNoaXBzICs9ICc8c3BhbiBjbGFzcz0iYmEtaW5mby1jaGlwIj7jgqvjg6njg7zvvJonICsgaXRlbS5jb2xvciArICc8L3NwYW4+JzsKICAgIGlmKGl0ZW0uZ3JvdXQpICBjaGlwcyArPSAnPHNwYW4gY2xhc3M9ImJhLWluZm8tY2hpcCI+55uu5Zyw77yaJyArIGl0ZW0uZ3JvdXQgKyAnPC9zcGFuPic7CiAgICB2YXIgYW5nbGVzSHRtbCA9ICcnOwogICAgaWYoaXRlbS5hbmdsZXMgJiYgaXRlbS5hbmdsZXMubGVuZ3RoKXsKICAgICAgYW5nbGVzSHRtbCA9ICc8ZGl2IGNsYXNzPSJiYS1hbmdsZXMiPic7CiAgICAgIGl0ZW0uYW5nbGVzLmZvckVhY2goZnVuY3Rpb24oYW5nKXsKICAgICAgICBpZighYW5nLnNyYykgcmV0dXJuOwogICAgICAgIGFuZ2xlc0h0bWwgKz0gJzxkaXYgY2xhc3M9ImJhLWFuZ2xlLWl0ZW0iIG9uY2xpY2s9Im9wZW5MaWdodGJveChcJycgKyBhbmcuc3JjICsgJ1wnKSI+JwogICAgICAgICAgKyAnPGltZyBjbGFzcz0iYmEtYW5nbGUtaW1nIiBzcmM9IicgKyBhbmcuc3JjICsgJyIgYWx0PSInICsgZXNjSHRtbExQKGFuZy5sYWJlbHx8JycpICsgJyI+JwogICAgICAgICAgKyAoYW5nLmxhYmVsID8gJzxkaXYgY2xhc3M9ImJhLWFuZ2xlLWxhYmVsIj4nICsgZXNjSHRtbExQKGFuZy5sYWJlbCkgKyAnPC9kaXY+JyA6ICcnKQogICAgICAgICAgKyAnPC9kaXY+JzsKICAgICAgfSk7CiAgICAgIGFuZ2xlc0h0bWwgKz0gJzwvZGl2Pic7CiAgICB9CiAgICB2YXIgaW5mb0h0bWwgPSAnJzsKICAgIGlmKGNoaXBzIHx8IGl0ZW0uc2FtcGxlIHx8IGFuZ2xlc0h0bWwpewogICAgICBpbmZvSHRtbCA9ICc8ZGl2IGNsYXNzPSJiYS1pbmZvIj4nCiAgICAgICAgKyAoaXRlbS5zYW1wbGUgPyAnPGltZyBjbGFzcz0iYmEtc2FtcGxlLXRodW1iIiBzcmM9IicgKyBpdGVtLnNhbXBsZSArICciIGFsdD0i57Sg5p2Q44K144Oz44OX44OrIiBvbmNsaWNrPSJvcGVuTGlnaHRib3goXCcnICsgaXRlbS5zYW1wbGUgKyAnXCcpIj4nIDogJycpCiAgICAgICAgKyAnPGRpdiBjbGFzcz0iYmEtaW5mby10ZXh0Ij4nCiAgICAgICAgKyAoaXRlbS5maW5pc2h8fGl0ZW0uY29sb3J8fGl0ZW0uZ3JvdXQgPyAnPGRpdiBjbGFzcz0iYmEtaW5mby1uYW1lIj4nICsgKGl0ZW0uZmluaXNofHwnJykgKyAnPC9kaXY+JyA6ICcnKQogICAgICAgICsgKGNoaXBzID8gJzxkaXYgY2xhc3M9ImJhLWluZm8tdGFncyI+JyArIGNoaXBzICsgJzwvZGl2PicgOiAnJykKICAgICAgICArIGFuZ2xlc0h0bWwKICAgICAgICArICc8L2Rpdj48L2Rpdj4nOwogICAgfQogICAgdmFyIG51bVN0ciA9IChpICsgMSA8IDEwID8gJzAnICsgKGkgKyAxKSA6ICcnICsgKGkgKyAxKSk7CiAgICB2YXIgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgd3JhcC5jbGFzc05hbWUgPSAnYmEtd3JhcCc7CiAgICBpZihpID09PSAwKSB3cmFwLnN0eWxlLm1hcmdpblRvcCA9ICcwJzsKICAgIHdyYXAuaW5uZXJIVE1MID0KICAgICAgICAnPGRpdiBjbGFzcz0iYmEtbGFiZWwtcm93IHJldmVhbCI+PHNwYW4gY2xhc3M9ImJhLW51bSI+JyArIG51bVN0ciArICc8L3NwYW4+PHNwYW4gY2xhc3M9ImJhLXRpdGxlIj4nICsgaXRlbS50aXRsZSArICc8L3NwYW4+PC9kaXY+JwogICAgICArICc8ZGl2IGNsYXNzPSJiYS1jb250YWluZXIgcmV2ZWFsIiBpZD0iYmEtJyArIGkgKyAnIj4nCiAgICAgICsgICAnPGltZyBzcmM9IicgKyAoaXRlbS5iZWZvcmUgfHwgUExBQ0VIT0xERVJfQkVGT1JFKSArICciIGNsYXNzPSJiYS1pbWciIGFsdD0iQmVmb3JlIj4nCiAgICAgICsgICAnPGltZyBzcmM9IicgKyAoaXRlbS5hZnRlciAgfHwgUExBQ0VIT0xERVJfQUZURVIpICArICciIGNsYXNzPSJiYS1pbWcgYmEtYWZ0ZXIiIGFsdD0iQWZ0ZXIiPicKICAgICAgKyAgICc8ZGl2IGNsYXNzPSJiYS1oYW5kbGUiPjxkaXYgY2xhc3M9ImJhLWhhbmRsZS1saW5lIj48L2Rpdj48ZGl2IGNsYXNzPSJiYS1oYW5kbGUtcGlsbCI+U0xJREU8L2Rpdj48L2Rpdj4nCiAgICAgICsgICAnPGRpdiBjbGFzcz0iYmEtdGFncyI+PHNwYW4gY2xhc3M9ImJhLXRhZyI+QkVGT1JFPC9zcGFuPjxzcGFuIGNsYXNzPSJiYS10YWcgYWZ0ZXIiPkFGVEVSPC9zcGFuPjwvZGl2PicKICAgICAgKyAnPC9kaXY+JwogICAgICArICc8cCBjbGFzcz0iYmEtY2FwdGlvbiByZXZlYWwiPuKGkCDjgrnjg6njgqTjg4njgZfjgablpInljJbjgpLnorroqo3jgZfjgabjgY/jgaDjgZXjgYQ8L3A+JwogICAgICArIGluZm9IdG1sOwogICAgbGlzdC5hcHBlbmRDaGlsZCh3cmFwKTsKICB9KTsKCiAgLy8g44K544Op44Kk44OA44O85pON5L2c44Kk44OZ44Oz44OICiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhLWNvbnRhaW5lcicpLmZvckVhY2goZnVuY3Rpb24oY29udGFpbmVyKXsKICAgIHZhciBoYW5kbGUgICA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYmEtaGFuZGxlJyk7CiAgICB2YXIgYWZ0ZXJJbWcgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmJhLWFmdGVyJyk7CiAgICB2YXIgZHJhZ2dpbmcgPSBmYWxzZTsKICAgIGZ1bmN0aW9uIHVwZGF0ZShjbGllbnRYKXsKICAgICAgdmFyIHJlY3QgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIHZhciBwb3MgID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCAoKGNsaWVudFggLSByZWN0LmxlZnQpIC8gcmVjdC53aWR0aCkgKiAxMDApKTsKICAgICAgYWZ0ZXJJbWcuc3R5bGUuY2xpcFBhdGggID0gJ2luc2V0KDAgMCAwICcgKyBwb3MgKyAnJSknOwogICAgICBoYW5kbGUuc3R5bGUubGVmdCAgICAgICAgPSBwb3MgKyAnJSc7CiAgICAgIGhhbmRsZS5zdHlsZS50cmFuc2Zvcm0gICA9ICd0cmFuc2xhdGVYKC01MCUpJzsKICAgIH0KICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihlKXsgZHJhZ2dpbmcgPSB0cnVlOyB1cGRhdGUoZS5jbGllbnRYKTsgfSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgICAgZnVuY3Rpb24oZSl7IGlmKGRyYWdnaW5nKSB1cGRhdGUoZS5jbGllbnRYKTsgfSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICAgICAgZnVuY3Rpb24oKXsgZHJhZ2dpbmcgPSBmYWxzZTsgfSk7CiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpeyB1cGRhdGUoZS50b3VjaGVzWzBdLmNsaWVudFgpOyB9LCB7cGFzc2l2ZTp0cnVlfSk7CiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgIGZ1bmN0aW9uKGUpeyB1cGRhdGUoZS50b3VjaGVzWzBdLmNsaWVudFgpOyB9LCB7cGFzc2l2ZTp0cnVlfSk7CiAgfSk7CgogIC8vIEJBIOOCueODqeOCpOODgOODvOS4i+OBriByZXZlYWwg6KaB57Sg44KS55uj6KaWCiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2JhLWxpc3QgLnJldmVhbCcpLmZvckVhY2goZnVuY3Rpb24oZWwpeyBvYnNlcnZlci5vYnNlcnZlKGVsKTsgfSk7Cn0KCmZ1bmN0aW9uIGVzY0h0bWxMUChzKXsgcmV0dXJuIChzfHwnJykucmVwbGFjZSgvJi9nLCcmYW1wOycpLnJlcGxhY2UoLyIvZywnJnF1b3Q7JykucmVwbGFjZSgvPC9nLCcmbHQ7JykucmVwbGFjZSgvPi9nLCcmZ3Q7Jyk7IH0KZnVuY3Rpb24gb3BlbkxpZ2h0Ym94KHNyYyl7IHZhciBsYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlnaHRib3gnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpZ2h0Ym94LWltZycpLnNyYz1zcmM7IGxiLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTsgfQpmdW5jdGlvbiBjbG9zZUxpZ2h0Ym94KCl7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaWdodGJveCcpLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTsgfQoKLy8gLS0tLS0g5YuV55S76KGo56S65Yi25b6hIC0tLS0tCnZhciB2aWRlbyAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9tby12aWRlbycpOwp2YXIgcGxhY2Vob2xkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlkZW8tcGxhY2Vob2xkZXInKTsKdmFyIHZpZGVvU3JjICAgID0gdmlkZW8gPyB2aWRlby5nZXRBdHRyaWJ1dGUoJ3NyYycpIDogJyc7CmlmKHZpZGVvU3JjICYmIHZpZGVvU3JjLnRyaW0oKSAhPT0gJycpewogIGlmKHBsYWNlaG9sZGVyKSBwbGFjZWhvbGRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogIHZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwp9IGVsc2UgewogIGlmKHZpZGVvKSAgICAgICB2aWRlby5zdHlsZS5kaXNwbGF5ICAgICAgID0gJ25vbmUnOwogIGlmKHBsYWNlaG9sZGVyKSBwbGFjZWhvbGRlci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwp9CgovLyAtLS0tLSBSZXZlYWwg44K544Kv44Ot44O844Or44Ki44OL44Oh44O844K344On44OzIC0tLS0tCnZhciBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihmdW5jdGlvbihlbnRyaWVzKXsKICBlbnRyaWVzLmZvckVhY2goZnVuY3Rpb24oZSl7IGlmKGUuaXNJbnRlcnNlY3RpbmcpIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTsgfSk7Cn0sIHt0aHJlc2hvbGQ6IDAuMTJ9KTsKZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJldmVhbCcpLmZvckVhY2goZnVuY3Rpb24oZWwpeyBvYnNlcnZlci5vYnNlcnZlKGVsKTsgfSk7CgovLyBCQSDjgrnjg6njgqTjg4Djg7zliJ3mnJ/ljJbvvIhvYnNlcnZlciDlrprnvqnlvozvvIkKaW5pdEJhU2xpZGVycygpOwoKLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgR0E0IOOCpOODmeODs+ODiOioiOa4rO+8iOioreioiOabuCB2Mi4w77yJCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgovLyBbMV0gTElORSBDVEHjg5zjgr/jg7Mg4oCUIGV2ZW50X2NhdGVnb3J5OidjdGEnLCBldmVudF9sYWJlbDonbGluZV9wcicKZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmN0YS1idG4nKS5mb3JFYWNoKGZ1bmN0aW9uKGJ0bil7CiAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXsKICAgIGd0YWcoJ2V2ZW50JywgJ2NsaWNrJywgewogICAgICBldmVudF9jYXRlZ29yeSA6ICdjdGEnLAogICAgICBldmVudF9sYWJlbCAgICA6ICdsaW5lX3ByJwogICAgfSk7CiAgfSk7Cn0pOwoKLy8gWzJdIEluc3RhZ3JhbSDjg5zjgr/jg7Mg4oCUIGV2ZW50X2NhdGVnb3J5Oidzb2NpYWwnLCBldmVudF9sYWJlbDonaW5zdGFncmFtX251bWFuJwpkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubnVtYW4taWcnKS5mb3JFYWNoKGZ1bmN0aW9uKGJ0bil7CiAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXsKICAgIGd0YWcoJ2V2ZW50JywgJ2NsaWNrJywgewogICAgICBldmVudF9jYXRlZ29yeSA6ICdzb2NpYWwnLAogICAgICBldmVudF9sYWJlbCAgICA6ICdpbnN0YWdyYW1fbnVtYW4nCiAgICB9KTsKICB9KTsKfSk7CgovLyBbM10gQkHjgrnjg6njgqTjg4Djg7zmk43kvZwg4oCUIHNsaWRlcl9pbnRlcmFjdCAvIDFQVuOBq+OBpOOBjTHlm57jga7jgb8KdmFyIHNsaWRlclRyYWNrZWQgPSBmYWxzZTsKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZnVuY3Rpb24oZSl7CiAgaWYoIXNsaWRlclRyYWNrZWQgJiYgZS50YXJnZXQuY2xvc2VzdCAmJiBlLnRhcmdldC5jbG9zZXN0KCcuYmEtY29udGFpbmVyJykpewogICAgc2xpZGVyVHJhY2tlZCA9IHRydWU7CiAgICBndGFnKCdldmVudCcsICdzbGlkZXJfaW50ZXJhY3QnLCB7CiAgICAgIGV2ZW50X2NhdGVnb3J5IDogJ2VuZ2FnZW1lbnQnLAogICAgICBldmVudF9sYWJlbCAgICA6ICdiYV9zbGlkZXInCiAgICB9KTsKICB9Cn0sIHtwYXNzaXZlOnRydWV9KTsKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpewogIGlmKCFzbGlkZXJUcmFja2VkICYmIGUudGFyZ2V0LmNsb3Nlc3QgJiYgZS50YXJnZXQuY2xvc2VzdCgnLmJhLWNvbnRhaW5lcicpKXsKICAgIHNsaWRlclRyYWNrZWQgPSB0cnVlOwogICAgZ3RhZygnZXZlbnQnLCAnc2xpZGVyX2ludGVyYWN0JywgewogICAgICBldmVudF9jYXRlZ29yeSA6ICdlbmdhZ2VtZW50JywKICAgICAgZXZlbnRfbGFiZWwgICAgOiAnYmFfc2xpZGVyJwogICAgfSk7CiAgfQp9LCB7cGFzc2l2ZTp0cnVlfSk7CgovLyBbNF0gV2h5IEtJTUFSVeOCueODiOODvOODquODvOiqreS6hiDigJQgcmVhZF9zdG9yeSAvIDMwJeihqOekuiDDlyA156eS5Lul5LiKCnZhciBzdG9yeVRyYWNrZWQgPSBmYWxzZTsKdmFyIHN0b3J5VGltZXIgICA9IG51bGw7CnZhciBzdG9yeU9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGVudHJpZXMpewogIGVudHJpZXMuZm9yRWFjaChmdW5jdGlvbihlbnRyeSl7CiAgICBpZihlbnRyeS5pc0ludGVyc2VjdGluZyAmJiAhc3RvcnlUcmFja2VkKXsKICAgICAgLy8gNeenkumWk+e2mee2muihqOekuuOBp+OCq+OCpuODs+ODiAogICAgICBzdG9yeVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgIHN0b3J5VHJhY2tlZCA9IHRydWU7CiAgICAgICAgZ3RhZygnZXZlbnQnLCAncmVhZF9zdG9yeScsIHsKICAgICAgICAgIGV2ZW50X2NhdGVnb3J5IDogJ2VuZ2FnZW1lbnQnLAogICAgICAgICAgZXZlbnRfbGFiZWwgICAgOiAnd2h5X2tpbWFydScKICAgICAgICB9KTsKICAgICAgfSwgNTAwMCk7CiAgICB9IGVsc2UgewogICAgICAvLyDjgrnjgq/jg63jg7zjg6vjgqLjgqbjg4jjgZfjgZ/jgonjgr/jgqTjg57jg7zjg6rjgrvjg4Pjg4gKICAgICAgY2xlYXJUaW1lb3V0KHN0b3J5VGltZXIpOwogICAgICBzdG9yeVRpbWVyID0gbnVsbDsKICAgIH0KICB9KTsKfSwge3RocmVzaG9sZDogMC4zfSk7CnZhciB3aHlTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3doeS1raW1hcnUnKTsKaWYod2h5U2VjdGlvbikgc3RvcnlPYnNlcnZlci5vYnNlcnZlKHdoeVNlY3Rpb24pOwo8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+';
function _getLp(){
  try{ return decodeURIComponent(escape(atob(_LP_B64))); }catch(e){ return ''; }
}
function generateAndDownload(){
  var s=saveSettings();
  var html=_getLp();
  if(!html){ showToast('âš  ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼'); return; }
  html=applySettings(html,s);
  var theme=s['theme']||'dark';
  var themeName=theme.charAt(0).toUpperCase()+theme.slice(1);
  downloadHTML(html,'KIMARU_'+themeName+'.html');
  dirty=false;
  document.getElementById('save-bar').classList.remove('show');
  showToast('âœ… KIMARU_'+themeName+'.html ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼');
}

function applySettings(html,s){
  // BA data JSON
  var baJson=JSON.stringify(baCards.map(function(item){
    return {
      title  : item.title   || '',
      before : item.before  || '',
      after  : item.after   || '',
      finish : item.finish  || '',
      color  : item.color   || '',
      grout  : item.grout   || '',
      sample : item.sample  || '',
      angles : (item.angles || []).map(function(a){ return {src:a.src||'', label:a.label||''}; })
    };
  }));
  html=html.replace(/(<script type="application\/json" id="ba-data">)([\s\S]*?)(<\/script>)/,'$1'+baJson+'$3');

  // ãƒ†ãƒ¼ãƒå›ºå®šï¼ˆåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã¯å‰Šé™¤æ¸ˆã¿ï¼‰
  var theme = s['theme'] || 'dark';
  html = html.replace(/data-theme="%%KIMARU_THEME%%"/, 'data-theme="'+theme+'"');

  // GA4 æ¸¬å®šID
  if(s['ga4-id'] && s['ga4-id'].trim()){
    html=html.replace(/G-0VF277F6RX/g, s['ga4-id'].trim());
  }
  // LINE URL
  html=html.replace(/href="[^"]*"(\s*class="cta-btn)/g,'href="'+s['line-url']+'"$1');
  // Instagram URL
  html=html.replace(/href="[^"]*"(\s*class="numan-ig)/g,'href="'+s['ig-url']+'"$1');
  // Video
  html=html.replace(/(<video[^>]*src=")[^"]*(")/,'$1'+s['video-url']+'$2');
  html=html.replace(/(<video[^>]*poster=")[^"]*(")/,'$1'+s['video-poster']+'$2');

  // Hero catch
  var catchLines=s['hero-catch'].split('\n').filter(l=>l.trim());
  if(catchLines.length){
    var newCatch=catchLines.map(l=>'<span>'+l+'</span>').join('');
    html=html.replace(/(<div class="hero-catch">)([\s\S]*?)(<\/div>[\s\n]*<\/div>[\s\n]*<p class="hero-sub">)/,function(m,p1,p2,p3){return p1+newCatch+p3.replace(/^(<\/div>[\s\n]*<\/div>[\s\n]*)/,'</div>\n    </div>\n    ');});
  }
  // Hero sub
  html=html.replace(/(<p class="hero-sub">)([\s\S]*?)(<\/p>)/,'$1'+s['hero-sub'].replace(/\n/g,'<br>')+'$3');
  // Message
  html=html.replace(/(<p class="message-main">)([\s\S]*?)(<\/p>)/,'$1'+s['msg-main'].replace(/\n/g,'<br>')+'$3');
  html=html.replace(/(<p class="message-body">)([\s\S]*?)(<\/p>)/,'$1'+s['msg-body'].replace(/\n/g,'<br>')+'$3');
  // CTA title
  html=html.replace(/(<h2 class="cta-title reveal">)([\s\S]*?)(<\/h2>)/,'$1'+s['cta-title'].replace(/\n/g,'<br>')+'$3');
  // Gallery teaser
  var galleryTitle   = s['gallery-title']   || 'ãã®ä»–ã®æ–½å·¥äº‹ä¾‹ã¯ã“ã¡ã‚‰';
  var galleryBody    = s['gallery-body']    || 'ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ãƒ»ç´ æåˆ¥ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’æº–å‚™ã—ã¦ã„ã¾ã™ã€‚';
  var galleryBtnText = s['gallery-btn-text']|| 'æ–½å·¥äº‹ä¾‹ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚’è¦‹ã‚‹';
  var galleryUrl     = s['gallery-url']     || '';
  html = html.replace(/(<h2 class="section-title" style="margin-bottom:12px;">)[^<]*(<\/h2>)/, '$1'+galleryTitle+'$2');
  html = html.replace(/(<p class="section-body" style="max-width:480px;margin:0 auto 28px;">)[^<]*(<\/p>)/, '$1'+galleryBody+'$2');
  // ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆSVGã®å‰ã®ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ¼ãƒ‰ï¼‰
  html = html.replace(/(gallery-teaser-btn[^>]*>[\s\S]*?<\/span>\s*)([^<]+)(\s*<svg)/, '$1'+galleryBtnText+'$3');
  if(galleryUrl){
    // URLã‚ã‚Š â†’ ãƒªãƒ³ã‚¯æœ‰åŠ¹åŒ–ãƒ»ãƒãƒƒã‚¸éè¡¨ç¤º
    html = html.replace(/href="#" class="gallery-teaser-btn" onclick="return false;"/, 'href="'+galleryUrl+'" class="gallery-teaser-btn" target="_blank" rel="noopener"');
    html = html.replace(/<span class="gallery-teaser-badge">æº–å‚™ä¸­<\/span>\s*/, '');
  }
  // Numan name
  html=html.replace(/(<h2 class="numan-name">)([\s\S]*?)(<\/h2>)/,'$1'+s['numan-name-ja'].replace(/\n/g,'<br>')+'$3');
  html=html.replace(/(<p class="numan-title">)([\s\S]*?)(<\/p>)/,'$1'+s['numan-name-en']+'$3');
  html=html.replace(/(<span class="numan-meta-text">ä¸‰é‡çœŒ[^<]*)(<\/span>)/,'<span class="numan-meta-text">'+s['numan-location']+'$2');
  html=html.replace(/(<span class="numan-meta-text">ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¹ãƒˆãƒ¼ãƒ³æ­´[^<]*)(<\/span>)/,'<span class="numan-meta-text">'+s['numan-career']+'$2');
  // Numan body
  var nbHtml=s['numan-body'].replace(/\n\n/g,'</p>\n<p class="numan-body reveal">').replace(/\n/g,'<br>');
  html=html.replace(/(<p class="numan-body reveal">)([\s\S]*?)(<\/p>\s*<a)/,'$1'+nbHtml+'$3');

  // Images (logo / numan photos)
  var imgMap={'numan-color':'images/numan_color.jpg','numan-portrait':'images/numan_portrait.jpg','footer-logo-dark':'images/footer_logo_dark.jpg','footer-logo-light':'images/footer_logo_light.jpg','logo':'images/logo.png'};
  Object.keys(imageData).forEach(function(key){
    if(!imgMap[key])return;
    var src=imgMap[key].replace(/\./g,'\\.').replace(/\//g,'\\/');
    html=html.replace(new RegExp('src="'+src+'"','g'),'src="'+imageData[key].base64+'"');
  });

  // Section visibility
  if(!s['sec-ba'])html=html.replace(/(id="ba-section"[^>]*>)([\s\S]*?)(<\/section>[\s\S]*?<!-- VIDEO)/,function(m,p1,p2,p3){return p1+'<div style="display:none">'+p2+'</div>'+p3;});
  if(!s['sec-video'])html=html.replace(/(class="[^"]*video-section[^"]*"[^>]*>)([\s\S]*?)(<\/section>[\s\S]*?<!-- MESSAGE)/,function(m,p1,p2,p3){return p1+'<div style="display:none">'+p2+'</div>'+p3;});
  if(!s['sec-profile'])html=html.replace(/(<!-- NUMAN SECTION -->)([\s\S]*?)(<!-- WHY)/, '$1<div style="display:none">$2</div>$3');
  if(!s['sec-why'])html=html.replace(/(<!-- WHY KIMARU STORY -->)([\s\S]*?)(<!-- CTA)/,'$1<div style="display:none">$2</div>$3');

  return html;
}

function downloadHTML(html,filename){
  var blob=new Blob([html],{type:'text/html;charset=utf-8'});
  var a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download=filename;a.click();URL.revokeObjectURL(a.href);
}

function previewLP(){
  var s=saveSettings();
  var _ph=_getLp();
  if(_ph){var m=applySettings(_ph,s);var blob=new Blob([m],{type:'text/html'});window.open(URL.createObjectURL(blob),'_blank');}
}

function showToast(msg){
  var t=document.getElementById('toast');document.getElementById('toast-msg').textContent=msg;
  t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3500);
}


// ===== PROJECT SAVE / LOAD =====
function openSaveModal(){
  document.getElementById('proj-save-name').value='';
  document.getElementById('modal-save').classList.add('open');
  setTimeout(()=>document.getElementById('proj-save-name').focus(),100);
}
function openLoadModal(){
  renderProjList();
  document.getElementById('modal-load').classList.add('open');
}
function closeProjModal(id){document.getElementById(id).classList.remove('open');}

function saveProject(){
  var name=document.getElementById('proj-save-name').value.trim();
  if(!name){alert('ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');return;}
  var s=saveSettings();
  var projects={};
  try{projects=JSON.parse(localStorage.getItem('kimaru-projects')||'{}');}catch(e){}
  projects[name]={settings:s,savedAt:new Date().toLocaleString('ja-JP')};
  localStorage.setItem('kimaru-projects',JSON.stringify(projects));
  closeProjModal('modal-save');
  showToast('ã€Œ'+name+'ã€ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
}

function renderProjList(){
  var projects={};
  try{projects=JSON.parse(localStorage.getItem('kimaru-projects')||'{}');}catch(e){}
  var names=Object.keys(projects);
  var list=document.getElementById('proj-list');
  if(!names.length){list.innerHTML='<div class="proj-empty">ä¿å­˜æ¸ˆã¿ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Šã¾ã›ã‚“</div>';return;}
  window._projNames=names;
  list.innerHTML=names.map(function(name,idx){
    var p=projects[name];
    return '<div class="proj-item">'
      +'<div style="flex:1;min-width:0;">'
      +'<div class="proj-item-name">'+escHtml(name)+'</div>'
      +'<div class="proj-item-date">'+p.savedAt+'</div>'
      +'</div>'
      +'<div class="proj-item-btns">'
      +'<button class="btn btn-primary" style="padding:6px 14px;font-size:.7rem;" onclick="loadProjectByIndex('+idx+')">å‘¼ã³å‡ºã™</button>'
      +'<button class="btn btn-danger" style="padding:6px 10px;" onclick="deleteProjectByIndex('+idx+')">&#10005;</button>'
      +'</div>'
      +'</div>';
  }).join('');
}

function loadProjectByIndex(i){
  var name=window._projNames&&window._projNames[i];
  if(name)loadProject(name);
}
function deleteProjectByIndex(i){
  var name=window._projNames&&window._projNames[i];
  if(name)deleteProject(name);
}

function loadProject(name){
  var projects={};
  try{projects=JSON.parse(localStorage.getItem('kimaru-projects')||'{}');}catch(e){}
  if(!projects[name])return;
  if(!confirm('ã€Œ'+name+'ã€ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚ç¾åœ¨ã®ç·¨é›†å†…å®¹ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ'))return;
  localStorage.setItem('kimaru-settings',JSON.stringify(projects[name].settings));
  closeProjModal('modal-load');
  loadDefaults();
  showToast('ã€Œ'+name+'ã€ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸã€‚');
}

function deleteProject(name){
  if(!confirm('ã€Œ'+name+'ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ'))return;
  var projects={};
  try{projects=JSON.parse(localStorage.getItem('kimaru-projects')||'{}');}catch(e){}
  delete projects[name];
  localStorage.setItem('kimaru-projects',JSON.stringify(projects));
  renderProjList();
  showToast('å‰Šé™¤ã—ã¾ã—ãŸã€‚');
}

// INIT
loadDefaults();
</script>

<!-- PROJECT SAVE MODAL -->
<div class="proj-modal" id="modal-save" onclick="if(event.target===this)closeProjModal('modal-save')">
  <div class="proj-box">
    <h3>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿å­˜</h3>
    <div class="form-row"><label class="field-label">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå</label><input type="text" id="proj-save-name" placeholder="ä¾‹ï¼šç„é–¢ã‚¢ãƒ—ãƒ­ãƒ¼ãƒææ¡ˆ Aãƒ‘ã‚¿ãƒ¼ãƒ³"></div>
    <div style="display:flex;gap:10px;margin-top:16px;">
      <button class="btn btn-primary" style="flex:1;" onclick="saveProject()">ğŸ’¾ ä¿å­˜ã™ã‚‹</button>
      <button class="btn btn-secondary" onclick="closeProjModal('modal-save')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
    </div>
  </div>
</div>
<!-- PROJECT LOAD MODAL -->
<div class="proj-modal" id="modal-load" onclick="if(event.target===this)closeProjModal('modal-load')">
  <div class="proj-box">
    <h3>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å‘¼ã³å‡ºã™</h3>
    <div id="proj-list"></div>
    <button class="btn btn-secondary" style="width:100%;margin-top:12px;" onclick="closeProjModal('modal-load')">é–‰ã˜ã‚‹</button>
  </div>
</div>
</body>
</html>
