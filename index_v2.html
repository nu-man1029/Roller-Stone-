<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ローラーストーン施工費用シミュレーター</title>
    <!-- Tailwind CSS (デザイン用) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">
    <!-- Lucide Icons (アイコン用) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        gold: { 400: '#EABF4F', 500: '#D4AF37', 600: '#B8860B' }
                    },
                    fontFamily: {
                        sans: ['Noto Sans JP', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #f8fafc; color: #1a1a1a; }
        .gold-gradient-text {
            background: linear-gradient(135deg, #D4AF37 0%, #B8860B 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .luxury-card {
            box-shadow: 0 20px 40px -5px rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        /* スライダー用 */
        .slider-container { position: relative; width: 100%; height: 250px; border-radius: 12px; overflow: hidden; background: #333; }
        .slider-img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
        .slider-overlay { position: absolute; top: 0; left: 0; width: 50%; height: 100%; overflow: hidden; border-right: 2px solid #fff; z-index: 10; }
        .slider-handle { 
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            width: 40px; height: 40px; background: #fff; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 20; cursor: ew-resize;
        }
        input[type=range].slider-range {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            opacity: 0; cursor: ew-resize; z-index: 30; margin: 0;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-10 px-4">

    <!-- メインコンテンツ -->
    <div class="w-full max-w-lg space-y-8 mb-12">
        
        <!-- ヘッダー -->
        <div class="text-center space-y-2">
            <span class="inline-block px-3 py-1 border border-gold-500 text-gold-600 text-[10px] font-bold tracking-widest rounded-full uppercase">Official Simulator</span>
            <h1 class="text-3xl font-black tracking-tight leading-tight">
                RollerStone<br/>
                <span class="gold-gradient-text">施工費用シミュレーター</span>
            </h1>
            <p class="text-xs text-slate-500 font-bold">認定施工店：ぬーまん</p>
        </div>

        <!-- シミュレーター入力エリア -->
        <div class="luxury-card rounded-3xl p-8 border border-white">
            <div class="space-y-6">
                <!-- 入力フォーム -->
                <div class="space-y-2 text-center">
                    <label class="text-xs font-bold text-slate-400 uppercase tracking-widest">施工面積 (㎡)</label>
                    <div class="relative max-w-[200px] mx-auto">
                        <input type="number" id="area" placeholder="0" 
                            class="w-full px-4 py-4 text-4xl font-black text-center bg-slate-50 border-2 border-slate-200 rounded-2xl focus:border-gold-500 focus:bg-white outline-none transition-all placeholder-slate-200" />
                        <span class="absolute right-4 bottom-5 text-lg font-bold text-slate-400">㎡</span>
                    </div>
                </div>

                <!-- クイックボタン -->
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setArea(5)" class="p-2 border border-slate-200 rounded-xl hover:bg-gold-50 hover:border-gold-400 transition-all text-center">
                        <div class="text-[10px] text-slate-400 font-bold mb-1">玄関前</div>
                        <div class="font-black text-slate-700">5㎡</div>
                    </button>
                    <button onclick="setArea(15)" class="p-2 border border-slate-200 rounded-xl hover:bg-gold-50 hover:border-gold-400 transition-all text-center">
                        <div class="text-[10px] text-slate-400 font-bold mb-1">車1台</div>
                        <div class="font-black text-slate-700">15㎡</div>
                    </button>
                    <button onclick="setArea(30)" class="p-2 border border-slate-200 rounded-xl hover:bg-gold-50 hover:border-gold-400 transition-all text-center">
                        <div class="text-[10px] text-slate-400 font-bold mb-1">車2台</div>
                        <div class="font-black text-slate-700">30㎡</div>
                    </button>
                </div>

                <!-- 計算ボタン -->
                <button onclick="calculate()" class="w-full bg-slate-900 text-white py-5 rounded-xl font-bold text-lg hover:bg-slate-800 shadow-lg hover:shadow-xl transition-all active:scale-95 flex items-center justify-center gap-2">
                    見積もりを計算する
                    <i data-lucide="calculator" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- 結果表示エリア (最初は隠れています) -->
            <div id="resultArea" class="hidden mt-8 pt-8 border-t border-dashed border-slate-200 animate-fade-in">
                <div class="space-y-3 mb-6">
                    <div class="flex justify-between text-sm">
                        <span class="text-slate-400 font-bold">適用単価</span>
                        <span id="unitPrice" class="font-bold text-slate-800">-</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-slate-400 font-bold">施工費 (税別)</span>
                        <span id="basePrice" class="font-bold text-slate-800">-</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-slate-400 font-bold">消費税 (10%)</span>
                        <span id="taxPrice" class="font-bold text-slate-800">-</span>
                    </div>
                </div>

                <div class="bg-gradient-to-br from-gold-400 to-gold-600 rounded-2xl p-6 text-center text-white shadow-lg relative overflow-hidden">
                    <p class="text-[10px] font-bold tracking-widest uppercase opacity-80 mb-1">お見積り概算金額 (税込)</p>
                    <div class="text-4xl font-black tracking-tight" id="totalPrice">¥0</div>
                    <p id="fixedPriceNotice" class="text-[10px] mt-2 bg-black/20 inline-block px-2 py-1 rounded hidden">※一式工事価格適用</p>
                </div>

                <p class="text-[10px] text-slate-400 mt-4 text-center leading-relaxed">
                    ※2024年1月版価格表に基づく施工費のみの概算です。<br>
                    下地処理、オプション、諸経費は含まれておりません。
                </p>
            </div>
        </div>

        <!-- ビフォーアフター (画像がないためダミー表示) -->
        <div class="rounded-3xl overflow-hidden shadow-2xl bg-black text-white relative">
            <div class="absolute top-4 left-4 z-20 bg-black/50 backdrop-blur px-3 py-1 rounded-full border border-white/20">
                <span class="text-[10px] font-bold tracking-widest uppercase">Before / After</span>
            </div>
            
            <div class="slider-container">
                <!-- ダミー画像 (グレーの背景) -->
                <div class="slider-img flex items-center justify-center bg-slate-800 text-slate-500 font-bold">
                    After Image (施工後)
                </div>
                
                <div class="slider-overlay" id="sliderOverlay">
                    <div class="slider-img flex items-center justify-center bg-slate-600 text-slate-300 font-bold" style="width: 200vw;">
                       Before Image (施工前)
                    </div>
                </div>

                <div class="slider-handle" id="sliderHandle">
                    <i data-lucide="chevrons-left-right" class="w-4 h-4 text-slate-800"></i>
                </div>
                <input type="range" min="0" max="100" value="50" class="slider-range" oninput="updateSlider(this.value)">
            </div>
            <div class="p-6 text-center">
                <p class="text-sm text-slate-400">スライダーを左右に動かして変化を確認できます</p>
            </div>
        </div>

    </div>

    <!-- JavaScript (計算ロジック) -->
    <script>
        // アイコンの初期化
        lucide.createIcons();

        // 面積セット用関数
        function setArea(val) {
            document.getElementById('area').value = val;
            calculate(); // セットしたら自動計算
        }

        // スライダー操作用関数
        function updateSlider(val) {
            document.getElementById('sliderOverlay').style.width = val + '%';
            document.getElementById('sliderHandle').style.left = val + '%';
        }

        // 計算ロジック
        function calculate() {
            const areaInput = document.getElementById('area').value;
            const area = parseFloat(areaInput);

            if (!area || area <= 0) {
                alert("面積を正しく入力してください");
                return;
            }

            let unitPrice = 0;
            let basePrice = 0;
            let isFixedPrice = false;

            // 単価テーブル (ページ1データ)
            const priceTable = {
                10: 11200, 11: 11200, 12: 11100, 13: 11000, 14: 11000, 15: 10900, 16: 10800, 17: 10700, 18: 10700,
                19: 10600, 20: 10500, 21: 10400, 22: 10400, 23: 10300, 24: 10200, 25: 10200, 26: 10100, 27: 10100,
                28: 10100, 29: 10100, 30: 10000, 31: 10000, 32: 9900, 33: 9900, 34: 9900, 35: 9900, 36: 9800,
                37: 9800, 38: 9800, 39: 9800, 40: 9700, 41: 9700, 42: 9700, 43: 9700, 44: 9600, 45: 9600, 46: 9600,
                47: 9600, 48: 9500, 49: 9500, 50: 9500, 51: 9500, 52: 9400, 53: 9400, 54: 9400, 55: 9400
            };

            const rArea = Math.round(area);

            // 単価決定
            if (rArea >= 63) { unitPrice = 9200; }
            else if (rArea >= 56) { unitPrice = 9300; }
            else if (priceTable[rArea]) { unitPrice = priceTable[rArea]; }
            else { unitPrice = 11200; } // デフォルト

            basePrice = area * unitPrice;

            // 最低施工金額チェック (115,900円)
            if (basePrice < 115900) {
                basePrice = 115900;
                isFixedPrice = true;
            }

            const tax = Math.floor(basePrice * 0.1);
            const total = Math.floor(basePrice + tax);

            // 表示更新
            document.getElementById('resultArea').classList.remove('hidden');
            
            document.getElementById('unitPrice').innerText = isFixedPrice ? "一式工事適用" : unitPrice.toLocaleString() + " 円";
            document.getElementById('basePrice').innerText = basePrice.toLocaleString() + " 円";
            document.getElementById('taxPrice').innerText = tax.toLocaleString() + " 円";
            document.getElementById('totalPrice').innerText = "¥" + total.toLocaleString();

            const notice = document.getElementById('fixedPriceNotice');
            if (isFixedPrice) notice.classList.remove('hidden');
            else notice.classList.add('hidden');
        }
    </script>
</body>
</html>
